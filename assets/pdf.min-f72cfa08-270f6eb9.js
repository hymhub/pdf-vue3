var vr=Object.defineProperty,br=(S,s,r)=>s in S?vr(S,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):S[s]=r,It=(S,s,r)=>(br(S,typeof s!="symbol"?s+"":s,r),r),ye=(S,s,r)=>{if(!s.has(S))throw TypeError("Cannot "+r)},T=(S,s,r)=>(ye(S,s,"read from private field"),r?r.call(S):s.get(S)),et=(S,s,r)=>{if(s.has(S))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(S):s.set(S,r)},ut=(S,s,r,u)=>(ye(S,s,"write to private field"),u?u.call(S,r):s.set(S,r),r),ue=(S,s,r,u)=>({set _(o){ut(S,s,o,r)},get _(){return T(S,s,u)}}),nt=(S,s,r)=>(ye(S,s,"access private method"),r),commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}function getAugmentedNamespace(S){if(S.__esModule)return S;var s=S.default;if(typeof s=="function"){var r=function u(){if(this instanceof u){var o=[null];o.push.apply(o,arguments);var v=Function.bind.apply(s,o);return new v}return s.apply(this,arguments)};r.prototype=s.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(S).forEach(function(u){var o=Object.getOwnPropertyDescriptor(S,u);Object.defineProperty(r,u,o.get?o:{enumerable:!0,get:function(){return S[u]}})}),r}function commonjsRequire(S){throw new Error('Could not dynamically require "'+S+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf_min$2={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$6=getAugmentedNamespace(__viteBrowserExternal$1);var path2dPolyfill_min={},hasRequiredPath2dPolyfill_min;function requirePath2dPolyfill_min(){return hasRequiredPath2dPolyfill_min||(hasRequiredPath2dPolyfill_min=1,function(){function S(f,C,q){if(q||arguments.length===2)for(var R,$=0,X=C.length;$<X;$++)!R&&$ in C||(R||(R=Array.prototype.slice.call(C,0,$)),R[$]=C[$]);return f.concat(R||Array.prototype.slice.call(C))}var s={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi,u=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function o(f){var C=[],q=String(f).trim();return q[0]!=="M"&&q[0]!=="m"||q.replace(r,function(R,$,X){var J=function(P){var U=P.match(u);return U?U.map(Number):[]}(X),H=$.toLowerCase(),M=$;if(H==="m"&&J.length>2&&(C.push(S([M],J.splice(0,2),!0)),H="l",M=M==="m"?"l":"L"),J.length<s[H])return"";for(C.push(S([M],J.splice(0,s[H]),!0));J.length>=s[H]&&J.length&&s[H];)C.push(S([M],J.splice(0,s[H]),!0));return""}),C}function v(f,C){var q=f.x*Math.cos(C)-f.y*Math.sin(C),R=f.y*Math.cos(C)+f.x*Math.sin(C);f.x=q,f.y=R}function F(f,C){f.x*=C,f.y*=C}var g=function(){function f(C){var q;this.commands=[],C&&C instanceof f?(q=this.commands).push.apply(q,C.commands):C&&(this.commands=o(C))}return f.prototype.addPath=function(C){var q;C&&C instanceof f&&(q=this.commands).push.apply(q,C.commands)},f.prototype.moveTo=function(C,q){this.commands.push(["M",C,q])},f.prototype.lineTo=function(C,q){this.commands.push(["L",C,q])},f.prototype.arc=function(C,q,R,$,X,J){this.commands.push(["AC",C,q,R,$,X,!!J])},f.prototype.arcTo=function(C,q,R,$,X){this.commands.push(["AT",C,q,R,$,X])},f.prototype.ellipse=function(C,q,R,$,X,J,H,M){this.commands.push(["E",C,q,R,$,X,J,H,!!M])},f.prototype.closePath=function(){this.commands.push(["Z"])},f.prototype.bezierCurveTo=function(C,q,R,$,X,J){this.commands.push(["C",C,q,R,$,X,J])},f.prototype.quadraticCurveTo=function(C,q,R,$){this.commands.push(["Q",C,q,R,$])},f.prototype.rect=function(C,q,R,$){this.commands.push(["R",C,q,R,$])},f.prototype.roundRect=function(C,q,R,$,X){X===void 0?this.commands.push(["RR",C,q,R,$,0]):this.commands.push(["RR",C,q,R,$,X])},f}();function y(f,C){var q,R,$,X,J,H,M,P,U,_,E,Y,rt,Z,V,Q,ct,vt,pt,Tt,B,j,z,G,N=0,W=0,it=null,at=null,lt=null,dt=null,ft=null,mt=null;f.beginPath();for(var gt=0;gt<C.length;++gt){(vt=C[gt][0])!=="S"&&vt!=="s"&&vt!=="C"&&vt!=="c"&&(it=null,at=null),vt!=="T"&&vt!=="t"&&vt!=="Q"&&vt!=="q"&&(lt=null,dt=null);var ot=void 0;switch(vt){case"m":case"M":ot=C[gt],vt==="m"?(N+=ot[1],W+=ot[2]):(N=ot[1],W=ot[2]),vt!=="M"&&ft||(ft={x:N,y:W}),f.moveTo(N,W);break;case"l":N+=(ot=C[gt])[1],W+=ot[2],f.lineTo(N,W);break;case"L":N=(ot=C[gt])[1],W=ot[2],f.lineTo(N,W);break;case"H":N=(ot=C[gt])[1],f.lineTo(N,W);break;case"h":N+=(ot=C[gt])[1],f.lineTo(N,W);break;case"V":W=(ot=C[gt])[1],f.lineTo(N,W);break;case"v":W+=(ot=C[gt])[1],f.lineTo(N,W);break;case"a":case"A":if(ot=C[gt],mt===null)throw new Error("This should never happen");vt==="a"?(N+=ot[6],W+=ot[7]):(N=ot[6],W=ot[7]),Z=ot[1],V=ot[2],M=ot[3]*Math.PI/180,$=!!ot[4],X=!!ot[5],J={x:N,y:W},v(H={x:(mt.x-J.x)/2,y:(mt.y-J.y)/2},-M),(P=H.x*H.x/(Z*Z)+H.y*H.y/(V*V))>1&&(Z*=P=Math.sqrt(P),V*=P),U=Z*Z*V*V,_=Z*Z*H.y*H.y+V*V*H.x*H.x,F(pt={x:Z*H.y/V,y:-V*H.x/Z},X!==$?Math.sqrt((U-_)/_)||0:-Math.sqrt((U-_)/_)||0),R=Math.atan2((H.y-pt.y)/V,(H.x-pt.x)/Z),q=Math.atan2(-(H.y+pt.y)/V,-(H.x+pt.x)/Z),v(pt,M),j=pt,z=(J.x+mt.x)/2,G=(J.y+mt.y)/2,j.x+=z,j.y+=G,f.save(),f.translate(pt.x,pt.y),f.rotate(M),f.scale(Z,V),f.arc(0,0,1,R,q,!X),f.restore();break;case"C":it=(ot=C[gt])[3],at=ot[4],N=ot[5],W=ot[6],f.bezierCurveTo(ot[1],ot[2],it,at,N,W);break;case"c":ot=C[gt],f.bezierCurveTo(ot[1]+N,ot[2]+W,ot[3]+N,ot[4]+W,ot[5]+N,ot[6]+W),it=ot[3]+N,at=ot[4]+W,N+=ot[5],W+=ot[6];break;case"S":ot=C[gt],it!==null&&at!==null||(it=N,at=W),f.bezierCurveTo(2*N-it,2*W-at,ot[1],ot[2],ot[3],ot[4]),it=ot[1],at=ot[2],N=ot[3],W=ot[4];break;case"s":ot=C[gt],it!==null&&at!==null||(it=N,at=W),f.bezierCurveTo(2*N-it,2*W-at,ot[1]+N,ot[2]+W,ot[3]+N,ot[4]+W),it=ot[1]+N,at=ot[2]+W,N+=ot[3],W+=ot[4];break;case"Q":lt=(ot=C[gt])[1],dt=ot[2],N=ot[3],W=ot[4],f.quadraticCurveTo(lt,dt,N,W);break;case"q":lt=(ot=C[gt])[1]+N,dt=ot[2]+W,N+=ot[3],W+=ot[4],f.quadraticCurveTo(lt,dt,N,W);break;case"T":lt!==null&&dt!==null||(lt=N,dt=W),lt=2*N-lt,dt=2*W-dt,N=(ot=C[gt])[1],W=ot[2],f.quadraticCurveTo(lt,dt,N,W);break;case"t":lt!==null&&dt!==null||(lt=N,dt=W),lt=2*N-lt,dt=2*W-dt,N+=(ot=C[gt])[1],W+=ot[2],f.quadraticCurveTo(lt,dt,N,W);break;case"z":case"Z":ft&&(N=ft.x,W=ft.y),ft=null,f.closePath();break;case"AC":N=(ot=C[gt])[1],W=ot[2],rt=ot[3],R=ot[4],q=ot[5],Tt=ot[6],f.arc(N,W,rt,R,q,Tt);break;case"AT":E=(ot=C[gt])[1],Y=ot[2],N=ot[3],W=ot[4],rt=ot[5],f.arcTo(E,Y,N,W,rt);break;case"E":N=(ot=C[gt])[1],W=ot[2],Z=ot[3],V=ot[4],M=ot[5],R=ot[6],q=ot[7],Tt=ot[8],f.save(),f.translate(N,W),f.rotate(M),f.scale(Z,V),f.arc(0,0,1,R,q,Tt),f.restore();break;case"R":N=(ot=C[gt])[1],W=ot[2],Q=ot[3],ct=ot[4],ft={x:N,y:W},f.rect(N,W,Q,ct);break;case"RR":N=(ot=C[gt])[1],W=ot[2],Q=ot[3],ct=ot[4],B=ot[5],ft={x:N,y:W},f.roundRect(N,W,Q,ct,B)}mt?(mt.x=N,mt.y=W):mt={x:N,y:W}}}function D(f,C,q,R,$){var X=this;if($===void 0&&($=0),typeof $=="number"&&($=[$]),Array.isArray($)){if($.length===0||$.length>4)throw new RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat($.length," radii provided. Between one and four radii are necessary."));if($.forEach(function(_){if(_<0)throw new RangeError("Failed to execute 'roundRect' on '".concat(X.constructor.name,"': Radius value ").concat(_," is negative."))}),$.length===1&&$[0]===0)return this.rect(f,C,q,R);var J,H,M,P=Math.min(q,R)/2,U=J=H=M=Math.min(P,$[0]);$.length===2&&(J=M=Math.min(P,$[1])),$.length===3&&(J=M=Math.min(P,$[1]),H=Math.min(P,$[2])),$.length===4&&(J=Math.min(P,$[1]),H=Math.min(P,$[2]),M=Math.min(P,$[3])),this.moveTo(f,C+R-M),this.arcTo(f,C,f+U,C,U),this.arcTo(f+q,C,f+q,C+J,J),this.arcTo(f+q,C+R,f+q-H,C+R,H),this.arcTo(f,C+R,f,C+R-M,M),this.moveTo(f,C)}}(function(f){if(f&&f.CanvasRenderingContext2D&&!f.Path2D){var C=f.CanvasRenderingContext2D,q=C.prototype.fill,R=C.prototype.stroke,$=C.prototype.isPointInPath;C.prototype.fill=function(){for(var X=[],J=0;J<arguments.length;J++)X[J]=arguments[J];if(!(X[0]instanceof g))return M=X[0]||"nonzero",q.apply(this,[M]);var H=X[0],M=X[1]||"nonzero";y(this,H.commands),q.apply(this,[M])},C.prototype.stroke=function(X){X&&y(this,X.commands),R.apply(this)},C.prototype.isPointInPath=function(){for(var X=[],J=0;J<arguments.length;J++)X[J]=arguments[J];if(X[0]instanceof g){var H=X[0],M=X[1],P=X[2],U=X[3]||"nonzero";return y(this,H.commands),$.apply(this,[M,P,U])}return $.apply(this,X)},f.Path2D=g}})(window),function(f){if(f&&f.CanvasRenderingContext2D){var C=f.CanvasRenderingContext2D,q=f.Path2D;C&&!C.prototype.roundRect&&(C.prototype.roundRect=D),q&&!q.prototype.roundRect&&(q.prototype.roundRect=D)}}(window)}()),path2dPolyfill_min}(function(module,exports){(function(S,s){module.exports=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(S,s,r)=>{var u,o;Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.TextRenderingMode=s.RenderingIntentFlag=s.PromiseCapability=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.MAX_IMAGE_SIZE_TO_CACHE=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.BASELINE_FACTOR=s.AnnotationType=s.AnnotationStateModelType=s.AnnotationReviewState=s.AnnotationReplyType=s.AnnotationMode=s.AnnotationMarkedState=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.assert=function(M,P){M||y(P)},s.bytesToString=function(M){typeof M=="object"&&(M==null?void 0:M.length)!==void 0||y("Invalid argument for bytesToString");const P=M.length,U=8192;if(P<U)return String.fromCharCode.apply(null,M);const _=[];for(let E=0;E<P;E+=U){const Y=Math.min(E+U,P),rt=M.subarray(E,Y);_.push(String.fromCharCode.apply(null,rt))}return _.join("")},s.createValidAbsoluteUrl=function(M){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!M)return null;try{if(U&&typeof M=="string"){if(U.addDefaultProtocol&&M.startsWith("www.")){const E=M.match(/\./g);(E==null?void 0:E.length)>=2&&(M=`http://${M}`)}if(U.tryConvertEncoding)try{M=X(M)}catch{}}const _=P?new URL(M,P):new URL(M);if(function(E){switch(E==null?void 0:E.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(_))return _}catch{}return null},s.getModificationDate=function(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[M.getUTCFullYear().toString(),(M.getUTCMonth()+1).toString().padStart(2,"0"),M.getUTCDate().toString().padStart(2,"0"),M.getUTCHours().toString().padStart(2,"0"),M.getUTCMinutes().toString().padStart(2,"0"),M.getUTCSeconds().toString().padStart(2,"0")].join("")},s.getVerbosityLevel=function(){return F},s.info=function(M){F>=v.INFOS&&console.log(`Info: ${M}`)},s.isArrayBuffer=function(M){return typeof M=="object"&&(M==null?void 0:M.byteLength)!==void 0},s.isArrayEqual=function(M,P){if(M.length!==P.length)return!1;for(let U=0,_=M.length;U<_;U++)if(M[U]!==P[U])return!1;return!0},s.normalizeUnicode=function(M){return J||(J=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,H=new Map([["ﬅ","ſt"]])),M.replaceAll(J,(P,U,_)=>U?U.normalize("NFKC"):H.get(_))},s.objectFromMap=function(M){const P=Object.create(null);for(const[U,_]of M)P[U]=_;return P},s.objectSize=function(M){return Object.keys(M).length},s.setVerbosityLevel=function(M){Number.isInteger(M)&&(F=M)},s.shadow=D,s.string32=function(M){return String.fromCharCode(M>>24&255,M>>16&255,M>>8&255,255&M)},s.stringToBytes=C,s.stringToPDFString=function(M){if(M[0]>="ï"){let U;if(M[0]==="þ"&&M[1]==="ÿ"?U="utf-16be":M[0]==="ÿ"&&M[1]==="þ"?U="utf-16le":M[0]==="ï"&&M[1]==="»"&&M[2]==="¿"&&(U="utf-8"),U)try{const _=new TextDecoder(U,{fatal:!0}),E=C(M);return _.decode(E)}catch(_){g(`stringToPDFString: "${_}".`)}}const P=[];for(let U=0,_=M.length;U<_;U++){const E=$[M.charCodeAt(U)];P.push(E?String.fromCharCode(E):M.charAt(U))}return P.join("")},s.stringToUTF8String=X,s.unreachable=y,s.utf8StringToString=function(M){return unescape(encodeURIComponent(M))},s.warn=g,globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,r(2)),s.IDENTITY_MATRIX=[1,0,0,1,0,0],s.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],s.MAX_IMAGE_SIZE_TO_CACHE=1e7,s.LINE_FACTOR=1.35,s.LINE_DESCENT_FACTOR=.35,s.BASELINE_FACTOR=.25925925925925924,s.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},s.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},s.AnnotationEditorPrefix="pdfjs_internal_editor_",s.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},s.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},s.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},s.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},s.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},s.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},s.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},s.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},s.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},s.AnnotationReplyType={GROUP:"Group",REPLY:"R"},s.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},s.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},s.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},s.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},s.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},s.PageActionEventType={O:"PageOpen",C:"PageClose"};const v={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=v,s.CMapCompressionType={NONE:0,BINARY:1},s.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},s.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let F=v.WARNINGS;function g(M){F>=v.WARNINGS&&console.log(`Warning: ${M}`)}function y(M){throw new Error(M)}function D(M,P,U){let _=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return Object.defineProperty(M,P,{value:U,enumerable:!_,configurable:!0,writable:!1}),U}const f=function(){function M(P,U){this.constructor===M&&y("Cannot initialize BaseException."),this.message=P,this.name=U}return M.prototype=new Error,M.constructor=M,M}();s.BaseException=f,s.PasswordException=class extends f{constructor(M,P){super(M,"PasswordException"),this.code=P}},s.UnknownErrorException=class extends f{constructor(M,P){super(M,"UnknownErrorException"),this.details=P}},s.InvalidPDFException=class extends f{constructor(M){super(M,"InvalidPDFException")}},s.MissingPDFException=class extends f{constructor(M){super(M,"MissingPDFException")}},s.UnexpectedResponseException=class extends f{constructor(M,P){super(M,"UnexpectedResponseException"),this.status=P}},s.FormatError=class extends f{constructor(M){super(M,"FormatError")}},s.AbortException=class extends f{constructor(M){super(M,"AbortException")}};function C(M){typeof M!="string"&&y("Invalid argument for stringToBytes");const P=M.length,U=new Uint8Array(P);for(let _=0;_<P;++_)U[_]=255&M.charCodeAt(_);return U}s.FeatureTest=class{static get isLittleEndian(){return D(this,"isLittleEndian",function(){const M=new Uint8Array(4);return M[0]=1,new Uint32Array(M.buffer,0,1)[0]===1}())}static get isEvalSupported(){return D(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return D(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?D(this,"platform",{isWin:!1,isMac:!1}):D(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}};const q=[...Array(256).keys()].map(M=>M.toString(16).padStart(2,"0"));class R{static makeHexColor(P,U,_){return`#${q[P]}${q[U]}${q[_]}`}static scaleMinMax(P,U){let _;P[0]?(P[0]<0&&(_=U[0],U[0]=U[1],U[1]=_),U[0]*=P[0],U[1]*=P[0],P[3]<0&&(_=U[2],U[2]=U[3],U[3]=_),U[2]*=P[3],U[3]*=P[3]):(_=U[0],U[0]=U[2],U[2]=_,_=U[1],U[1]=U[3],U[3]=_,P[1]<0&&(_=U[2],U[2]=U[3],U[3]=_),U[2]*=P[1],U[3]*=P[1],P[2]<0&&(_=U[0],U[0]=U[1],U[1]=_),U[0]*=P[2],U[1]*=P[2]),U[0]+=P[4],U[1]+=P[4],U[2]+=P[5],U[3]+=P[5]}static transform(P,U){return[P[0]*U[0]+P[2]*U[1],P[1]*U[0]+P[3]*U[1],P[0]*U[2]+P[2]*U[3],P[1]*U[2]+P[3]*U[3],P[0]*U[4]+P[2]*U[5]+P[4],P[1]*U[4]+P[3]*U[5]+P[5]]}static applyTransform(P,U){return[P[0]*U[0]+P[1]*U[2]+U[4],P[0]*U[1]+P[1]*U[3]+U[5]]}static applyInverseTransform(P,U){const _=U[0]*U[3]-U[1]*U[2];return[(P[0]*U[3]-P[1]*U[2]+U[2]*U[5]-U[4]*U[3])/_,(-P[0]*U[1]+P[1]*U[0]+U[4]*U[1]-U[5]*U[0])/_]}static getAxialAlignedBoundingBox(P,U){const _=R.applyTransform(P,U),E=R.applyTransform(P.slice(2,4),U),Y=R.applyTransform([P[0],P[3]],U),rt=R.applyTransform([P[2],P[1]],U);return[Math.min(_[0],E[0],Y[0],rt[0]),Math.min(_[1],E[1],Y[1],rt[1]),Math.max(_[0],E[0],Y[0],rt[0]),Math.max(_[1],E[1],Y[1],rt[1])]}static inverseTransform(P){const U=P[0]*P[3]-P[1]*P[2];return[P[3]/U,-P[1]/U,-P[2]/U,P[0]/U,(P[2]*P[5]-P[4]*P[3])/U,(P[4]*P[1]-P[5]*P[0])/U]}static singularValueDecompose2dScale(P){const U=[P[0],P[2],P[1],P[3]],_=P[0]*U[0]+P[1]*U[2],E=P[0]*U[1]+P[1]*U[3],Y=P[2]*U[0]+P[3]*U[2],rt=P[2]*U[1]+P[3]*U[3],Z=(_+rt)/2,V=Math.sqrt((_+rt)**2-4*(_*rt-Y*E))/2,Q=Z+V||1,ct=Z-V||1;return[Math.sqrt(Q),Math.sqrt(ct)]}static normalizeRect(P){const U=P.slice(0);return P[0]>P[2]&&(U[0]=P[2],U[2]=P[0]),P[1]>P[3]&&(U[1]=P[3],U[3]=P[1]),U}static intersect(P,U){const _=Math.max(Math.min(P[0],P[2]),Math.min(U[0],U[2])),E=Math.min(Math.max(P[0],P[2]),Math.max(U[0],U[2]));if(_>E)return null;const Y=Math.max(Math.min(P[1],P[3]),Math.min(U[1],U[3])),rt=Math.min(Math.max(P[1],P[3]),Math.max(U[1],U[3]));return Y>rt?null:[_,Y,E,rt]}static bezierBoundingBox(P,U,_,E,Y,rt,Z,V){const Q=[],ct=[[],[]];let vt,pt,Tt,B,j,z,G,N;for(let lt=0;lt<2;++lt)if(lt===0?(pt=6*P-12*_+6*Y,vt=-3*P+9*_-9*Y+3*Z,Tt=3*_-3*P):(pt=6*U-12*E+6*rt,vt=-3*U+9*E-9*rt+3*V,Tt=3*E-3*U),Math.abs(vt)<1e-12){if(Math.abs(pt)<1e-12)continue;B=-Tt/pt,0<B&&B<1&&Q.push(B)}else G=pt*pt-4*Tt*vt,N=Math.sqrt(G),G<0||(j=(-pt+N)/(2*vt),0<j&&j<1&&Q.push(j),z=(-pt-N)/(2*vt),0<z&&z<1&&Q.push(z));let W,it=Q.length;const at=it;for(;it--;)B=Q[it],W=1-B,ct[0][it]=W*W*W*P+3*W*W*B*_+3*W*B*B*Y+B*B*B*Z,ct[1][it]=W*W*W*U+3*W*W*B*E+3*W*B*B*rt+B*B*B*V;return ct[0][at]=P,ct[1][at]=U,ct[0][at+1]=Z,ct[1][at+1]=V,ct[0].length=ct[1].length=at+2,[Math.min(...ct[0]),Math.min(...ct[1]),Math.max(...ct[0]),Math.max(...ct[1])]}}s.Util=R;const $=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function X(M){return decodeURIComponent(escape(M))}s.PromiseCapability=(o=class{constructor(){et(this,u,!1),this.promise=new Promise((M,P)=>{this.resolve=U=>{ut(this,u,!0),M(U)},this.reject=U=>{ut(this,u,!0),P(U)}})}get settled(){return T(this,u)}},u=new WeakMap,o);let J=null,H=null},(S,s,r)=>{var u=r(3);(function(){!globalThis.DOMMatrix&&u.isNodeJS&&(globalThis.DOMMatrix=require$$6.DOMMatrix)})(),function(){if(globalThis.Path2D||!u.isNodeJS)return;const{CanvasRenderingContext2D:o}=require$$6,{polyfillPath2D:v}=requirePath2dPolyfill_min();globalThis.CanvasRenderingContext2D=o,v(globalThis)}(),function(){Array.prototype.at||r(4)}(),function(){Uint8Array.prototype.at||r(78)}(),function(){globalThis.structuredClone||r(90)}()},(S,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isNodeJS=void 0;const r=!(typeof process!="object"||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=r},(S,s,r)=>{r(5);var u=r(77);S.exports=u("Array","at")},(S,s,r)=>{var u=r(6),o=r(43),v=r(67),F=r(65),g=r(72);u({target:"Array",proto:!0},{at:function(y){var D=o(this),f=v(D),C=F(y),q=C>=0?C:f+C;return q<0||q>=f?void 0:D[q]}}),g("at")},(S,s,r)=>{var u=r(7),o=r(8).f,v=r(47),F=r(51),g=r(41),y=r(59),D=r(71);S.exports=function(f,C){var q,R,$,X,J,H=f.target,M=f.global,P=f.stat;if(q=M?u:P?u[H]||g(H,{}):(u[H]||{}).prototype)for(R in C){if(X=C[R],$=f.dontCallGetSet?(J=o(q,R))&&J.value:q[R],!D(M?R:H+(P?".":"#")+R,f.forced)&&$!==void 0){if(typeof X==typeof $)continue;y(X,$)}(f.sham||$&&$.sham)&&v(X,"sham",!0),F(q,R,X,f)}}},function(S){var s=function(r){return r&&r.Math==Math&&r};S.exports=s(typeof globalThis=="object"&&globalThis)||s(typeof window=="object"&&window)||s(typeof self=="object"&&self)||s(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||this||Function("return this")()},(S,s,r)=>{var u=r(9),o=r(11),v=r(13),F=r(14),g=r(15),y=r(21),D=r(42),f=r(45),C=Object.getOwnPropertyDescriptor;s.f=u?C:function(q,R){if(q=g(q),R=y(R),f)try{return C(q,R)}catch{}if(D(q,R))return F(!o(v.f,q,R),q[R])}},(S,s,r)=>{var u=r(10);S.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},S=>{S.exports=function(s){try{return!!s()}catch{return!0}}},(S,s,r)=>{var u=r(12),o=Function.prototype.call;S.exports=u?o.bind(o):function(){return o.apply(o,arguments)}},(S,s,r)=>{var u=r(10);S.exports=!u(function(){var o=function(){}.bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},(S,s)=>{var r={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,o=u&&!r.call({1:2},1);s.f=o?function(v){var F=u(this,v);return!!F&&F.enumerable}:r},S=>{S.exports=function(s,r){return{enumerable:!(1&s),configurable:!(2&s),writable:!(4&s),value:r}}},(S,s,r)=>{var u=r(16),o=r(19);S.exports=function(v){return u(o(v))}},(S,s,r)=>{var u=r(17),o=r(10),v=r(18),F=Object,g=u("".split);S.exports=o(function(){return!F("z").propertyIsEnumerable(0)})?function(y){return v(y)=="String"?g(y,""):F(y)}:F},(S,s,r)=>{var u=r(12),o=Function.prototype,v=o.call,F=u&&o.bind.bind(v,v);S.exports=u?F:function(g){return function(){return v.apply(g,arguments)}}},(S,s,r)=>{var u=r(17),o=u({}.toString),v=u("".slice);S.exports=function(F){return v(o(F),8,-1)}},(S,s,r)=>{var u=r(20),o=TypeError;S.exports=function(v){if(u(v))throw o("Can't call method on "+v);return v}},S=>{S.exports=function(s){return s==null}},(S,s,r)=>{var u=r(22),o=r(26);S.exports=function(v){var F=u(v,"string");return o(F)?F:F+""}},(S,s,r)=>{var u=r(11),o=r(23),v=r(26),F=r(33),g=r(36),y=r(37),D=TypeError,f=y("toPrimitive");S.exports=function(C,q){if(!o(C)||v(C))return C;var R,$=F(C,f);if($){if(q===void 0&&(q="default"),R=u($,C,q),!o(R)||v(R))return R;throw D("Can't convert object to primitive value")}return q===void 0&&(q="number"),g(C,q)}},(S,s,r)=>{var u=r(24),o=r(25),v=o.all;S.exports=o.IS_HTMLDDA?function(F){return typeof F=="object"?F!==null:u(F)||F===v}:function(F){return typeof F=="object"?F!==null:u(F)}},(S,s,r)=>{var u=r(25),o=u.all;S.exports=u.IS_HTMLDDA?function(v){return typeof v=="function"||v===o}:function(v){return typeof v=="function"}},S=>{var s=typeof document=="object"&&document.all,r=s===void 0&&s!==void 0;S.exports={all:s,IS_HTMLDDA:r}},(S,s,r)=>{var u=r(27),o=r(24),v=r(28),F=r(29),g=Object;S.exports=F?function(y){return typeof y=="symbol"}:function(y){var D=u("Symbol");return o(D)&&v(D.prototype,g(y))}},(S,s,r)=>{var u=r(7),o=r(24);S.exports=function(v,F){return arguments.length<2?(g=u[v],o(g)?g:void 0):u[v]&&u[v][F];var g}},(S,s,r)=>{var u=r(17);S.exports=u({}.isPrototypeOf)},(S,s,r)=>{var u=r(30);S.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(S,s,r)=>{var u=r(31),o=r(10),v=r(7).String;S.exports=!!Object.getOwnPropertySymbols&&!o(function(){var F=Symbol();return!v(F)||!(Object(F)instanceof Symbol)||!Symbol.sham&&u&&u<41})},(S,s,r)=>{var u,o,v=r(7),F=r(32),g=v.process,y=v.Deno,D=g&&g.versions||y&&y.version,f=D&&D.v8;f&&(o=(u=f.split("."))[0]>0&&u[0]<4?1:+(u[0]+u[1])),!o&&F&&(!(u=F.match(/Edge\/(\d+)/))||u[1]>=74)&&(u=F.match(/Chrome\/(\d+)/))&&(o=+u[1]),S.exports=o},S=>{S.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},(S,s,r)=>{var u=r(34),o=r(20);S.exports=function(v,F){var g=v[F];return o(g)?void 0:u(g)}},(S,s,r)=>{var u=r(24),o=r(35),v=TypeError;S.exports=function(F){if(u(F))return F;throw v(o(F)+" is not a function")}},S=>{var s=String;S.exports=function(r){try{return s(r)}catch{return"Object"}}},(S,s,r)=>{var u=r(11),o=r(24),v=r(23),F=TypeError;S.exports=function(g,y){var D,f;if(y==="string"&&o(D=g.toString)&&!v(f=u(D,g))||o(D=g.valueOf)&&!v(f=u(D,g))||y!=="string"&&o(D=g.toString)&&!v(f=u(D,g)))return f;throw F("Can't convert object to primitive value")}},(S,s,r)=>{var u=r(7),o=r(38),v=r(42),F=r(44),g=r(30),y=r(29),D=u.Symbol,f=o("wks"),C=y?D.for||D:D&&D.withoutSetter||F;S.exports=function(q){return v(f,q)||(f[q]=g&&v(D,q)?D[q]:C("Symbol."+q)),f[q]}},(S,s,r)=>{var u=r(39),o=r(40);(S.exports=function(v,F){return o[v]||(o[v]=F!==void 0?F:{})})("versions",[]).push({version:"3.30.2",mode:u?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},S=>{S.exports=!1},(S,s,r)=>{var u=r(7),o=r(41),v="__core-js_shared__",F=u[v]||o(v,{});S.exports=F},(S,s,r)=>{var u=r(7),o=Object.defineProperty;S.exports=function(v,F){try{o(u,v,{value:F,configurable:!0,writable:!0})}catch{u[v]=F}return F}},(S,s,r)=>{var u=r(17),o=r(43),v=u({}.hasOwnProperty);S.exports=Object.hasOwn||function(F,g){return v(o(F),g)}},(S,s,r)=>{var u=r(19),o=Object;S.exports=function(v){return o(u(v))}},(S,s,r)=>{var u=r(17),o=0,v=Math.random(),F=u(1 .toString);S.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+F(++o+v,36)}},(S,s,r)=>{var u=r(9),o=r(10),v=r(46);S.exports=!u&&!o(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},(S,s,r)=>{var u=r(7),o=r(23),v=u.document,F=o(v)&&o(v.createElement);S.exports=function(g){return F?v.createElement(g):{}}},(S,s,r)=>{var u=r(9),o=r(48),v=r(14);S.exports=u?function(F,g,y){return o.f(F,g,v(1,y))}:function(F,g,y){return F[g]=y,F}},(S,s,r)=>{var u=r(9),o=r(45),v=r(49),F=r(50),g=r(21),y=TypeError,D=Object.defineProperty,f=Object.getOwnPropertyDescriptor,C="enumerable",q="configurable",R="writable";s.f=u?v?function($,X,J){if(F($),X=g(X),F(J),typeof $=="function"&&X==="prototype"&&"value"in J&&R in J&&!J[R]){var H=f($,X);H&&H[R]&&($[X]=J.value,J={configurable:q in J?J[q]:H[q],enumerable:C in J?J[C]:H[C],writable:!1})}return D($,X,J)}:D:function($,X,J){if(F($),X=g(X),F(J),o)try{return D($,X,J)}catch{}if("get"in J||"set"in J)throw y("Accessors not supported");return"value"in J&&($[X]=J.value),$}},(S,s,r)=>{var u=r(9),o=r(10);S.exports=u&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},(S,s,r)=>{var u=r(23),o=String,v=TypeError;S.exports=function(F){if(u(F))return F;throw v(o(F)+" is not an object")}},(S,s,r)=>{var u=r(24),o=r(48),v=r(52),F=r(41);S.exports=function(g,y,D,f){f||(f={});var C=f.enumerable,q=f.name!==void 0?f.name:y;if(u(D)&&v(D,q,f),f.global)C?g[y]=D:F(y,D);else{try{f.unsafe?g[y]&&(C=!0):delete g[y]}catch{}C?g[y]=D:o.f(g,y,{value:D,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return g}},(S,s,r)=>{var u=r(17),o=r(10),v=r(24),F=r(42),g=r(9),y=r(53).CONFIGURABLE,D=r(54),f=r(55),C=f.enforce,q=f.get,R=String,$=Object.defineProperty,X=u("".slice),J=u("".replace),H=u([].join),M=g&&!o(function(){return $(function(){},"length",{value:8}).length!==8}),P=String(String).split("String"),U=S.exports=function(_,E,Y){X(R(E),0,7)==="Symbol("&&(E="["+J(R(E),/^Symbol\(([^)]*)\)/,"$1")+"]"),Y&&Y.getter&&(E="get "+E),Y&&Y.setter&&(E="set "+E),(!F(_,"name")||y&&_.name!==E)&&(g?$(_,"name",{value:E,configurable:!0}):_.name=E),M&&Y&&F(Y,"arity")&&_.length!==Y.arity&&$(_,"length",{value:Y.arity});try{Y&&F(Y,"constructor")&&Y.constructor?g&&$(_,"prototype",{writable:!1}):_.prototype&&(_.prototype=void 0)}catch{}var rt=C(_);return F(rt,"source")||(rt.source=H(P,typeof E=="string"?E:"")),_};Function.prototype.toString=U(function(){return v(this)&&q(this).source||D(this)},"toString")},(S,s,r)=>{var u=r(9),o=r(42),v=Function.prototype,F=u&&Object.getOwnPropertyDescriptor,g=o(v,"name"),y=g&&function(){}.name==="something",D=g&&(!u||u&&F(v,"name").configurable);S.exports={EXISTS:g,PROPER:y,CONFIGURABLE:D}},(S,s,r)=>{var u=r(17),o=r(24),v=r(40),F=u(Function.toString);o(v.inspectSource)||(v.inspectSource=function(g){return F(g)}),S.exports=v.inspectSource},(S,s,r)=>{var u,o,v,F=r(56),g=r(7),y=r(23),D=r(47),f=r(42),C=r(40),q=r(57),R=r(58),$="Object already initialized",X=g.TypeError,J=g.WeakMap;if(F||C.state){var H=C.state||(C.state=new J);H.get=H.get,H.has=H.has,H.set=H.set,u=function(P,U){if(H.has(P))throw X($);return U.facade=P,H.set(P,U),U},o=function(P){return H.get(P)||{}},v=function(P){return H.has(P)}}else{var M=q("state");R[M]=!0,u=function(P,U){if(f(P,M))throw X($);return U.facade=P,D(P,M,U),U},o=function(P){return f(P,M)?P[M]:{}},v=function(P){return f(P,M)}}S.exports={set:u,get:o,has:v,enforce:function(P){return v(P)?o(P):u(P,{})},getterFor:function(P){return function(U){var _;if(!y(U)||(_=o(U)).type!==P)throw X("Incompatible receiver, "+P+" required");return _}}}},(S,s,r)=>{var u=r(7),o=r(24),v=u.WeakMap;S.exports=o(v)&&/native code/.test(String(v))},(S,s,r)=>{var u=r(38),o=r(44),v=u("keys");S.exports=function(F){return v[F]||(v[F]=o(F))}},S=>{S.exports={}},(S,s,r)=>{var u=r(42),o=r(60),v=r(8),F=r(48);S.exports=function(g,y,D){for(var f=o(y),C=F.f,q=v.f,R=0;R<f.length;R++){var $=f[R];u(g,$)||D&&u(D,$)||C(g,$,q(y,$))}}},(S,s,r)=>{var u=r(27),o=r(17),v=r(61),F=r(70),g=r(50),y=o([].concat);S.exports=u("Reflect","ownKeys")||function(D){var f=v.f(g(D)),C=F.f;return C?y(f,C(D)):f}},(S,s,r)=>{var u=r(62),o=r(69).concat("length","prototype");s.f=Object.getOwnPropertyNames||function(v){return u(v,o)}},(S,s,r)=>{var u=r(17),o=r(42),v=r(15),F=r(63).indexOf,g=r(58),y=u([].push);S.exports=function(D,f){var C,q=v(D),R=0,$=[];for(C in q)!o(g,C)&&o(q,C)&&y($,C);for(;f.length>R;)o(q,C=f[R++])&&(~F($,C)||y($,C));return $}},(S,s,r)=>{var u=r(15),o=r(64),v=r(67),F=function(g){return function(y,D,f){var C,q=u(y),R=v(q),$=o(f,R);if(g&&D!=D){for(;R>$;)if((C=q[$++])!=C)return!0}else for(;R>$;$++)if((g||$ in q)&&q[$]===D)return g||$||0;return!g&&-1}};S.exports={includes:F(!0),indexOf:F(!1)}},(S,s,r)=>{var u=r(65),o=Math.max,v=Math.min;S.exports=function(F,g){var y=u(F);return y<0?o(y+g,0):v(y,g)}},(S,s,r)=>{var u=r(66);S.exports=function(o){var v=+o;return v!=v||v===0?0:u(v)}},S=>{var s=Math.ceil,r=Math.floor;S.exports=Math.trunc||function(u){var o=+u;return(o>0?r:s)(o)}},(S,s,r)=>{var u=r(68);S.exports=function(o){return u(o.length)}},(S,s,r)=>{var u=r(65),o=Math.min;S.exports=function(v){return v>0?o(u(v),9007199254740991):0}},S=>{S.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(S,s)=>{s.f=Object.getOwnPropertySymbols},(S,s,r)=>{var u=r(10),o=r(24),v=/#|\.prototype\./,F=function(C,q){var R=y[g(C)];return R==f||R!=D&&(o(q)?u(q):!!q)},g=F.normalize=function(C){return String(C).replace(v,".").toLowerCase()},y=F.data={},D=F.NATIVE="N",f=F.POLYFILL="P";S.exports=F},(S,s,r)=>{var u=r(37),o=r(73),v=r(48).f,F=u("unscopables"),g=Array.prototype;g[F]==null&&v(g,F,{configurable:!0,value:o(null)}),S.exports=function(y){g[F][y]=!0}},(S,s,r)=>{var u,o=r(50),v=r(74),F=r(69),g=r(58),y=r(76),D=r(46),f=r(57),C="prototype",q="script",R=f("IE_PROTO"),$=function(){},X=function(M){return"<"+q+">"+M+"</"+q+">"},J=function(M){M.write(X("")),M.close();var P=M.parentWindow.Object;return M=null,P},H=function(){try{u=new ActiveXObject("htmlfile")}catch{}H=typeof document<"u"?document.domain&&u?J(u):function(){var P,U=D("iframe"),_="java"+q+":";return U.style.display="none",y.appendChild(U),U.src=String(_),(P=U.contentWindow.document).open(),P.write(X("document.F=Object")),P.close(),P.F}():J(u);for(var M=F.length;M--;)delete H[C][F[M]];return H()};g[R]=!0,S.exports=Object.create||function(M,P){var U;return M!==null?($[C]=o(M),U=new $,$[C]=null,U[R]=M):U=H(),P===void 0?U:v.f(U,P)}},(S,s,r)=>{var u=r(9),o=r(49),v=r(48),F=r(50),g=r(15),y=r(75);s.f=u&&!o?Object.defineProperties:function(D,f){F(D);for(var C,q=g(f),R=y(f),$=R.length,X=0;$>X;)v.f(D,C=R[X++],q[C]);return D}},(S,s,r)=>{var u=r(62),o=r(69);S.exports=Object.keys||function(v){return u(v,o)}},(S,s,r)=>{var u=r(27);S.exports=u("document","documentElement")},(S,s,r)=>{var u=r(7),o=r(17);S.exports=function(v,F){return o(u[v].prototype[F])}},(S,s,r)=>{r(79)},(S,s,r)=>{var u=r(80),o=r(67),v=r(65),F=u.aTypedArray;(0,u.exportTypedArrayMethod)("at",function(g){var y=F(this),D=o(y),f=v(g),C=f>=0?f:D+f;return C<0||C>=D?void 0:y[C]})},(S,s,r)=>{var u,o,v,F=r(81),g=r(9),y=r(7),D=r(24),f=r(23),C=r(42),q=r(82),R=r(35),$=r(47),X=r(51),J=r(84),H=r(28),M=r(85),P=r(87),U=r(37),_=r(44),E=r(55),Y=E.enforce,rt=E.get,Z=y.Int8Array,V=Z&&Z.prototype,Q=y.Uint8ClampedArray,ct=Q&&Q.prototype,vt=Z&&M(Z),pt=V&&M(V),Tt=Object.prototype,B=y.TypeError,j=U("toStringTag"),z=_("TYPED_ARRAY_TAG"),G="TypedArrayConstructor",N=F&&!!P&&q(y.opera)!=="Opera",W=!1,it={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},at={BigInt64Array:8,BigUint64Array:8},lt=function(ft){var mt=M(ft);if(f(mt)){var gt=rt(mt);return gt&&C(gt,G)?gt[G]:lt(mt)}},dt=function(ft){if(!f(ft))return!1;var mt=q(ft);return C(it,mt)||C(at,mt)};for(u in it)(v=(o=y[u])&&o.prototype)?Y(v)[G]=o:N=!1;for(u in at)(v=(o=y[u])&&o.prototype)&&(Y(v)[G]=o);if((!N||!D(vt)||vt===Function.prototype)&&(vt=function(){throw B("Incorrect invocation")},N))for(u in it)y[u]&&P(y[u],vt);if((!N||!pt||pt===Tt)&&(pt=vt.prototype,N))for(u in it)y[u]&&P(y[u].prototype,pt);if(N&&M(ct)!==pt&&P(ct,pt),g&&!C(pt,j)){W=!0,J(pt,j,{configurable:!0,get:function(){return f(this)?this[z]:void 0}});for(u in it)y[u]&&$(y[u],z,u)}S.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:W&&z,aTypedArray:function(ft){if(dt(ft))return ft;throw B("Target is not a typed array")},aTypedArrayConstructor:function(ft){if(D(ft)&&(!P||H(vt,ft)))return ft;throw B(R(ft)+" is not a typed array constructor")},exportTypedArrayMethod:function(ft,mt,gt,ot){if(g){if(gt)for(var kt in it){var Ft=y[kt];if(Ft&&C(Ft.prototype,ft))try{delete Ft.prototype[ft]}catch{try{Ft.prototype[ft]=mt}catch{}}}pt[ft]&&!gt||X(pt,ft,gt?mt:N&&V[ft]||mt,ot)}},exportTypedArrayStaticMethod:function(ft,mt,gt){var ot,kt;if(g){if(P){if(gt){for(ot in it)if((kt=y[ot])&&C(kt,ft))try{delete kt[ft]}catch{}}if(vt[ft]&&!gt)return;try{return X(vt,ft,gt?mt:N&&vt[ft]||mt)}catch{}}for(ot in it)!(kt=y[ot])||kt[ft]&&!gt||X(kt,ft,mt)}},getTypedArrayConstructor:lt,isView:function(ft){if(!f(ft))return!1;var mt=q(ft);return mt==="DataView"||C(it,mt)||C(at,mt)},isTypedArray:dt,TypedArray:vt,TypedArrayPrototype:pt}},S=>{S.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},(S,s,r)=>{var u=r(83),o=r(24),v=r(18),F=r(37)("toStringTag"),g=Object,y=v(function(){return arguments}())=="Arguments";S.exports=u?v:function(D){var f,C,q;return D===void 0?"Undefined":D===null?"Null":typeof(C=function(R,$){try{return R[$]}catch{}}(f=g(D),F))=="string"?C:y?v(f):(q=v(f))=="Object"&&o(f.callee)?"Arguments":q}},(S,s,r)=>{var u={};u[r(37)("toStringTag")]="z",S.exports=String(u)==="[object z]"},(S,s,r)=>{var u=r(52),o=r(48);S.exports=function(v,F,g){return g.get&&u(g.get,F,{getter:!0}),g.set&&u(g.set,F,{setter:!0}),o.f(v,F,g)}},(S,s,r)=>{var u=r(42),o=r(24),v=r(43),F=r(57),g=r(86),y=F("IE_PROTO"),D=Object,f=D.prototype;S.exports=g?D.getPrototypeOf:function(C){var q=v(C);if(u(q,y))return q[y];var R=q.constructor;return o(R)&&q instanceof R?R.prototype:q instanceof D?f:null}},(S,s,r)=>{var u=r(10);S.exports=!u(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},(S,s,r)=>{var u=r(88),o=r(50),v=r(89);S.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var F,g=!1,y={};try{(F=u(Object.prototype,"__proto__","set"))(y,[]),g=y instanceof Array}catch{}return function(D,f){return o(D),v(f),g?F(D,f):D.__proto__=f,D}}():void 0)},(S,s,r)=>{var u=r(17),o=r(34);S.exports=function(v,F,g){try{return u(o(Object.getOwnPropertyDescriptor(v,F)[g]))}catch{}}},(S,s,r)=>{var u=r(24),o=String,v=TypeError;S.exports=function(F){if(typeof F=="object"||u(F))return F;throw v("Can't set "+o(F)+" as a prototype")}},(S,s,r)=>{r(91),r(98),r(100),r(123),r(125);var u=r(137);S.exports=u.structuredClone},(S,s,r)=>{var u=r(15),o=r(72),v=r(92),F=r(55),g=r(48).f,y=r(93),D=r(97),f=r(39),C=r(9),q="Array Iterator",R=F.set,$=F.getterFor(q);S.exports=y(Array,"Array",function(J,H){R(this,{type:q,target:u(J),index:0,kind:H})},function(){var J=$(this),H=J.target,M=J.kind,P=J.index++;return!H||P>=H.length?(J.target=void 0,D(void 0,!0)):D(M=="keys"?P:M=="values"?H[P]:[P,H[P]],!1)},"values");var X=v.Arguments=v.Array;if(o("keys"),o("values"),o("entries"),!f&&C&&X.name!=="values")try{g(X,"name",{value:"values"})}catch{}},S=>{S.exports={}},(S,s,r)=>{var u=r(6),o=r(11),v=r(39),F=r(53),g=r(24),y=r(94),D=r(85),f=r(87),C=r(96),q=r(47),R=r(51),$=r(37),X=r(92),J=r(95),H=F.PROPER,M=F.CONFIGURABLE,P=J.IteratorPrototype,U=J.BUGGY_SAFARI_ITERATORS,_=$("iterator"),E="keys",Y="values",rt="entries",Z=function(){return this};S.exports=function(V,Q,ct,vt,pt,Tt,B){y(ct,Q,vt);var j,z,G,N=function(mt){if(mt===pt&&dt)return dt;if(!U&&mt in at)return at[mt];switch(mt){case E:return function(){return new ct(this,mt)};case Y:return function(){return new ct(this,mt)};case rt:return function(){return new ct(this,mt)}}return function(){return new ct(this)}},W=Q+" Iterator",it=!1,at=V.prototype,lt=at[_]||at["@@iterator"]||pt&&at[pt],dt=!U&&lt||N(pt),ft=Q=="Array"&&at.entries||lt;if(ft&&(j=D(ft.call(new V)))!==Object.prototype&&j.next&&(v||D(j)===P||(f?f(j,P):g(j[_])||R(j,_,Z)),C(j,W,!0,!0),v&&(X[W]=Z)),H&&pt==Y&&lt&&lt.name!==Y&&(!v&&M?q(at,"name",Y):(it=!0,dt=function(){return o(lt,this)})),pt)if(z={values:N(Y),keys:Tt?dt:N(E),entries:N(rt)},B)for(G in z)(U||it||!(G in at))&&R(at,G,z[G]);else u({target:Q,proto:!0,forced:U||it},z);return v&&!B||at[_]===dt||R(at,_,dt,{name:pt}),X[Q]=dt,z}},(S,s,r)=>{var u=r(95).IteratorPrototype,o=r(73),v=r(14),F=r(96),g=r(92),y=function(){return this};S.exports=function(D,f,C,q){var R=f+" Iterator";return D.prototype=o(u,{next:v(+!q,C)}),F(D,R,!1,!0),g[R]=y,D}},(S,s,r)=>{var u,o,v,F=r(10),g=r(24),y=r(23),D=r(73),f=r(85),C=r(51),q=r(37),R=r(39),$=q("iterator"),X=!1;[].keys&&("next"in(v=[].keys())?(o=f(f(v)))!==Object.prototype&&(u=o):X=!0),!y(u)||F(function(){var J={};return u[$].call(J)!==J})?u={}:R&&(u=D(u)),g(u[$])||C(u,$,function(){return this}),S.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:X}},(S,s,r)=>{var u=r(48).f,o=r(42),v=r(37)("toStringTag");S.exports=function(F,g,y){F&&!y&&(F=F.prototype),F&&!o(F,v)&&u(F,v,{configurable:!0,value:g})}},S=>{S.exports=function(s,r){return{value:s,done:r}}},(S,s,r)=>{var u=r(83),o=r(51),v=r(99);u||o(Object.prototype,"toString",v,{unsafe:!0})},(S,s,r)=>{var u=r(83),o=r(82);S.exports=u?{}.toString:function(){return"[object "+o(this)+"]"}},(S,s,r)=>{r(101)},(S,s,r)=>{r(102)("Map",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},r(120))},(S,s,r)=>{var u=r(6),o=r(7),v=r(17),F=r(71),g=r(51),y=r(103),D=r(110),f=r(117),C=r(24),q=r(20),R=r(23),$=r(10),X=r(118),J=r(96),H=r(119);S.exports=function(M,P,U){var _=M.indexOf("Map")!==-1,E=M.indexOf("Weak")!==-1,Y=_?"set":"add",rt=o[M],Z=rt&&rt.prototype,V=rt,Q={},ct=function(z){var G=v(Z[z]);g(Z,z,z=="add"?function(N){return G(this,N===0?0:N),this}:z=="delete"?function(N){return!(E&&!R(N))&&G(this,N===0?0:N)}:z=="get"?function(N){return E&&!R(N)?void 0:G(this,N===0?0:N)}:z=="has"?function(N){return!(E&&!R(N))&&G(this,N===0?0:N)}:function(N,W){return G(this,N===0?0:N,W),this})};if(F(M,!C(rt)||!(E||Z.forEach&&!$(function(){new rt().entries().next()}))))V=U.getConstructor(P,M,_,Y),y.enable();else if(F(M,!0)){var vt=new V,pt=vt[Y](E?{}:-0,1)!=vt,Tt=$(function(){vt.has(1)}),B=X(function(z){new rt(z)}),j=!E&&$(function(){for(var z=new rt,G=5;G--;)z[Y](G,G);return!z.has(-0)});B||((V=P(function(z,G){f(z,Z);var N=H(new rt,z,V);return q(G)||D(G,N[Y],{that:N,AS_ENTRIES:_}),N})).prototype=Z,Z.constructor=V),(Tt||j)&&(ct("delete"),ct("has"),_&&ct("get")),(j||pt)&&ct(Y),E&&Z.clear&&delete Z.clear}return Q[M]=V,u({global:!0,constructor:!0,forced:V!=rt},Q),J(V,M),E||U.setStrong(V,M,_),V}},(S,s,r)=>{var u=r(6),o=r(17),v=r(58),F=r(23),g=r(42),y=r(48).f,D=r(61),f=r(104),C=r(107),q=r(44),R=r(109),$=!1,X=q("meta"),J=0,H=function(P){y(P,X,{value:{objectID:"O"+J++,weakData:{}}})},M=S.exports={enable:function(){M.enable=function(){},$=!0;var P=D.f,U=o([].splice),_={};_[X]=1,P(_).length&&(D.f=function(E){for(var Y=P(E),rt=0,Z=Y.length;rt<Z;rt++)if(Y[rt]===X){U(Y,rt,1);break}return Y},u({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:f.f}))},fastKey:function(P,U){if(!F(P))return typeof P=="symbol"?P:(typeof P=="string"?"S":"P")+P;if(!g(P,X)){if(!C(P))return"F";if(!U)return"E";H(P)}return P[X].objectID},getWeakData:function(P,U){if(!g(P,X)){if(!C(P))return!0;if(!U)return!1;H(P)}return P[X].weakData},onFreeze:function(P){return R&&$&&C(P)&&!g(P,X)&&H(P),P}};v[X]=!0},(S,s,r)=>{var u=r(18),o=r(15),v=r(61).f,F=r(105),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];S.exports.f=function(y){return g&&u(y)=="Window"?function(D){try{return v(D)}catch{return F(g)}}(y):v(o(y))}},(S,s,r)=>{var u=r(64),o=r(67),v=r(106),F=Array,g=Math.max;S.exports=function(y,D,f){for(var C=o(y),q=u(D,C),R=u(f===void 0?C:f,C),$=F(g(R-q,0)),X=0;q<R;q++,X++)v($,X,y[q]);return $.length=X,$}},(S,s,r)=>{var u=r(21),o=r(48),v=r(14);S.exports=function(F,g,y){var D=u(g);D in F?o.f(F,D,v(0,y)):F[D]=y}},(S,s,r)=>{var u=r(10),o=r(23),v=r(18),F=r(108),g=Object.isExtensible,y=u(function(){});S.exports=y||F?function(D){return!!o(D)&&(!F||v(D)!="ArrayBuffer")&&(!g||g(D))}:g},(S,s,r)=>{var u=r(10);S.exports=u(function(){if(typeof ArrayBuffer=="function"){var o=new ArrayBuffer(8);Object.isExtensible(o)&&Object.defineProperty(o,"a",{value:8})}})},(S,s,r)=>{var u=r(10);S.exports=!u(function(){return Object.isExtensible(Object.preventExtensions({}))})},(S,s,r)=>{var u=r(111),o=r(11),v=r(50),F=r(35),g=r(113),y=r(67),D=r(28),f=r(114),C=r(115),q=r(116),R=TypeError,$=function(J,H){this.stopped=J,this.result=H},X=$.prototype;S.exports=function(J,H,M){var P,U,_,E,Y,rt,Z,V=M&&M.that,Q=!(!M||!M.AS_ENTRIES),ct=!(!M||!M.IS_RECORD),vt=!(!M||!M.IS_ITERATOR),pt=!(!M||!M.INTERRUPTED),Tt=u(H,V),B=function(z){return P&&q(P,"normal",z),new $(!0,z)},j=function(z){return Q?(v(z),pt?Tt(z[0],z[1],B):Tt(z[0],z[1])):pt?Tt(z,B):Tt(z)};if(ct)P=J.iterator;else if(vt)P=J;else{if(!(U=C(J)))throw R(F(J)+" is not iterable");if(g(U)){for(_=0,E=y(J);E>_;_++)if((Y=j(J[_]))&&D(X,Y))return Y;return new $(!1)}P=f(J,U)}for(rt=ct?J.next:P.next;!(Z=o(rt,P)).done;){try{Y=j(Z.value)}catch(z){q(P,"throw",z)}if(typeof Y=="object"&&Y&&D(X,Y))return Y}return new $(!1)}},(S,s,r)=>{var u=r(112),o=r(34),v=r(12),F=u(u.bind);S.exports=function(g,y){return o(g),y===void 0?g:v?F(g,y):function(){return g.apply(y,arguments)}}},(S,s,r)=>{var u=r(18),o=r(17);S.exports=function(v){if(u(v)==="Function")return o(v)}},(S,s,r)=>{var u=r(37),o=r(92),v=u("iterator"),F=Array.prototype;S.exports=function(g){return g!==void 0&&(o.Array===g||F[v]===g)}},(S,s,r)=>{var u=r(11),o=r(34),v=r(50),F=r(35),g=r(115),y=TypeError;S.exports=function(D,f){var C=arguments.length<2?g(D):f;if(o(C))return v(u(C,D));throw y(F(D)+" is not iterable")}},(S,s,r)=>{var u=r(82),o=r(33),v=r(20),F=r(92),g=r(37)("iterator");S.exports=function(y){if(!v(y))return o(y,g)||o(y,"@@iterator")||F[u(y)]}},(S,s,r)=>{var u=r(11),o=r(50),v=r(33);S.exports=function(F,g,y){var D,f;o(F);try{if(!(D=v(F,"return"))){if(g==="throw")throw y;return y}D=u(D,F)}catch(C){f=!0,D=C}if(g==="throw")throw y;if(f)throw D;return o(D),y}},(S,s,r)=>{var u=r(28),o=TypeError;S.exports=function(v,F){if(u(F,v))return v;throw o("Incorrect invocation")}},(S,s,r)=>{var u=r(37)("iterator"),o=!1;try{var v=0,F={next:function(){return{done:!!v++}},return:function(){o=!0}};F[u]=function(){return this},Array.from(F,function(){throw 2})}catch{}S.exports=function(g,y){if(!y&&!o)return!1;var D=!1;try{var f={};f[u]=function(){return{next:function(){return{done:D=!0}}}},g(f)}catch{}return D}},(S,s,r)=>{var u=r(24),o=r(23),v=r(87);S.exports=function(F,g,y){var D,f;return v&&u(D=g.constructor)&&D!==y&&o(f=D.prototype)&&f!==y.prototype&&v(F,f),F}},(S,s,r)=>{var u=r(73),o=r(84),v=r(121),F=r(111),g=r(117),y=r(20),D=r(110),f=r(93),C=r(97),q=r(122),R=r(9),$=r(103).fastKey,X=r(55),J=X.set,H=X.getterFor;S.exports={getConstructor:function(M,P,U,_){var E=M(function(Q,ct){g(Q,Y),J(Q,{type:P,index:u(null),first:void 0,last:void 0,size:0}),R||(Q.size=0),y(ct)||D(ct,Q[_],{that:Q,AS_ENTRIES:U})}),Y=E.prototype,rt=H(P),Z=function(Q,ct,vt){var pt,Tt,B=rt(Q),j=V(Q,ct);return j?j.value=vt:(B.last=j={index:Tt=$(ct,!0),key:ct,value:vt,previous:pt=B.last,next:void 0,removed:!1},B.first||(B.first=j),pt&&(pt.next=j),R?B.size++:Q.size++,Tt!=="F"&&(B.index[Tt]=j)),Q},V=function(Q,ct){var vt,pt=rt(Q),Tt=$(ct);if(Tt!=="F")return pt.index[Tt];for(vt=pt.first;vt;vt=vt.next)if(vt.key==ct)return vt};return v(Y,{clear:function(){for(var Q=rt(this),ct=Q.index,vt=Q.first;vt;)vt.removed=!0,vt.previous&&(vt.previous=vt.previous.next=void 0),delete ct[vt.index],vt=vt.next;Q.first=Q.last=void 0,R?Q.size=0:this.size=0},delete:function(Q){var ct=this,vt=rt(ct),pt=V(ct,Q);if(pt){var Tt=pt.next,B=pt.previous;delete vt.index[pt.index],pt.removed=!0,B&&(B.next=Tt),Tt&&(Tt.previous=B),vt.first==pt&&(vt.first=Tt),vt.last==pt&&(vt.last=B),R?vt.size--:ct.size--}return!!pt},forEach:function(Q){for(var ct,vt=rt(this),pt=F(Q,arguments.length>1?arguments[1]:void 0);ct=ct?ct.next:vt.first;)for(pt(ct.value,ct.key,this);ct&&ct.removed;)ct=ct.previous},has:function(Q){return!!V(this,Q)}}),v(Y,U?{get:function(Q){var ct=V(this,Q);return ct&&ct.value},set:function(Q,ct){return Z(this,Q===0?0:Q,ct)}}:{add:function(Q){return Z(this,Q=Q===0?0:Q,Q)}}),R&&o(Y,"size",{configurable:!0,get:function(){return rt(this).size}}),E},setStrong:function(M,P,U){var _=P+" Iterator",E=H(P),Y=H(_);f(M,P,function(rt,Z){J(this,{type:_,target:rt,state:E(rt),kind:Z,last:void 0})},function(){for(var rt=Y(this),Z=rt.kind,V=rt.last;V&&V.removed;)V=V.previous;return!rt.target||!(rt.last=V=V?V.next:rt.state.first)?(rt.target=void 0,C(void 0,!0)):C(Z=="keys"?V.key:Z=="values"?V.value:[V.key,V.value],!1)},U?"entries":"values",!U,!0),q(P)}}},(S,s,r)=>{var u=r(51);S.exports=function(o,v,F){for(var g in v)u(o,g,v[g],F);return o}},(S,s,r)=>{var u=r(27),o=r(84),v=r(37),F=r(9),g=v("species");S.exports=function(y){var D=u(y);F&&D&&!D[g]&&o(D,g,{configurable:!0,get:function(){return this}})}},(S,s,r)=>{r(124)},(S,s,r)=>{r(102)("Set",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},r(120))},(S,s,r)=>{var u,o=r(39),v=r(6),F=r(7),g=r(27),y=r(17),D=r(10),f=r(44),C=r(24),q=r(126),R=r(20),$=r(23),X=r(26),J=r(110),H=r(50),M=r(82),P=r(42),U=r(106),_=r(47),E=r(67),Y=r(127),rt=r(128),Z=r(130),V=r(131),Q=r(132),ct=r(133),vt=F.Object,pt=F.Array,Tt=F.Date,B=F.Error,j=F.EvalError,z=F.RangeError,G=F.ReferenceError,N=F.SyntaxError,W=F.TypeError,it=F.URIError,at=F.PerformanceMark,lt=F.WebAssembly,dt=lt&&lt.CompileError||B,ft=lt&&lt.LinkError||B,mt=lt&&lt.RuntimeError||B,gt=g("DOMException"),ot=Z.Map,kt=Z.has,Ft=Z.get,At=Z.set,O=V.Set,K=V.add,tt=g("Object","keys"),st=y([].push),ht=y((!0).valueOf),_t=y(1 .valueOf),xt=y("".valueOf),wt=y(Tt.prototype.getTime),Lt=f("structuredClone"),Pt="DataCloneError",Rt="Transferring",Et=function(St){return!D(function(){var Xt=new F.Set([7]),Kt=St(Xt),Yt=St(vt(7));return Kt==Xt||!Kt.has(7)||typeof Yt!="object"||Yt!=7})&&St},Ot=function(St,Xt){return!D(function(){var Kt=new Xt,Yt=St({a:Kt,b:Kt});return!(Yt&&Yt.a===Yt.b&&Yt.a instanceof Xt&&Yt.a.stack===Kt.stack)})},Nt=F.structuredClone,zt=o||!Ot(Nt,B)||!Ot(Nt,gt)||(u=Nt,!!D(function(){var St=u(new F.AggregateError([1],Lt,{cause:3}));return St.name!="AggregateError"||St.errors[0]!=1||St.message!=Lt||St.cause!=3})),bt=!Nt&&Et(function(St){return new at(Lt,{detail:St}).detail}),Mt=Et(Nt)||bt,Gt=function(St){throw new gt("Uncloneable type: "+St,Pt)},qt=function(St,Xt){throw new gt((Xt||"Cloning")+" of "+St+" cannot be properly polyfilled in this engine",Pt)},ie=function(St,Xt){return Mt||qt(Xt),Mt(St)},$t=function(St,Xt){if(X(St)&&Gt("Symbol"),!$(St))return St;if(Xt){if(kt(Xt,St))return Ft(Xt,St)}else Xt=new ot;var Kt,Yt,Ut,fe,te,Jt,oe,yt,Ct,jt,Bt,Dt=M(St),Wt=!1;switch(Dt){case"Array":Ut=pt(E(St)),Wt=!0;break;case"Object":Ut={},Wt=!0;break;case"Map":Ut=new ot,Wt=!0;break;case"Set":Ut=new O,Wt=!0;break;case"RegExp":Ut=new RegExp(St.source,rt(St));break;case"Error":switch(Yt=St.name){case"AggregateError":Ut=g("AggregateError")([]);break;case"EvalError":Ut=j();break;case"RangeError":Ut=z();break;case"ReferenceError":Ut=G();break;case"SyntaxError":Ut=N();break;case"TypeError":Ut=W();break;case"URIError":Ut=it();break;case"CompileError":Ut=dt();break;case"LinkError":Ut=ft();break;case"RuntimeError":Ut=mt();break;default:Ut=B()}Wt=!0;break;case"DOMException":Ut=new gt(St.message,St.name),Wt=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":Kt=F[Dt],$(Kt)||qt(Dt),Ut=new Kt($t(St.buffer,Xt),St.byteOffset,Dt==="DataView"?St.byteLength:St.length);break;case"DOMQuad":try{Ut=new DOMQuad($t(St.p1,Xt),$t(St.p2,Xt),$t(St.p3,Xt),$t(St.p4,Xt))}catch{Ut=ie(St,Dt)}break;case"File":if(Mt)try{Ut=Mt(St),M(Ut)!==Dt&&(Ut=void 0)}catch{}if(!Ut)try{Ut=new File([St],St.name,St)}catch{}Ut||qt(Dt);break;case"FileList":if(fe=function(){var Vt;try{Vt=new F.DataTransfer}catch{try{Vt=new F.ClipboardEvent("").clipboardData}catch{}}return Vt&&Vt.items&&Vt.files?Vt:null}()){for(te=0,Jt=E(St);te<Jt;te++)fe.items.add($t(St[te],Xt));Ut=fe.files}else Ut=ie(St,Dt);break;case"ImageData":try{Ut=new ImageData($t(St.data,Xt),St.width,St.height,{colorSpace:St.colorSpace})}catch{Ut=ie(St,Dt)}break;default:if(Mt)Ut=Mt(St);else switch(Dt){case"BigInt":Ut=vt(St.valueOf());break;case"Boolean":Ut=vt(ht(St));break;case"Number":Ut=vt(_t(St));break;case"String":Ut=vt(xt(St));break;case"Date":Ut=new Tt(wt(St));break;case"ArrayBuffer":(Kt=F.DataView)||typeof St.slice=="function"||qt(Dt);try{if(typeof St.slice!="function"||St.resizable)for(Jt=St.byteLength,Bt=("maxByteLength"in St)?{maxByteLength:St.maxByteLength}:void 0,Ut=new ArrayBuffer(Jt,Bt),Ct=new Kt(St),jt=new Kt(Ut),te=0;te<Jt;te++)jt.setUint8(te,Ct.getUint8(te));else Ut=St.slice(0)}catch{throw new gt("ArrayBuffer is detached",Pt)}break;case"SharedArrayBuffer":Ut=St;break;case"Blob":try{Ut=St.slice(0,St.size,St.type)}catch{qt(Dt)}break;case"DOMPoint":case"DOMPointReadOnly":Kt=F[Dt];try{Ut=Kt.fromPoint?Kt.fromPoint(St):new Kt(St.x,St.y,St.z,St.w)}catch{qt(Dt)}break;case"DOMRect":case"DOMRectReadOnly":Kt=F[Dt];try{Ut=Kt.fromRect?Kt.fromRect(St):new Kt(St.x,St.y,St.width,St.height)}catch{qt(Dt)}break;case"DOMMatrix":case"DOMMatrixReadOnly":Kt=F[Dt];try{Ut=Kt.fromMatrix?Kt.fromMatrix(St):new Kt(St)}catch{qt(Dt)}break;case"AudioData":case"VideoFrame":C(St.clone)||qt(Dt);try{Ut=St.clone()}catch{Gt(Dt)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":qt(Dt);default:Gt(Dt)}}if(At(Xt,St,Ut),Wt)switch(Dt){case"Array":case"Object":for(oe=tt(St),te=0,Jt=E(oe);te<Jt;te++)yt=oe[te],U(Ut,yt,$t(St[yt],Xt));break;case"Map":St.forEach(function(Vt,Ht){At(Ut,$t(Ht,Xt),$t(Vt,Xt))});break;case"Set":St.forEach(function(Vt){K(Ut,$t(Vt,Xt))});break;case"Error":_(Ut,"message",$t(St.message,Xt)),P(St,"cause")&&_(Ut,"cause",$t(St.cause,Xt)),Yt=="AggregateError"&&(Ut.errors=$t(St.errors,Xt));case"DOMException":Q&&_(Ut,"stack",$t(St.stack,Xt))}return Ut};v({global:!0,enumerable:!0,sham:!ct,forced:zt},{structuredClone:function(St){var Xt,Kt=Y(arguments.length,1)>1&&!R(arguments[1])?H(arguments[1]):void 0,Yt=Kt?Kt.transfer:void 0;return Yt!==void 0&&function(Ut,fe){if(!$(Ut))throw W("Transfer option cannot be converted to a sequence");var te=[];J(Ut,function(Vt){st(te,H(Vt))});var Jt,oe,yt,Ct,jt,Bt,Dt=0,Wt=E(te);if(ct)for(Ct=Nt(te,{transfer:te});Dt<Wt;)At(fe,te[Dt],Ct[Dt++]);else for(;Dt<Wt;){if(Jt=te[Dt++],kt(fe,Jt))throw new gt("Duplicate transferable",Pt);switch(oe=M(Jt)){case"ImageBitmap":yt=F.OffscreenCanvas,q(yt)||qt(oe,Rt);try{(Bt=new yt(Jt.width,Jt.height)).getContext("bitmaprenderer").transferFromImageBitmap(Jt),jt=Bt.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":C(Jt.clone)&&C(Jt.close)||qt(oe,Rt);try{jt=Jt.clone(),Jt.close()}catch{}break;case"ArrayBuffer":C(Jt.transfer)||qt(oe,Rt),jt=Jt.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":qt(oe,Rt)}if(jt===void 0)throw new gt("This object cannot be transferred: "+oe,Pt);At(fe,Jt,jt)}}(Yt,Xt=new ot),$t(St,Xt)}})},(S,s,r)=>{var u=r(17),o=r(10),v=r(24),F=r(82),g=r(27),y=r(54),D=function(){},f=[],C=g("Reflect","construct"),q=/^\s*(?:class|function)\b/,R=u(q.exec),$=!q.exec(D),X=function(H){if(!v(H))return!1;try{return C(D,f,H),!0}catch{return!1}},J=function(H){if(!v(H))return!1;switch(F(H)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return $||!!R(q,y(H))}catch{return!0}};J.sham=!0,S.exports=!C||o(function(){var H;return X(X.call)||!X(Object)||!X(function(){H=!0})||H})?J:X},S=>{var s=TypeError;S.exports=function(r,u){if(r<u)throw s("Not enough arguments");return r}},(S,s,r)=>{var u=r(11),o=r(42),v=r(28),F=r(129),g=RegExp.prototype;S.exports=function(y){var D=y.flags;return D!==void 0||"flags"in g||o(y,"flags")||!v(g,y)?D:u(F,y)}},(S,s,r)=>{var u=r(50);S.exports=function(){var o=u(this),v="";return o.hasIndices&&(v+="d"),o.global&&(v+="g"),o.ignoreCase&&(v+="i"),o.multiline&&(v+="m"),o.dotAll&&(v+="s"),o.unicode&&(v+="u"),o.unicodeSets&&(v+="v"),o.sticky&&(v+="y"),v}},(S,s,r)=>{var u=r(17),o=Map.prototype;S.exports={Map,set:u(o.set),get:u(o.get),has:u(o.has),remove:u(o.delete),proto:o}},(S,s,r)=>{var u=r(17),o=Set.prototype;S.exports={Set,add:u(o.add),has:u(o.has),remove:u(o.delete),proto:o}},(S,s,r)=>{var u=r(10),o=r(14);S.exports=!u(function(){var v=Error("a");return"stack"in v?(Object.defineProperty(v,"stack",o(1,7)),v.stack!==7):!0})},(S,s,r)=>{var u=r(7),o=r(10),v=r(31),F=r(134),g=r(135),y=r(136),D=u.structuredClone;S.exports=!!D&&!o(function(){if(g&&v>92||y&&v>94||F&&v>97)return!1;var f=new ArrayBuffer(8),C=D(f,{transfer:[f]});return f.byteLength!=0||C.byteLength!=8})},(S,s,r)=>{var u=r(135),o=r(136);S.exports=!u&&!o&&typeof window=="object"&&typeof document=="object"},S=>{S.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(S,s,r)=>{var u=r(18);S.exports=typeof process<"u"&&u(process)=="process"},(S,s,r)=>{var u=r(7);S.exports=u},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var k,t,e,a,re,w,pe,p,h,l,c,b,L,m,Ae,x,I,_e,i,A;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(139),_display_utils=__w_pdfjs_require__(142),_font_loader=__w_pdfjs_require__(145),_canvas=__w_pdfjs_require__(146),_worker_options=__w_pdfjs_require__(149),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(150),_metadata=__w_pdfjs_require__(151),_optional_content_config=__w_pdfjs_require__(152),_transport_stream=__w_pdfjs_require__(153),_xfa_text=__w_pdfjs_require__(154);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:S,NodeCMapReaderFactory:s,NodeFilterFactory:r,NodeStandardFontDataFactory:u}=__w_pdfjs_require__(155);exports.DefaultCanvasFactory=DefaultCanvasFactory=S,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultFilterFactory=DefaultFilterFactory=r,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=u}if(_is_node.isNodeJS){const{PDFNodeStream:S}=__w_pdfjs_require__(156);createPDFNetworkStream=s=>new S(s)}else{const{PDFNetworkStream:S}=__w_pdfjs_require__(159),{PDFFetchStream:s}=__w_pdfjs_require__(160);createPDFNetworkStream=r=>(0,_display_utils.isValidFetchUrl)(r.url)?new s(r):new S(r)}function getDocument(S){if(typeof S=="string"||S instanceof URL?S={url:S}:(0,_util.isArrayBuffer)(S)&&(S={data:S}),typeof S!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!S.url&&!S.data&&!S.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const s=new PDFDocumentLoadingTask,{docId:r}=s,u=S.url?getUrlProp(S.url):null,o=S.data?getDataProp(S.data):null,v=S.httpHeaders||null,F=S.withCredentials===!0,g=S.password??null,y=S.range instanceof PDFDataRangeTransport?S.range:null,D=Number.isInteger(S.rangeChunkSize)&&S.rangeChunkSize>0?S.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let f=S.worker instanceof PDFWorker?S.worker:null;const C=S.verbosity,q=typeof S.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(S.docBaseUrl)?null:S.docBaseUrl,R=typeof S.cMapUrl=="string"?S.cMapUrl:null,$=S.cMapPacked!==!1,X=S.CMapReaderFactory||DefaultCMapReaderFactory,J=typeof S.standardFontDataUrl=="string"?S.standardFontDataUrl:null,H=S.StandardFontDataFactory||DefaultStandardFontDataFactory,M=S.stopAtErrors!==!0,P=Number.isInteger(S.maxImageSize)&&S.maxImageSize>-1?S.maxImageSize:-1,U=S.isEvalSupported!==!1,_=typeof S.isOffscreenCanvasSupported=="boolean"?S.isOffscreenCanvasSupported:!_is_node.isNodeJS,E=Number.isInteger(S.canvasMaxAreaInBytes)?S.canvasMaxAreaInBytes:-1,Y=typeof S.disableFontFace=="boolean"?S.disableFontFace:_is_node.isNodeJS,rt=S.fontExtraProperties===!0,Z=S.enableXfa===!0,V=S.ownerDocument||globalThis.document,Q=S.disableRange===!0,ct=S.disableStream===!0,vt=S.disableAutoFetch===!0,pt=S.pdfBug===!0,Tt=y?y.length:S.length??NaN,B=typeof S.useSystemFonts=="boolean"?S.useSystemFonts:!_is_node.isNodeJS&&!Y,j=typeof S.useWorkerFetch=="boolean"?S.useWorkerFetch:X===_display_utils.DOMCMapReaderFactory&&H===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(R,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(J,document.baseURI),z=S.canvasFactory||new DefaultCanvasFactory({ownerDocument:V}),G=S.filterFactory||new DefaultFilterFactory({docId:r,ownerDocument:V});(0,_util.setVerbosityLevel)(C);const N={canvasFactory:z,filterFactory:G};if(j||(N.cMapReaderFactory=new X({baseUrl:R,isCompressed:$}),N.standardFontDataFactory=new H({baseUrl:J})),!f){const at={verbosity:C,port:_worker_options.GlobalWorkerOptions.workerPort};f=at.port?PDFWorker.fromPort(at):new PDFWorker(at),s._worker=f}const W={docId:r,apiVersion:"3.7.107",data:o,password:g,disableAutoFetch:vt,rangeChunkSize:D,length:Tt,docBaseUrl:q,enableXfa:Z,evaluatorOptions:{maxImageSize:P,disableFontFace:Y,ignoreErrors:M,isEvalSupported:U,isOffscreenCanvasSupported:_,canvasMaxAreaInBytes:E,fontExtraProperties:rt,useSystemFonts:B,cMapUrl:j?R:null,standardFontDataUrl:j?J:null}},it={ignoreErrors:M,isEvalSupported:U,disableFontFace:Y,fontExtraProperties:rt,enableXfa:Z,ownerDocument:V,disableAutoFetch:vt,pdfBug:pt,styleElement:null};return f.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const at=_fetchDocument(f,W),lt=new Promise(function(dt){let ft;y?ft=new _transport_stream.PDFDataTransportStream({length:Tt,initialData:y.initialData,progressiveDone:y.progressiveDone,contentDispositionFilename:y.contentDispositionFilename,disableRange:Q,disableStream:ct},y):o||(ft=createPDFNetworkStream({url:u,length:Tt,httpHeaders:v,withCredentials:F,rangeChunkSize:D,disableRange:Q,disableStream:ct})),dt(ft)});return Promise.all([at,lt]).then(function(dt){let[ft,mt]=dt;if(s.destroyed)throw new Error("Loading aborted");const gt=new _message_handler.MessageHandler(r,ft,f.port),ot=new WorkerTransport(gt,s,mt,it,N);s._transport=ot,gt.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(S,s){if(S.destroyed)throw new Error("Worker was destroyed");const r=await S.messageHandler.sendWithPromise("GetDocRequest",s,s.data?[s.data.buffer]:null);if(S.destroyed)throw new Error("Worker was destroyed");return r}function getUrlProp(S){if(S instanceof URL)return S.href;try{return new URL(S,window.location).href}catch{if(_is_node.isNodeJS&&typeof S=="string")return S}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(S){if(_is_node.isNodeJS&&typeof Buffer<"u"&&S instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(S);if(S instanceof Uint8Array&&S.byteLength===S.buffer.byteLength)return S;if(typeof S=="string")return(0,_util.stringToBytes)(S);if(typeof S=="object"&&!isNaN(S==null?void 0:S.length)||(0,_util.isArrayBuffer)(S))return new Uint8Array(S);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const d=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d"+ue(d,k)._++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var S;this.destroyed=!0,await((S=this._transport)===null||S===void 0?void 0:S.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=d;k=new WeakMap,et(PDFDocumentLoadingTask,k,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,r){let u=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=s,this.initialData=r,this.progressiveDone=u,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,r){for(const u of this._rangeListeners)u(s,r)}onDataProgress(s,r){this._readyCapability.promise.then(()=>{for(const u of this._progressListeners)u(s,r)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const r of this._progressiveReadListeners)r(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,r){this._pdfInfo=s,this._transport=r}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let s=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,r,u){et(this,a),et(this,w),et(this,t,null),et(this,e,!1);let o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];this._pageIndex=s,this._pageInfo=r,this._transport=u,this._stats=o?new _display_utils.StatTimer:null,this._pdfBug=o,this.commonObjs=u.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:s,rotation:r=this.rotate,offsetX:u=0,offsetY:o=0,dontFlip:v=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:r,offsetX:u,offsetY:o,dontFlip:v})}getAnnotations(){let{intent:s="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._transport.getRenderingIntent(s);return this._transport.getAnnotations(this._pageIndex,r.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var s;return((s=this._transport._htmlForXfa)===null||s===void 0?void 0:s.children[this._pageIndex])||null}render(s){var r,u;let{canvasContext:o,viewport:v,intent:F="display",annotationMode:g=_util.AnnotationMode.ENABLE,transform:y=null,background:D=null,optionalContentConfigPromise:f=null,annotationCanvasMap:C=null,pageColors:q=null,printAnnotationStorage:R=null}=s;if((r=arguments[0])!==null&&r!==void 0&&r.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(u=this._stats)===null||u===void 0||u.time("Overall");const $=this._transport.getRenderingIntent(F,g,R);ut(this,e,!1),nt(this,w,pe).call(this),f||(f=this._transport.getOptionalContentConfig());let X=this._intentStates.get($.cacheKey);X||(X=Object.create(null),this._intentStates.set($.cacheKey,X)),X.streamReaderCancelTimeout&&(clearTimeout(X.streamReaderCancelTimeout),X.streamReaderCancelTimeout=null);const J=!!($.renderingIntent&_util.RenderingIntentFlag.PRINT);if(!X.displayReadyCapability){var H;X.displayReadyCapability=new _util.PromiseCapability,X.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(H=this._stats)===null||H===void 0||H.time("Page Request"),this._pumpOperatorList($)}const M=_=>{var E,Y;X.renderTasks.delete(P),(this._maybeCleanupAfterRender||J)&&ut(this,e,!0),nt(this,a,re).call(this,!J),_?(P.capability.reject(_),this._abortOperatorList({intentState:X,reason:_ instanceof Error?_:new Error(_)})):P.capability.resolve(),(E=this._stats)===null||E===void 0||E.timeEnd("Rendering"),(Y=this._stats)===null||Y===void 0||Y.timeEnd("Overall")},P=new InternalRenderTask({callback:M,params:{canvasContext:o,viewport:v,transform:y,background:D},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:C,operatorList:X.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!J,pdfBug:this._pdfBug,pageColors:q});(X.renderTasks||(X.renderTasks=new Set)).add(P);const U=P.task;return Promise.all([X.displayReadyCapability.promise,f]).then(_=>{var E;let[Y,rt]=_;T(this,e)?M():((E=this._stats)===null||E===void 0||E.time("Rendering"),P.initializeGraphics({transparency:Y,optionalContentConfig:rt}),P.operatorListChanged())}).catch(M),U}getOperatorList(){let{intent:s="display",annotationMode:r=_util.AnnotationMode.ENABLE,printAnnotationStorage:u=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const o=this._transport.getRenderingIntent(s,r,u,!0);let v,F=this._intentStates.get(o.cacheKey);if(F||(F=Object.create(null),this._intentStates.set(o.cacheKey,F)),!F.opListReadCapability){var g;v=Object.create(null),v.operatorListChanged=function(){F.operatorList.lastChunk&&(F.opListReadCapability.resolve(F.operatorList),F.renderTasks.delete(v))},F.opListReadCapability=new _util.PromiseCapability,(F.renderTasks||(F.renderTasks=new Set)).add(v),F.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(g=this._stats)===null||g===void 0||g.time("Page Request"),this._pumpOperatorList(o)}return F.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:s=!1,disableNormalization:r=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:s===!0,disableNormalization:r===!0},{highWaterMark:100,size:u=>u.items.length})}getTextContent(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(u=>_xfa_text.XfaText.textContent(u));const r=this.streamTextContent(s);return new Promise(function(u,o){const v=r.getReader(),F={items:[],styles:Object.create(null)};(function g(){v.read().then(function(y){let{value:D,done:f}=y;f?u(F):(Object.assign(F.styles,D.styles),F.items.push(...D.items),g())},o)})()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const s=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const u of r.renderTasks)s.push(u.completed),u.cancel();return this.objs.clear(),ut(this,e,!1),nt(this,w,pe).call(this),Promise.all(s)}cleanup(){let s=arguments.length>0&&arguments[0]!==void 0&&arguments[0];ut(this,e,!0);const r=nt(this,a,re).call(this,!1);return s&&r&&this._stats&&(this._stats=new _display_utils.StatTimer),r}_startRenderPage(s,r){var u,o;const v=this._intentStates.get(r);v&&((u=this._stats)===null||u===void 0||u.timeEnd("Page Request"),(o=v.displayReadyCapability)===null||o===void 0||o.resolve(s))}_renderPageChunk(s,r){for(let u=0,o=s.length;u<o;u++)r.operatorList.fnArray.push(s.fnArray[u]),r.operatorList.argsArray.push(s.argsArray[u]);r.operatorList.lastChunk=s.lastChunk,r.operatorList.separateAnnots=s.separateAnnots;for(const u of r.renderTasks)u.operatorListChanged();s.lastChunk&&nt(this,a,re).call(this,!0)}_pumpOperatorList(s){let{renderingIntent:r,cacheKey:u,annotationStorageMap:o}=s;const v=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:u,annotationStorage:o}).getReader(),F=this._intentStates.get(u);F.streamReader=v;const g=()=>{v.read().then(y=>{let{value:D,done:f}=y;f?F.streamReader=null:this._transport.destroyed||(this._renderPageChunk(D,F),g())},y=>{if(F.streamReader=null,!this._transport.destroyed){if(F.operatorList){F.operatorList.lastChunk=!0;for(const D of F.renderTasks)D.operatorListChanged();nt(this,a,re).call(this,!0)}if(F.displayReadyCapability)F.displayReadyCapability.reject(y);else{if(!F.opListReadCapability)throw y;F.opListReadCapability.reject(y)}}})};g()}_abortOperatorList(s){let{intentState:r,reason:u,force:o=!1}=s;if(r.streamReader){if(r.streamReaderCancelTimeout&&(clearTimeout(r.streamReaderCancelTimeout),r.streamReaderCancelTimeout=null),!o){if(r.renderTasks.size>0)return;if(u instanceof _display_utils.RenderingCancelledException){let v=RENDERING_CANCELLED_TIMEOUT;u.extraDelay>0&&u.extraDelay<1e3&&(v+=u.extraDelay),r.streamReaderCancelTimeout=setTimeout(()=>{r.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:r,reason:u,force:!0})},v);return}}if(r.streamReader.cancel(new _util.AbortException(u.message)).catch(()=>{}),r.streamReader=null,!this._transport.destroyed){for(const[v,F]of this._intentStates)if(F===r){this._intentStates.delete(v);break}this.cleanup()}}}get stats(){return this._stats}}t=new WeakMap,e=new WeakMap,a=new WeakSet,re=function(){let S=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(nt(this,w,pe).call(this),!T(this,e))return!1;if(S)return ut(this,t,setTimeout(()=>{ut(this,t,null),nt(this,a,re).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:s,operatorList:r}of this._intentStates.values())if(s.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ut(this,e,!1),!0},w=new WeakSet,pe=function(){T(this,t)&&(clearTimeout(T(this,t)),ut(this,t,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){et(this,p,new Set),et(this,h,Promise.resolve())}postMessage(s,r){const u={data:structuredClone(s,null)};T(this,h).then(()=>{for(const o of T(this,p))o.call(this,u)})}addEventListener(s,r){T(this,p).add(r)}removeEventListener(s,r){T(this,p).delete(r)}terminate(){T(this,p).clear()}}p=new WeakMap,h=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){var _document,_document$currentScri;const S=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;S&&(PDFWorkerUtil.fallbackWorkerSrc=S.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(S,s){let r;try{if(r=new URL(S),!r.origin||r.origin==="null")return!1}catch{return!1}const u=new URL(s,r);return r.origin===u.origin},PDFWorkerUtil.createCDNWrapper=function(S){const s=`importScripts("${S}");`;return URL.createObjectURL(new Blob([s]))};const _PDFWorker=class{constructor(){let{name:S=null,port:s=null,verbosity:r=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(s&&T(_PDFWorker,l).has(s))throw new Error("Cannot use more than one PDFWorker per port.");this.name=S,this.destroyed=!1,this.verbosity=r,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,s?(T(_PDFWorker,l).set(s,this),this._initializeFromPort(s)):this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(S){this._port=S,this._messageHandler=new _message_handler.MessageHandler("main","worker",S),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:S}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,S)||(S=PDFWorkerUtil.createCDNWrapper(new URL(S,window.location).href));const s=new Worker(S),r=new _message_handler.MessageHandler("main","worker",s),u=()=>{s.removeEventListener("error",o),r.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=()=>{this._webWorker||u()};s.addEventListener("error",o),r.on("test",F=>{s.removeEventListener("error",o),this.destroyed?u():F?(this._messageHandler=r,this._port=s,this._webWorker=s,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),r.destroy(),s.terminate())}),r.on("ready",F=>{if(s.removeEventListener("error",o),this.destroyed)u();else try{v()}catch{this._setupFakeWorker()}});const v=()=>{const F=new Uint8Array;r.send("test",F,[F.buffer])};v();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(S=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const r="fake"+PDFWorkerUtil.fakeWorkerId++,u=new _message_handler.MessageHandler(r+"_worker",r,s);S.setup(u,s);const o=new _message_handler.MessageHandler(r,r+"_worker",s);this._messageHandler=o,this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})}).catch(S=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${S.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),T(_PDFWorker,l).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(S){if(S==null||!S.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return T(this,l).has(S.port)?T(this,l).get(S.port):new _PDFWorker(S)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var S;return((S=globalThis.pdfjsWorker)===null||S===void 0?void 0:S.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;l=new WeakMap,et(PDFWorker,l,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(s,r,u,o,v){et(this,m),et(this,c,new Map),et(this,b,new Map),et(this,L,new Map),this.messageHandler=s,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this._params=o,this.canvasFactory=v.canvasFactory,this.filterFactory=v.filterFactory,this.cMapReaderFactory=v.cMapReaderFactory,this.standardFontDataFactory=v.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=u,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0&&arguments[3],v=_util.RenderingIntentFlag.DISPLAY,F=null;switch(s){case"any":v=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":v=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(r){case _util.AnnotationMode.DISABLE:v+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:v+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:v+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,F=(v&_util.RenderingIntentFlag.PRINT&&u instanceof _annotation_storage.PrintAnnotationStorage?u:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${r}`)}return o&&(v+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:v,cacheKey:`${v}_${_annotation_storage.AnnotationStorage.getHash(F)}`,annotationStorageMap:F}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const u of T(this,b).values())s.push(u._destroy());T(this,b).clear(),T(this,L).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return s.push(r),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),T(this,c).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:r}=this;s.on("GetReader",(u,o)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=v=>{this._lastProgress={loaded:v.loaded,total:v.total}},o.onPull=()=>{this._fullReader.read().then(function(v){let{value:F,done:g}=v;g?o.close():((0,_util.assert)(F instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(F),1,[F]))}).catch(v=>{o.error(v)})},o.onCancel=v=>{this._fullReader.cancel(v),o.ready.catch(F=>{if(!this.destroyed)throw F})}}),s.on("ReaderHeadersReady",u=>{const o=new _util.PromiseCapability,v=this._fullReader;return v.headersReady.then(()=>{if(!v.isStreamingSupported||!v.isRangeSupported){if(this._lastProgress){var F;(F=r.onProgress)===null||F===void 0||F.call(r,this._lastProgress)}v.onProgress=g=>{var y;(y=r.onProgress)===null||y===void 0||y.call(r,{loaded:g.loaded,total:g.total})}}o.resolve({isStreamingSupported:v.isStreamingSupported,isRangeSupported:v.isRangeSupported,contentLength:v.contentLength})},o.reject),o.promise}),s.on("GetRangeReader",(u,o)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const v=this._networkStream.getRangeReader(u.begin,u.end);v?(o.onPull=()=>{v.read().then(function(F){let{value:g,done:y}=F;y?o.close():((0,_util.assert)(g instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(g),1,[g]))}).catch(F=>{o.error(F)})},o.onCancel=F=>{v.cancel(F),o.ready.catch(g=>{if(!this.destroyed)throw g})}):o.close()}),s.on("GetDoc",u=>{let{pdfInfo:o}=u;this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,r._capability.resolve(new PDFDocumentProxy(o,this))}),s.on("DocException",function(u){let o;switch(u.name){case"PasswordException":o=new _util.PasswordException(u.message,u.code);break;case"InvalidPDFException":o=new _util.InvalidPDFException(u.message);break;case"MissingPDFException":o=new _util.MissingPDFException(u.message);break;case"UnexpectedResponseException":o=new _util.UnexpectedResponseException(u.message,u.status);break;case"UnknownErrorException":o=new _util.UnknownErrorException(u.message,u.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}r._capability.reject(o)}),s.on("PasswordRequest",u=>{if(this._passwordCapability=new _util.PromiseCapability,r.onPassword){const o=v=>{v instanceof Error?this._passwordCapability.reject(v):this._passwordCapability.resolve({password:v})};try{r.onPassword(o,u.code)}catch(v){this._passwordCapability.reject(v)}}else this._passwordCapability.reject(new _util.PasswordException(u.message,u.code));return this._passwordCapability.promise}),s.on("DataLoaded",u=>{var o;(o=r.onProgress)===null||o===void 0||o.call(r,{loaded:u.length,total:u.length}),this.downloadInfoCapability.resolve(u)}),s.on("StartRenderPage",u=>{this.destroyed||T(this,b).get(u.pageIndex)._startRenderPage(u.transparency,u.cacheKey)}),s.on("commonobj",u=>{var o;let[v,F,g]=u;if(!this.destroyed&&!this.commonObjs.has(v))switch(F){case"Font":const y=this._params;if("error"in g){const C=g.error;(0,_util.warn)(`Error during font loading: ${C}`),this.commonObjs.resolve(v,C);break}const D=y.pdfBug&&(o=globalThis.FontInspector)!==null&&o!==void 0&&o.enabled?(C,q)=>globalThis.FontInspector.fontAdded(C,q):null,f=new _font_loader.FontFaceObject(g,{isEvalSupported:y.isEvalSupported,disableFontFace:y.disableFontFace,ignoreErrors:y.ignoreErrors,inspectFont:D});this.fontLoader.bind(f).catch(C=>s.sendWithPromise("FontFallback",{id:v})).finally(()=>{!y.fontExtraProperties&&f.data&&(f.data=null),this.commonObjs.resolve(v,f)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(v,g);break;default:throw new Error(`Got unknown common object type ${F}`)}}),s.on("obj",u=>{let[o,v,F,g]=u;if(this.destroyed)return;const y=T(this,b).get(v);if(!y.objs.has(o))switch(F){case"Image":if(y.objs.resolve(o,g),g){let f;if(g.bitmap){const{width:C,height:q}=g;f=C*q*4}else{var D;f=((D=g.data)===null||D===void 0?void 0:D.length)||0}f>_util.MAX_IMAGE_SIZE_TO_CACHE&&(y._maybeCleanupAfterRender=!0)}break;case"Pattern":y.objs.resolve(o,g);break;default:throw new Error(`Got unknown object type ${F}`)}}),s.on("DocProgress",u=>{var o;this.destroyed||(o=r.onProgress)===null||o===void 0||o.call(r,{loaded:u.loaded,total:u.total})}),s.on("FetchBuiltInCMap",u=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(u):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",u=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(u):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((s=this._fullReader)===null||s===void 0?void 0:s.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=s-1,u=T(this,L).get(r);if(u)return u;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(v=>{if(this.destroyed)throw new Error("Transport destroyed");const F=new PDFPageProxy(r,v,this,this._params.pdfBug);return T(this,b).set(r,F),F});return T(this,L).set(r,o),o}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:r})}getFieldObjects(){return nt(this,m,Ae).call(this,"GetFieldObjects")}hasJSActions(){return nt(this,m,Ae).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const s="GetMetadata",r=T(this,c).get(s);if(r)return r;const u=this.messageHandler.sendWithPromise(s,null).then(o=>{var v,F;return{info:o[0],metadata:o[1]?new _metadata.Metadata(o[1]):null,contentDispositionFilename:((v=this._fullReader)===null||v===void 0?void 0:v.filename)??null,contentLength:((F=this._fullReader)===null||F===void 0?void 0:F.contentLength)??null}});return T(this,c).set(s,u),u}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let s=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const r of T(this,b).values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),s||this.fontLoader.clear(),T(this,c).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:s,enableXfa:r}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s,enableXfa:r})}}c=new WeakMap,b=new WeakMap,L=new WeakMap,m=new WeakSet,Ae=function(S){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const r=T(this,c).get(S);if(r)return r;const u=this.messageHandler.sendWithPromise(S,s);return T(this,c).set(S,u),u};class PDFObjects{constructor(){et(this,I),et(this,x,Object.create(null))}get(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){const o=nt(this,I,_e).call(this,s);return o.capability.promise.then(()=>r(o.data)),null}const u=T(this,x)[s];if(u==null||!u.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${s}.`);return u.data}has(s){const r=T(this,x)[s];return(r==null?void 0:r.capability.settled)||!1}resolve(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const u=nt(this,I,_e).call(this,s);u.data=r,u.capability.resolve()}clear(){for(const r in T(this,x)){var s;const{data:u}=T(this,x)[r];u==null||(s=u.bitmap)===null||s===void 0||s.close()}ut(this,x,Object.create(null))}}x=new WeakMap,I=new WeakSet,_e=function(S){return T(this,x)[S]||(T(this,x)[S]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(s){et(this,i,null),ut(this,i,s),this.onContinue=null}get promise(){return T(this,i).capability.promise}cancel(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;T(this,i).cancel(null,s)}get separateAnnots(){const{separateAnnots:s}=T(this,i).operatorList;if(!s)return!1;const{annotationCanvasMap:r}=T(this,i);return s.form||s.canvas&&(r==null?void 0:r.size)>0}}i=new WeakMap,exports.RenderTask=RenderTask;const n=class{constructor(S){let{callback:s,params:r,objs:u,commonObjs:o,annotationCanvasMap:v,operatorList:F,pageIndex:g,canvasFactory:y,filterFactory:D,useRequestAnimationFrame:f=!1,pdfBug:C=!1,pageColors:q=null}=S;this.callback=s,this.params=r,this.objs=u,this.commonObjs=o,this.annotationCanvasMap=v,this.operatorListIdx=null,this.operatorList=F,this._pageIndex=g,this.canvasFactory=y,this.filterFactory=D,this._pdfBug=C,this.pageColors=q,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(S){var s,r;let{transparency:u=!1,optionalContentConfig:o}=S;if(this.cancelled)return;if(this._canvas){if(T(n,A).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");T(n,A).add(this._canvas)}this._pdfBug&&(s=globalThis.StepperManager)!==null&&s!==void 0&&s.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:v,viewport:F,transform:g,background:y}=this.params;this.gfx=new _canvas.CanvasGraphics(v,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:o},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:g,viewport:F,transparency:u,background:y}),this.operatorListIdx=0,this.graphicsReady=!0,(r=this.graphicsReadyCallback)===null||r===void 0||r.call(this)}cancel(){var S;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.running=!1,this.cancelled=!0,(S=this.gfx)===null||S===void 0||S.endDrawing(),this._canvas&&T(n,A).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",r))}operatorListChanged(){var S;this.graphicsReady?((S=this.stepper)===null||S===void 0||S.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&T(n,A).delete(this._canvas),this.callback())))}};let InternalRenderTask=n;A=new WeakMap,et(InternalRenderTask,A,new WeakSet);const version="3.7.107";exports.version=version;const build="036f855dc";exports.build=build},(S,s,r)=>{var u,o,v,F,g;Object.defineProperty(s,"__esModule",{value:!0}),s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var y=r(1),D=r(140),f=r(144);class C{constructor(){et(this,v),et(this,u,!1),et(this,o,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue($,X){const J=T(this,o).get($);return J===void 0?X:Object.assign(X,J)}getRawValue($){return T(this,o).get($)}remove($){if(T(this,o).delete($),T(this,o).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const X of T(this,o).values())if(X instanceof D.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue($,X){const J=T(this,o).get($);let H=!1;if(J!==void 0)for(const[M,P]of Object.entries(X))J[M]!==P&&(H=!0,J[M]=P);else H=!0,T(this,o).set($,X);H&&nt(this,v,F).call(this),X instanceof D.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(X.constructor._type)}has($){return T(this,o).has($)}getAll(){return T(this,o).size>0?(0,y.objectFromMap)(T(this,o)):null}setAll($){for(const[X,J]of Object.entries($))this.setValue(X,J)}get size(){return T(this,o).size}resetModified(){T(this,u)&&(ut(this,u,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new q(this)}get serializable(){if(T(this,o).size===0)return null;const $=new Map;for(const[X,J]of T(this,o)){const H=J instanceof D.AnnotationEditor?J.serialize():J;H&&$.set(X,H)}return $}static getHash($){if(!$)return"";const X=new f.MurmurHash3_64;for(const[J,H]of $)X.update(`${J}:${JSON.stringify(H)}`);return X.hexdigest()}}u=new WeakMap,o=new WeakMap,v=new WeakSet,F=function(){T(this,u)||(ut(this,u,!0),typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=C;class q extends C{constructor($){super(),et(this,g,null),ut(this,g,structuredClone($.serializable))}get print(){(0,y.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return T(this,g)}}g=new WeakMap,s.PrintAnnotationStorage=q},(S,s,r)=>{var u,o,v,F,g,y;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var D=r(141),f=r(1);const C=class{constructor(R){et(this,u,this.focusin.bind(this)),et(this,o,this.focusout.bind(this)),et(this,v,!1),et(this,F,!1),et(this,g,!1),It(this,"_uiManager",null),et(this,y,C._zIndex++),this.constructor===C&&(0,f.unreachable)("Cannot initialize AnnotationEditor."),this.parent=R.parent,this.id=R.id,this.width=this.height=null,this.pageIndex=R.parent.pageIndex,this.name=R.name,this.div=null,this._uiManager=R.uiManager;const{rotation:$,rawDims:{pageWidth:X,pageHeight:J,pageX:H,pageY:M}}=this.parent.viewport;this.rotation=$,this.pageRotation=(360+$-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[X,J],this.pageTranslation=[H,M];const[P,U]=this.parentDimensions;this.x=R.x/P,this.y=R.y/U,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,f.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(R){this._uiManager.addCommands(R)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=T(this,y)}setParent(R){R!==null&&(this.pageIndex=R.pageIndex,this.pageDimensions=R.pageDimensions),this.parent=R}focusin(R){T(this,v)?ut(this,v,!1):this.parent.setSelected(this)}focusout(R){var $;if(!this.isAttachedToDOM)return;const X=R.relatedTarget;(X==null||!X.closest(`#${this.id}`))&&(R.preventDefault(),($=this.parent)!==null&&$!==void 0&&$.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(R){const $=this.parent.div.getBoundingClientRect();this.startX=R.clientX-$.x,this.startY=R.clientY-$.y,R.dataTransfer.setData("text/plain",this.id),R.dataTransfer.effectAllowed="move"}setAt(R,$,X,J){const[H,M]=this.parentDimensions;[X,J]=this.screenToPageTranslation(X,J),this.x=(R+X)/H,this.y=($+J)/M,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(R,$){const[X,J]=this.parentDimensions;[R,$]=this.screenToPageTranslation(R,$),this.x+=R/X,this.y+=$/J,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(R,$){switch(this.parentRotation){case 90:return[$,-R];case 180:return[-R,-$];case 270:return[-$,R];default:return[R,$]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:R}=this._uiManager.viewParameters,[$,X]=this.pageDimensions;return[$*R,X*R]}setDims(R,$){const[X,J]=this.parentDimensions;this.div.style.width=100*R/X+"%",this.div.style.height=100*$/J+"%"}fixDims(){const{style:R}=this.div,{height:$,width:X}=R,J=X.endsWith("%"),H=$.endsWith("%");if(J&&H)return;const[M,P]=this.parentDimensions;J||(R.width=100*parseFloat(X)/M+"%"),H||(R.height=100*parseFloat($)/P+"%")}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",T(this,u)),this.div.addEventListener("focusout",T(this,o));const[R,$]=this.getInitialTranslation();return this.translate(R,$),(0,D.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(R){const{isMac:$}=f.FeatureTest.platform;R.button!==0||R.ctrlKey&&$?R.preventDefault():(R.ctrlKey&&!$||R.shiftKey||R.metaKey&&$?this.parent.toggleSelected(this):this.parent.setSelected(this),ut(this,v,!0))}getRect(R,$){const X=this.parentScale,[J,H]=this.pageDimensions,[M,P]=this.pageTranslation,U=R/X,_=$/X,E=this.x*J,Y=this.y*H,rt=this.width*J,Z=this.height*H;switch(this.rotation){case 0:return[E+U+M,H-Y-_-Z+P,E+U+rt+M,H-Y-_+P];case 90:return[E+_+M,H-Y+U+P,E+_+Z+M,H-Y+U+rt+P];case 180:return[E-U-rt+M,H-Y+_+P,E-U+M,H-Y+_+Z+P];case 270:return[E-_-Z+M,H-Y-U-rt+P,E-_+M,H-Y-U+P];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(R,$){const[X,J,H,M]=R,P=H-X,U=M-J;switch(this.rotation){case 0:return[X,$-M,P,U];case 90:return[X,$-J,U,P];case 180:return[H,$-J,P,U];case 270:return[H,$-M,U,P];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ut(this,g,!0)}disableEditMode(){ut(this,g,!1)}isInEditMode(){return T(this,g)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var R;(R=this.div)===null||R===void 0||R.addEventListener("focusin",T(this,u))}serialize(){(0,f.unreachable)("An editor must be serializable")}static deserialize(R,$,X){const J=new this.prototype.constructor({parent:$,id:$.getNextId(),uiManager:X});J.rotation=R.rotation;const[H,M]=J.pageDimensions,[P,U,_,E]=J.getRectInCurrentCoords(R.rect,M);return J.x=P/H,J.y=U/M,J.width=_/H,J.height=E/M,J}remove(){this.div.removeEventListener("focusin",T(this,u)),this.div.removeEventListener("focusout",T(this,o)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var R;(R=this.div)===null||R===void 0||R.classList.add("selectedEditor")}unselect(){var R;(R=this.div)===null||R===void 0||R.classList.remove("selectedEditor")}updateParams(R,$){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return T(this,F)}set isEditing(R){ut(this,F,R),R?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let q=C;u=new WeakMap,o=new WeakMap,v=new WeakMap,F=new WeakMap,g=new WeakMap,y=new WeakMap,It(q,"_colorManager",new D.ColorManager),It(q,"_zIndex",1),s.AnnotationEditor=q},(S,s,r)=>{var u,o,v,F,g,y,D,f,C,q,R,$,X,J,H,M,P,U,_,E,Y,rt,Z,V,Q,ct,vt,pt,Tt,B,j,z,G,N,W,it,at,lt,dt,ft,mt,gt,ot,kt,Ft,At,O,K,tt,st,ht,_t;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=function(bt,Mt,Gt){for(const qt of Gt)Mt.addEventListener(qt,bt[qt].bind(bt))},s.opacityToHex=function(bt){return Math.round(Math.min(255,Math.max(1,255*bt))).toString(16).padStart(2,"0")};var xt=r(1),wt=r(142);class Lt{constructor(){et(this,u,0)}getId(){return`${xt.AnnotationEditorPrefix}${ue(this,u)._++}`}}u=new WeakMap;class Pt{constructor(){et(this,o,[]),et(this,v,!1),et(this,F,void 0),et(this,g,-1);let Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;ut(this,F,Mt)}add(Mt){let{cmd:Gt,undo:qt,mustExec:ie,type:$t=NaN,overwriteIfSameType:St=!1,keepUndo:Xt=!1}=Mt;if(ie&&Gt(),T(this,v))return;const Kt={cmd:Gt,undo:qt,type:$t};if(T(this,g)===-1){T(this,o).length>0&&(T(this,o).length=0),ut(this,g,0),T(this,o).push(Kt);return}if(St&&T(this,o)[T(this,g)].type===$t){Xt&&(Kt.undo=T(this,o)[T(this,g)].undo),T(this,o)[T(this,g)]=Kt;return}const Yt=T(this,g)+1;Yt===T(this,F)?T(this,o).splice(0,1):(ut(this,g,Yt),Yt<T(this,o).length&&T(this,o).splice(Yt)),T(this,o).push(Kt)}undo(){T(this,g)!==-1&&(ut(this,v,!0),T(this,o)[T(this,g)].undo(),ut(this,v,!1),ut(this,g,T(this,g)-1))}redo(){T(this,g)<T(this,o).length-1&&(ut(this,g,T(this,g)+1),ut(this,v,!0),T(this,o)[T(this,g)].cmd(),ut(this,v,!1))}hasSomethingToUndo(){return T(this,g)!==-1}hasSomethingToRedo(){return T(this,g)<T(this,o).length-1}destroy(){ut(this,o,null)}}o=new WeakMap,v=new WeakMap,F=new WeakMap,g=new WeakMap,s.CommandManager=Pt;class Rt{constructor(Mt){et(this,y),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Gt}=xt.FeatureTest.platform;for(const[qt,ie]of Mt)for(const $t of qt){const St=$t.startsWith("mac+");Gt&&St?(this.callbacks.set($t.slice(4),ie),this.allKeys.add($t.split("+").at(-1))):!Gt&&!St&&(this.callbacks.set($t,ie),this.allKeys.add($t.split("+").at(-1)))}}exec(Mt,Gt){if(!this.allKeys.has(Gt.key))return;const qt=this.callbacks.get(nt(this,y,D).call(this,Gt));qt&&(qt.bind(Mt)(),Gt.stopPropagation(),Gt.preventDefault())}}y=new WeakSet,D=function(bt){bt.altKey&&this.buffer.push("alt"),bt.ctrlKey&&this.buffer.push("ctrl"),bt.metaKey&&this.buffer.push("meta"),bt.shiftKey&&this.buffer.push("shift"),this.buffer.push(bt.key);const Mt=this.buffer.join("+");return this.buffer.length=0,Mt},s.KeyboardManager=Rt;const Et=class{get _colors(){const bt=new Map([["CanvasText",null],["Canvas",null]]);return(0,wt.getColorValues)(bt),(0,xt.shadow)(this,"_colors",bt)}convert(bt){const Mt=(0,wt.getRGB)(bt);if(!window.matchMedia("(forced-colors: active)").matches)return Mt;for(const[Gt,qt]of this._colors)if(qt.every((ie,$t)=>ie===Mt[$t]))return Et._colorsMapping.get(Gt);return Mt}getHexCode(bt){const Mt=this._colors.get(bt);return Mt?xt.Util.makeHexColor(...Mt):bt}};let Ot=Et;It(Ot,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),s.ColorManager=Ot;const Nt=class{constructor(bt,Mt,Gt){et(this,j),et(this,G),et(this,W),et(this,at),et(this,dt),et(this,mt),et(this,ot),et(this,Ft),et(this,O),et(this,tt),et(this,ht),et(this,f,null),et(this,C,new Map),et(this,q,new Map),et(this,R,null),et(this,$,new Pt),et(this,X,0),et(this,J,null),et(this,H,new Set),et(this,M,null),et(this,P,new Lt),et(this,U,!1),et(this,_,xt.AnnotationEditorType.NONE),et(this,E,new Set),et(this,Y,this.copy.bind(this)),et(this,rt,this.cut.bind(this)),et(this,Z,this.paste.bind(this)),et(this,V,this.keydown.bind(this)),et(this,Q,this.onEditingAction.bind(this)),et(this,ct,this.onPageChanging.bind(this)),et(this,vt,this.onScaleChanging.bind(this)),et(this,pt,this.onRotationChanging.bind(this)),et(this,Tt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}),et(this,B,null),ut(this,B,bt),ut(this,M,Mt),T(this,M)._on("editingaction",T(this,Q)),T(this,M)._on("pagechanging",T(this,ct)),T(this,M)._on("scalechanging",T(this,vt)),T(this,M)._on("rotationchanging",T(this,pt)),ut(this,R,Gt),this.viewParameters={realScale:wt.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){nt(this,G,N).call(this),T(this,M)._off("editingaction",T(this,Q)),T(this,M)._off("pagechanging",T(this,ct)),T(this,M)._off("scalechanging",T(this,vt)),T(this,M)._off("rotationchanging",T(this,pt));for(const bt of T(this,q).values())bt.destroy();T(this,q).clear(),T(this,C).clear(),T(this,H).clear(),ut(this,f,null),T(this,E).clear(),T(this,$).destroy()}onPageChanging(bt){let{pageNumber:Mt}=bt;ut(this,X,Mt-1)}focusMainContainer(){T(this,B).focus()}addShouldRescale(bt){T(this,H).add(bt)}removeShouldRescale(bt){T(this,H).delete(bt)}onScaleChanging(bt){let{scale:Mt}=bt;this.commitOrRemove(),this.viewParameters.realScale=Mt*wt.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Gt of T(this,H))Gt.onScaleChanging()}onRotationChanging(bt){let{pagesRotation:Mt}=bt;this.commitOrRemove(),this.viewParameters.rotation=Mt}addToAnnotationStorage(bt){bt.isEmpty()||!T(this,R)||T(this,R).has(bt.id)||T(this,R).setValue(bt.id,bt)}copy(bt){if(bt.preventDefault(),T(this,f)&&T(this,f).commitOrRemove(),!this.hasSelection)return;const Mt=[];for(const Gt of T(this,E))Gt.isEmpty()||Mt.push(Gt.serialize());Mt.length!==0&&bt.clipboardData.setData("application/pdfjs",JSON.stringify(Mt))}cut(bt){this.copy(bt),this.delete()}paste(bt){bt.preventDefault();let Mt=bt.clipboardData.getData("application/pdfjs");if(!Mt)return;try{Mt=JSON.parse(Mt)}catch(qt){(0,xt.warn)(`paste: "${qt.message}".`);return}if(!Array.isArray(Mt))return;this.unselectAll();const Gt=T(this,q).get(T(this,X));try{const qt=[];for(const St of Mt){const Xt=Gt.deserialize(St);if(!Xt)return;qt.push(Xt)}const ie=()=>{for(const St of qt)nt(this,O,K).call(this,St);nt(this,ht,_t).call(this,qt)},$t=()=>{for(const St of qt)St.remove()};this.addCommands({cmd:ie,undo:$t,mustExec:!0})}catch(qt){(0,xt.warn)(`paste: "${qt.message}".`)}}keydown(bt){var Mt;(Mt=this.getActive())!==null&&Mt!==void 0&&Mt.shouldGetKeyboardEvents()||Nt._keyboardManager.exec(this,bt)}onEditingAction(bt){["undo","redo","delete","selectAll"].includes(bt.name)&&this[bt.name]()}setEditingState(bt){bt?(nt(this,j,z).call(this),nt(this,W,it).call(this),nt(this,dt,ft).call(this,{isEditing:T(this,_)!==xt.AnnotationEditorType.NONE,isEmpty:nt(this,tt,st).call(this),hasSomethingToUndo:T(this,$).hasSomethingToUndo(),hasSomethingToRedo:T(this,$).hasSomethingToRedo(),hasSelectedEditor:!1})):(nt(this,G,N).call(this),nt(this,at,lt).call(this),nt(this,dt,ft).call(this,{isEditing:!1}))}registerEditorTypes(bt){if(!T(this,J)){ut(this,J,bt);for(const Mt of T(this,J))nt(this,mt,gt).call(this,Mt.defaultPropertiesToUpdate)}}getId(){return T(this,P).getId()}get currentLayer(){return T(this,q).get(T(this,X))}get currentPageIndex(){return T(this,X)}addLayer(bt){T(this,q).set(bt.pageIndex,bt),T(this,U)?bt.enable():bt.disable()}removeLayer(bt){T(this,q).delete(bt.pageIndex)}updateMode(bt){if(ut(this,_,bt),bt===xt.AnnotationEditorType.NONE)this.setEditingState(!1),nt(this,Ft,At).call(this);else{this.setEditingState(!0),nt(this,ot,kt).call(this);for(const Mt of T(this,q).values())Mt.updateMode(bt)}}updateToolbar(bt){bt!==T(this,_)&&T(this,M).dispatch("switchannotationeditormode",{source:this,mode:bt})}updateParams(bt,Mt){if(T(this,J)){for(const Gt of T(this,E))Gt.updateParams(bt,Mt);for(const Gt of T(this,J))Gt.updateDefaultParams(bt,Mt)}}getEditors(bt){const Mt=[];for(const Gt of T(this,C).values())Gt.pageIndex===bt&&Mt.push(Gt);return Mt}getEditor(bt){return T(this,C).get(bt)}addEditor(bt){T(this,C).set(bt.id,bt)}removeEditor(bt){var Mt;T(this,C).delete(bt.id),this.unselect(bt),(Mt=T(this,R))===null||Mt===void 0||Mt.remove(bt.id)}setActiveEditor(bt){T(this,f)!==bt&&(ut(this,f,bt),bt&&nt(this,mt,gt).call(this,bt.propertiesToUpdate))}toggleSelected(bt){T(this,E).has(bt)?(T(this,E).delete(bt),bt.unselect(),nt(this,dt,ft).call(this,{hasSelectedEditor:this.hasSelection})):(T(this,E).add(bt),bt.select(),nt(this,mt,gt).call(this,bt.propertiesToUpdate),nt(this,dt,ft).call(this,{hasSelectedEditor:!0}))}setSelected(bt){for(const Mt of T(this,E))Mt!==bt&&Mt.unselect();T(this,E).clear(),T(this,E).add(bt),bt.select(),nt(this,mt,gt).call(this,bt.propertiesToUpdate),nt(this,dt,ft).call(this,{hasSelectedEditor:!0})}isSelected(bt){return T(this,E).has(bt)}unselect(bt){bt.unselect(),T(this,E).delete(bt),nt(this,dt,ft).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return T(this,E).size!==0}undo(){T(this,$).undo(),nt(this,dt,ft).call(this,{hasSomethingToUndo:T(this,$).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:nt(this,tt,st).call(this)})}redo(){T(this,$).redo(),nt(this,dt,ft).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:T(this,$).hasSomethingToRedo(),isEmpty:nt(this,tt,st).call(this)})}addCommands(bt){T(this,$).add(bt),nt(this,dt,ft).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:nt(this,tt,st).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const bt=[...T(this,E)];this.addCommands({cmd:()=>{for(const Mt of bt)Mt.remove()},undo:()=>{for(const Mt of bt)nt(this,O,K).call(this,Mt)},mustExec:!0})}commitOrRemove(){var bt;(bt=T(this,f))===null||bt===void 0||bt.commitOrRemove()}selectAll(){for(const bt of T(this,E))bt.commit();nt(this,ht,_t).call(this,T(this,C).values())}unselectAll(){if(T(this,f))T(this,f).commitOrRemove();else if(T(this,E).size!==0){for(const bt of T(this,E))bt.unselect();T(this,E).clear(),nt(this,dt,ft).call(this,{hasSelectedEditor:!1})}}isActive(bt){return T(this,f)===bt}getActive(){return T(this,f)}getMode(){return T(this,_)}};let zt=Nt;f=new WeakMap,C=new WeakMap,q=new WeakMap,R=new WeakMap,$=new WeakMap,X=new WeakMap,J=new WeakMap,H=new WeakMap,M=new WeakMap,P=new WeakMap,U=new WeakMap,_=new WeakMap,E=new WeakMap,Y=new WeakMap,rt=new WeakMap,Z=new WeakMap,V=new WeakMap,Q=new WeakMap,ct=new WeakMap,vt=new WeakMap,pt=new WeakMap,Tt=new WeakMap,B=new WeakMap,j=new WeakSet,z=function(){T(this,B).addEventListener("keydown",T(this,V))},G=new WeakSet,N=function(){T(this,B).removeEventListener("keydown",T(this,V))},W=new WeakSet,it=function(){document.addEventListener("copy",T(this,Y)),document.addEventListener("cut",T(this,rt)),document.addEventListener("paste",T(this,Z))},at=new WeakSet,lt=function(){document.removeEventListener("copy",T(this,Y)),document.removeEventListener("cut",T(this,rt)),document.removeEventListener("paste",T(this,Z))},dt=new WeakSet,ft=function(bt){Object.entries(bt).some(Mt=>{let[Gt,qt]=Mt;return T(this,Tt)[Gt]!==qt})&&T(this,M).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(T(this,Tt),bt)})},mt=new WeakSet,gt=function(bt){T(this,M).dispatch("annotationeditorparamschanged",{source:this,details:bt})},ot=new WeakSet,kt=function(){if(!T(this,U)){ut(this,U,!0);for(const bt of T(this,q).values())bt.enable()}},Ft=new WeakSet,At=function(){if(this.unselectAll(),T(this,U)){ut(this,U,!1);for(const bt of T(this,q).values())bt.disable()}},O=new WeakSet,K=function(bt){const Mt=T(this,q).get(bt.pageIndex);Mt?Mt.addOrRebuild(bt):this.addEditor(bt)},tt=new WeakSet,st=function(){if(T(this,C).size===0)return!0;if(T(this,C).size===1)for(const bt of T(this,C).values())return bt.isEmpty();return!1},ht=new WeakSet,_t=function(bt){T(this,E).clear();for(const Mt of bt)Mt.isEmpty()||(T(this,E).add(Mt),Mt.select());nt(this,dt,ft).call(this,{hasSelectedEditor:!0})},It(zt,"_keyboardManager",new Rt([[["ctrl+a","mac+meta+a"],Nt.prototype.selectAll],[["ctrl+z","mac+meta+z"],Nt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Nt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Nt.prototype.delete],[["Escape","mac+Escape"],Nt.prototype.unselectAll]])),s.AnnotationEditorUIManager=zt},(S,s,r)=>{var u,o,v,F,g,y,D,f,C,q,R,$,X,J;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMFilterFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=s.AnnotationPrefix=void 0,s.deprecated=function(z){console.log("Deprecated API usage: "+z)},s.getColorValues=function(z){const G=document.createElement("span");G.style.visibility="hidden",document.body.append(G);for(const N of z.keys()){G.style.color=N;const W=window.getComputedStyle(G).color;z.set(N,j(W))}G.remove()},s.getCurrentTransform=function(z){const{a:G,b:N,c:W,d:it,e:at,f:lt}=z.getTransform();return[G,N,W,it,at,lt]},s.getCurrentTransformInverse=function(z){const{a:G,b:N,c:W,d:it,e:at,f:lt}=z.getTransform().invertSelf();return[G,N,W,it,at,lt]},s.getFilenameFromUrl=function(z){return arguments.length>1&&arguments[1]!==void 0&&arguments[1]||([z]=z.split(/[#?]/,1)),z.substring(z.lastIndexOf("/")+1)},s.getPdfFilenameFromUrl=function(z){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof z!="string")return G;if(pt(z))return(0,M.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),G;const N=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,W=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(z);let it=N.exec(W[1])||N.exec(W[2])||N.exec(W[3]);if(it&&(it=it[0],it.includes("%")))try{it=N.exec(decodeURIComponent(it))[0]}catch{}return it||G},s.getRGB=j,s.getXfaPageViewport=function(z,G){let{scale:N=1,rotation:W=0}=G;const{width:it,height:at}=z.attributes.style,lt=[0,0,parseInt(it),parseInt(at)];return new ct({viewBox:lt,scale:N,rotation:W})},s.isDataScheme=pt,s.isPdfFile=function(z){return typeof z=="string"&&/\.pdf$/i.test(z)},s.isValidFetchUrl=Tt,s.loadScript=function(z){let G=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise((N,W)=>{const it=document.createElement("script");it.src=z,it.onload=function(at){G&&it.remove(),N(at)},it.onerror=function(){W(new Error(`Cannot load script at: ${it.src}`))},(document.head||document.documentElement).append(it)})},s.setLayerDimensions=function(z,G){let N=arguments.length>2&&arguments[2]!==void 0&&arguments[2],W=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(G instanceof ct){const{pageWidth:it,pageHeight:at}=G.rawDims,{style:lt}=z,dt=`calc(var(--scale-factor) * ${it}px)`,ft=`calc(var(--scale-factor) * ${at}px)`;N&&G.rotation%180!=0?(lt.width=ft,lt.height=dt):(lt.width=dt,lt.height=ft)}W&&z.setAttribute("data-main-rotation",G.rotation)};var H=r(143),M=r(1);const P="http://www.w3.org/2000/svg";s.AnnotationPrefix="pdfjs_internal_id_";const U=class{};let _=U;It(_,"CSS",96),It(_,"PDF",72),It(_,"PDF_TO_CSS_UNITS",U.CSS/U.PDF),s.PixelsPerInch=_;class E extends H.BaseFilterFactory{constructor(){let{docId:G,ownerDocument:N=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),et(this,C),et(this,R),et(this,X),et(this,u,void 0),et(this,o,void 0),et(this,v,void 0),et(this,F,void 0),et(this,g,void 0),et(this,y,void 0),et(this,D,void 0),et(this,f,0),ut(this,v,G),ut(this,F,N)}addFilter(G){if(!G)return"none";let N,W,it,at,lt=T(this,C,q).get(G);if(lt)return lt;if(G.length===1){const ot=G[0],kt=new Array(256);for(let Ft=0;Ft<256;Ft++)kt[Ft]=ot[Ft]/255;at=N=W=it=kt.join(",")}else{const[ot,kt,Ft]=G,At=new Array(256),O=new Array(256),K=new Array(256);for(let tt=0;tt<256;tt++)At[tt]=ot[tt]/255,O[tt]=kt[tt]/255,K[tt]=Ft[tt]/255;N=At.join(","),W=O.join(","),it=K.join(","),at=`${N}${W}${it}`}if(lt=T(this,C,q).get(at),lt)return T(this,C,q).set(G,lt),lt;const dt=`g_${T(this,v)}_transfer_map_${ue(this,f)._++}`,ft=`url(#${dt})`;T(this,C,q).set(G,ft),T(this,C,q).set(at,ft);const mt=T(this,F).createElementNS(P,"filter",P);mt.setAttribute("id",dt),mt.setAttribute("color-interpolation-filters","sRGB");const gt=T(this,F).createElementNS(P,"feComponentTransfer");return mt.append(gt),nt(this,X,J).call(this,gt,"feFuncR",N),nt(this,X,J).call(this,gt,"feFuncG",W),nt(this,X,J).call(this,gt,"feFuncB",it),T(this,R,$).append(mt),ft}addHCMFilter(G,N){var W;const it=`${G}-${N}`;if(T(this,y)===it)return T(this,D);if(ut(this,y,it),ut(this,D,"none"),(W=T(this,g))===null||W===void 0||W.remove(),!G||!N)return T(this,D);T(this,R,$).style.color=G;const at=j(G=getComputedStyle(T(this,R,$)).getPropertyValue("color"));G=M.Util.makeHexColor(...at),T(this,R,$).style.color=N;const lt=j(N=getComputedStyle(T(this,R,$)).getPropertyValue("color"));if(N=M.Util.makeHexColor(...lt),T(this,R,$).style.color="",G==="#000000"&&N==="#ffffff"||G===N)return T(this,D);const dt=new Array(256);for(let At=0;At<=255;At++){const O=At/255;dt[At]=O<=.03928?O/12.92:((O+.055)/1.055)**2.4}const ft=dt.join(","),mt=`g_${T(this,v)}_hcm_filter`,gt=ut(this,g,T(this,F).createElementNS(P,"filter",P));gt.setAttribute("id",mt),gt.setAttribute("color-interpolation-filters","sRGB");let ot=T(this,F).createElementNS(P,"feComponentTransfer");gt.append(ot),nt(this,X,J).call(this,ot,"feFuncR",ft),nt(this,X,J).call(this,ot,"feFuncG",ft),nt(this,X,J).call(this,ot,"feFuncB",ft);const kt=T(this,F).createElementNS(P,"feColorMatrix");kt.setAttribute("type","matrix"),kt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),gt.append(kt),ot=T(this,F).createElementNS(P,"feComponentTransfer"),gt.append(ot);const Ft=(At,O)=>{const K=at[At]/255,tt=lt[At]/255,st=new Array(O+1);for(let ht=0;ht<=O;ht++)st[ht]=K+ht/O*(tt-K);return st.join(",")};return nt(this,X,J).call(this,ot,"feFuncR",Ft(0,5)),nt(this,X,J).call(this,ot,"feFuncG",Ft(1,5)),nt(this,X,J).call(this,ot,"feFuncB",Ft(2,5)),T(this,R,$).append(gt),ut(this,D,`url(#${mt})`),T(this,D)}destroy(){(!(arguments.length>0&&arguments[0]!==void 0&&arguments[0])||!T(this,D))&&(T(this,o)&&(T(this,o).parentNode.parentNode.remove(),ut(this,o,null)),T(this,u)&&(T(this,u).clear(),ut(this,u,null)),ut(this,f,0))}}u=new WeakMap,o=new WeakMap,v=new WeakMap,F=new WeakMap,g=new WeakMap,y=new WeakMap,D=new WeakMap,f=new WeakMap,C=new WeakSet,q=function(){return T(this,u)||ut(this,u,new Map)},R=new WeakSet,$=function(){if(!T(this,o)){const z=T(this,F).createElement("div"),{style:G}=z;G.visibility="hidden",G.contain="strict",G.width=G.height=0,G.position="absolute",G.top=G.left=0,G.zIndex=-1;const N=T(this,F).createElementNS(P,"svg");N.setAttribute("width",0),N.setAttribute("height",0),ut(this,o,T(this,F).createElementNS(P,"defs")),z.append(N),N.append(T(this,o)),T(this,F).body.append(z)}return T(this,o)},X=new WeakSet,J=function(z,G,N){const W=T(this,F).createElementNS(P,G);W.setAttribute("type","discrete"),W.setAttribute("tableValues",N),z.append(W)},s.DOMFilterFactory=E;class Y extends H.BaseCanvasFactory{constructor(){let{ownerDocument:G=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=G}_createCanvas(G,N){const W=this._document.createElement("canvas");return W.width=G,W.height=N,W}}s.DOMCanvasFactory=Y;async function rt(z){let G=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(Tt(z,document.baseURI)){const N=await fetch(z);if(!N.ok)throw new Error(N.statusText);return G?new Uint8Array(await N.arrayBuffer()):(0,M.stringToBytes)(await N.text())}return new Promise((N,W)=>{const it=new XMLHttpRequest;it.open("GET",z,!0),G&&(it.responseType="arraybuffer"),it.onreadystatechange=()=>{if(it.readyState===XMLHttpRequest.DONE){if(it.status===200||it.status===0){let at;if(G&&it.response?at=new Uint8Array(it.response):!G&&it.responseText&&(at=(0,M.stringToBytes)(it.responseText)),at){N(at);return}}W(new Error(it.statusText))}},it.send(null)})}class Z extends H.BaseCMapReaderFactory{_fetchData(G,N){return rt(G,this.isCompressed).then(W=>({cMapData:W,compressionType:N}))}}s.DOMCMapReaderFactory=Z;class V extends H.BaseStandardFontDataFactory{_fetchData(G){return rt(G,!0)}}s.DOMStandardFontDataFactory=V;class Q extends H.BaseSVGFactory{_createSVG(G){return document.createElementNS(P,G)}}s.DOMSVGFactory=Q;class ct{constructor(G){let{viewBox:N,scale:W,rotation:it,offsetX:at=0,offsetY:lt=0,dontFlip:dt=!1}=G;this.viewBox=N,this.scale=W,this.rotation=it,this.offsetX=at,this.offsetY=lt;const ft=(N[2]+N[0])/2,mt=(N[3]+N[1])/2;let gt,ot,kt,Ft,At,O,K,tt;switch(it%=360,it<0&&(it+=360),it){case 180:gt=-1,ot=0,kt=0,Ft=1;break;case 90:gt=0,ot=1,kt=1,Ft=0;break;case 270:gt=0,ot=-1,kt=-1,Ft=0;break;case 0:gt=1,ot=0,kt=0,Ft=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}dt&&(kt=-kt,Ft=-Ft),gt===0?(At=Math.abs(mt-N[1])*W+at,O=Math.abs(ft-N[0])*W+lt,K=(N[3]-N[1])*W,tt=(N[2]-N[0])*W):(At=Math.abs(ft-N[0])*W+at,O=Math.abs(mt-N[1])*W+lt,K=(N[2]-N[0])*W,tt=(N[3]-N[1])*W),this.transform=[gt*W,ot*W,kt*W,Ft*W,At-gt*W*ft-kt*W*mt,O-ot*W*ft-Ft*W*mt],this.width=K,this.height=tt}get rawDims(){const{viewBox:G}=this;return(0,M.shadow)(this,"rawDims",{pageWidth:G[2]-G[0],pageHeight:G[3]-G[1],pageX:G[0],pageY:G[1]})}clone(){let{scale:G=this.scale,rotation:N=this.rotation,offsetX:W=this.offsetX,offsetY:it=this.offsetY,dontFlip:at=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new ct({viewBox:this.viewBox.slice(),scale:G,rotation:N,offsetX:W,offsetY:it,dontFlip:at})}convertToViewportPoint(G,N){return M.Util.applyTransform([G,N],this.transform)}convertToViewportRectangle(G){const N=M.Util.applyTransform([G[0],G[1]],this.transform),W=M.Util.applyTransform([G[2],G[3]],this.transform);return[N[0],N[1],W[0],W[1]]}convertToPdfPoint(G,N){return M.Util.applyInverseTransform([G,N],this.transform)}}s.PageViewport=ct;class vt extends M.BaseException{constructor(G,N){let W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;super(G,"RenderingCancelledException"),this.type=N,this.extraDelay=W}}s.RenderingCancelledException=vt;function pt(z){const G=z.length;let N=0;for(;N<G&&z[N].trim()==="";)N++;return z.substring(N,N+5).toLowerCase()==="data:"}s.StatTimer=class{constructor(){It(this,"started",Object.create(null)),It(this,"times",[])}time(z){z in this.started&&(0,M.warn)(`Timer is already running for ${z}`),this.started[z]=Date.now()}timeEnd(z){z in this.started||(0,M.warn)(`Timer has not been started for ${z}`),this.times.push({name:z,start:this.started[z],end:Date.now()}),delete this.started[z]}toString(){const z=[];let G=0;for(const{name:N}of this.times)G=Math.max(N.length,G);for(const{name:N,start:W,end:it}of this.times)z.push(`${N.padEnd(G)} ${it-W}ms
`);return z.join("")}};function Tt(z,G){try{const{protocol:N}=G?new URL(z,G):new URL(z);return N==="http:"||N==="https:"}catch{return!1}}let B;s.PDFDateString=class{static toDateObject(z){if(!z||typeof z!="string")return null;B||(B=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const G=B.exec(z);if(!G)return null;const N=parseInt(G[1],10);let W=parseInt(G[2],10);W=W>=1&&W<=12?W-1:0;let it=parseInt(G[3],10);it=it>=1&&it<=31?it:1;let at=parseInt(G[4],10);at=at>=0&&at<=23?at:0;let lt=parseInt(G[5],10);lt=lt>=0&&lt<=59?lt:0;let dt=parseInt(G[6],10);dt=dt>=0&&dt<=59?dt:0;const ft=G[7]||"Z";let mt=parseInt(G[8],10);mt=mt>=0&&mt<=23?mt:0;let gt=parseInt(G[9],10)||0;return gt=gt>=0&&gt<=59?gt:0,ft==="-"?(at+=mt,lt+=gt):ft==="+"&&(at-=mt,lt-=gt),new Date(Date.UTC(N,W,it,at,lt,dt))}};function j(z){if(z.startsWith("#")){const G=parseInt(z.slice(1),16);return[(16711680&G)>>16,(65280&G)>>8,255&G]}return z.startsWith("rgb(")?z.slice(4,-1).split(",").map(G=>parseInt(G)):z.startsWith("rgba(")?z.slice(5,-1).split(",").map(G=>parseInt(G)).slice(0,3):((0,M.warn)(`Not a valid color format: "${z}"`),[0,0,0])}},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseFilterFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var u=r(1);class o{constructor(){this.constructor===o&&(0,u.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(f){return"none"}addHCMFilter(f,C){return"none"}destroy(){}}s.BaseFilterFactory=o;class v{constructor(){this.constructor===v&&(0,u.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,C){if(f<=0||C<=0)throw new Error("Invalid canvas size");const q=this._createCanvas(f,C);return{canvas:q,context:q.getContext("2d")}}reset(f,C,q){if(!f.canvas)throw new Error("Canvas is not specified");if(C<=0||q<=0)throw new Error("Invalid canvas size");f.canvas.width=C,f.canvas.height=q}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,C){(0,u.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=v;class F{constructor(f){let{baseUrl:C=null,isCompressed:q=!0}=f;this.constructor===F&&(0,u.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=C,this.isCompressed=q}async fetch(f){let{name:C}=f;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!C)throw new Error("CMap name must be specified.");const q=this.baseUrl+C+(this.isCompressed?".bcmap":""),R=this.isCompressed?u.CMapCompressionType.BINARY:u.CMapCompressionType.NONE;return this._fetchData(q,R).catch($=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${q}`)})}_fetchData(f,C){(0,u.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=F;class g{constructor(f){let{baseUrl:C=null}=f;this.constructor===g&&(0,u.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=C}async fetch(f){let{filename:C}=f;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!C)throw new Error("Font filename must be specified.");const q=`${this.baseUrl}${C}`;return this._fetchData(q).catch(R=>{throw new Error(`Unable to load font data at: ${q}`)})}_fetchData(f){(0,u.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=g;class y{constructor(){this.constructor===y&&(0,u.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,C){let q=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(f<=0||C<=0)throw new Error("Invalid SVG dimensions");const R=this._createSVG("svg:svg");return R.setAttribute("version","1.1"),q||(R.setAttribute("width",`${f}px`),R.setAttribute("height",`${C}px`)),R.setAttribute("preserveAspectRatio","none"),R.setAttribute("viewBox",`0 0 ${f} ${C}`),R}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,u.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=y},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var u=r(1);const o=3285377520,v=4294901760,F=65535;s.MurmurHash3_64=class{constructor(g){this.h1=g?4294967295&g:o,this.h2=g?4294967295&g:o}update(g){let y,D;if(typeof g=="string"){y=new Uint8Array(2*g.length),D=0;for(let _=0,E=g.length;_<E;_++){const Y=g.charCodeAt(_);Y<=255?y[D++]=Y:(y[D++]=Y>>>8,y[D++]=255&Y)}}else{if(!(0,u.isArrayBuffer)(g))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");y=g.slice(),D=y.byteLength}const f=D>>2,C=D-4*f,q=new Uint32Array(y.buffer,0,f);let R=0,$=0,X=this.h1,J=this.h2;const H=3432918353,M=461845907,P=11601,U=13715;for(let _=0;_<f;_++)1&_?(R=q[_],R=R*H&v|R*P&F,R=R<<15|R>>>17,R=R*M&v|R*U&F,X^=R,X=X<<13|X>>>19,X=5*X+3864292196):($=q[_],$=$*H&v|$*P&F,$=$<<15|$>>>17,$=$*M&v|$*U&F,J^=$,J=J<<13|J>>>19,J=5*J+3864292196);switch(R=0,C){case 3:R^=y[4*f+2]<<16;case 2:R^=y[4*f+1]<<8;case 1:R^=y[4*f],R=R*H&v|R*P&F,R=R<<15|R>>>17,R=R*M&v|R*U&F,1&f?X^=R:J^=R}this.h1=X,this.h2=J}hexdigest(){let g=this.h1,y=this.h2;return g^=y>>>1,g=3981806797*g&v|36045*g&F,y=4283543511*y&v|(2950163797*(y<<16|g>>>16)&v)>>>16,g^=y>>>1,g=444984403*g&v|60499*g&F,y=3301882366*y&v|(3120437893*(y<<16|g>>>16)&v)>>>16,g^=y>>>1,(g>>>0).toString(16).padStart(8,"0")+(y>>>0).toString(16).padStart(8,"0")}}},(S,s,r)=>{var u,o;Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var v=r(1),F=r(3);s.FontLoader=(o=class{constructor(g){et(this,u,new Set);let{ownerDocument:y=globalThis.document,styleElement:D=null}=g;this._document=y,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const y=this.styleElement.sheet;y.insertRule(g,y.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),T(this,u).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(g){if(g&&!T(this,u).has(g.loadedName))if((0,v.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:y,src:D,style:f}=g,C=new FontFace(y,D,f);this.addNativeFontFace(C);try{await C.load(),T(this,u).add(y)}catch{(0,v.warn)(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(C)}}else(0,v.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g.systemFontInfo);return}if(this.isFontLoadingAPISupported){const D=g.createNativeFontFace();if(D){this.addNativeFontFace(D);try{await D.loaded}catch(f){throw(0,v.warn)(`Failed to load font '${D.family}': '${f}'.`),g.disableFontFace=!0,f}}return}const y=g.createFontFaceRule();if(y){if(this.insertRule(y),this.isSyncFontLoadingSupported)return;await new Promise(D=>{const f=this._queueLoadingCallback(D);this._prepareFontLoadEvent(g,f)})}}get isFontLoadingAPISupported(){var g;const y=!((g=this._document)===null||g===void 0||!g.fonts);return(0,v.shadow)(this,"isFontLoadingAPISupported",y)}get isSyncFontLoadingSupported(){let g=!1;return(F.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(g=!0),(0,v.shadow)(this,"isSyncFontLoadingSupported",g)}_queueLoadingCallback(g){const{loadingRequests:y}=this,D={done:!1,complete:function(){for((0,v.assert)(!D.done,"completeRequest() cannot be called twice."),D.done=!0;y.length>0&&y[0].done;){const f=y.shift();setTimeout(f.callback,0)}},callback:g};return y.push(D),D}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,v.shadow)(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,y){function D(E,Y){return E.charCodeAt(Y)<<24|E.charCodeAt(Y+1)<<16|E.charCodeAt(Y+2)<<8|255&E.charCodeAt(Y+3)}function f(E,Y,rt,Z){return E.substring(0,Y)+Z+E.substring(Y+rt)}let C,q;const R=this._document.createElement("canvas");R.width=1,R.height=1;const $=R.getContext("2d");let X=0;const J=`lt${Date.now()}${this.loadTestFontId++}`;let H=this._loadTestFont;H=f(H,976,J.length,J);const M=1482184792;let P=D(H,16);for(C=0,q=J.length-3;C<q;C+=4)P=P-M+D(J,C)|0;C<J.length&&(P=P-M+D(J+"XXX",C)|0),H=f(H,16,4,(0,v.string32)(P));const U=`@font-face {font-family:"${J}";src:${`url(data:font/opentype;base64,${btoa(H)});`}}`;this.insertRule(U);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const E of[g.loadedName,J]){const Y=this._document.createElement("span");Y.textContent="Hi",Y.style.fontFamily=E,_.append(Y)}this._document.body.append(_),function E(Y,rt){if(++X>30){(0,v.warn)("Load test font never loaded."),rt();return}$.font="30px "+Y,$.fillText(".",0,20),$.getImageData(0,0,1,1).data[3]>0?rt():setTimeout(E.bind(null,Y,rt))}(J,()=>{_.remove(),y.complete()})}},u=new WeakMap,o),s.FontFaceObject=class{constructor(g,y){let{isEvalSupported:D=!0,disableFontFace:f=!1,ignoreErrors:C=!1,inspectFont:q=null}=y;this.compiledGlyphs=Object.create(null);for(const R in g)this[R]=g[R];this.isEvalSupported=D!==!1,this.disableFontFace=f===!0,this.ignoreErrors=C===!0,this._inspectFont=q}createNativeFontFace(){var g;if(!this.data||this.disableFontFace)return null;let y;if(this.cssFontInfo){const D={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(D.style=`oblique ${this.cssFontInfo.italicAngle}deg`),y=new FontFace(this.cssFontInfo.fontFamily,this.data,D)}else y=new FontFace(this.loadedName,this.data,{});return(g=this._inspectFont)===null||g===void 0||g.call(this,this),y}createFontFaceRule(){var g;if(!this.data||this.disableFontFace)return null;const y=(0,v.bytesToString)(this.data),D=`url(data:${this.mimetype};base64,${btoa(y)});`;let f;if(this.cssFontInfo){let C=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(C+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${C}src:${D}}`}else f=`@font-face {font-family:"${this.loadedName}";src:${D}}`;return(g=this._inspectFont)===null||g===void 0||g.call(this,this,D),f}getPathGenerator(g,y){if(this.compiledGlyphs[y]!==void 0)return this.compiledGlyphs[y];let D;try{D=g.get(this.loadedName+"_path_"+y)}catch(f){if(!this.ignoreErrors)throw f;return(0,v.warn)(`getPathGenerator - ignoring character: "${f}".`),this.compiledGlyphs[y]=function(C,q){}}if(this.isEvalSupported&&v.FeatureTest.isEvalSupported){const f=[];for(const C of D){const q=C.args!==void 0?C.args.join(","):"";f.push("c.",C.cmd,"(",q,`);
`)}return this.compiledGlyphs[y]=new Function("c","size",f.join(""))}return this.compiledGlyphs[y]=function(f,C){for(const q of D)q.cmd==="scale"&&(q.args=[C,-C]),f[q.cmd].apply(f,q.args)}}}},(S,s,r)=>{var u,o,v,F;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var g=r(1),y=r(142),D=r(147),f=r(148),C=r(3);const q=4096,R=16;class ${constructor(j){this.canvasFactory=j,this.cache=Object.create(null)}getCanvas(j,z,G){let N;return this.cache[j]!==void 0?(N=this.cache[j],this.canvasFactory.reset(N,z,G)):(N=this.canvasFactory.create(z,G),this.cache[j]=N),N}delete(j){delete this.cache[j]}clear(){for(const j in this.cache){const z=this.cache[j];this.canvasFactory.destroy(z),delete this.cache[j]}}}function X(B,j,z,G,N,W,it,at,lt,dt){const[ft,mt,gt,ot,kt,Ft]=(0,y.getCurrentTransform)(B);if(mt===0&&gt===0){const At=it*ft+kt,O=Math.round(At),K=at*ot+Ft,tt=Math.round(K),st=(it+lt)*ft+kt,ht=Math.abs(Math.round(st)-O)||1,_t=(at+dt)*ot+Ft,xt=Math.abs(Math.round(_t)-tt)||1;return B.setTransform(Math.sign(ft),0,0,Math.sign(ot),O,tt),B.drawImage(j,z,G,N,W,0,0,ht,xt),B.setTransform(ft,mt,gt,ot,kt,Ft),[ht,xt]}if(ft===0&&ot===0){const At=at*gt+kt,O=Math.round(At),K=it*mt+Ft,tt=Math.round(K),st=(at+dt)*gt+kt,ht=Math.abs(Math.round(st)-O)||1,_t=(it+lt)*mt+Ft,xt=Math.abs(Math.round(_t)-tt)||1;return B.setTransform(0,Math.sign(mt),Math.sign(gt),0,O,tt),B.drawImage(j,z,G,N,W,0,0,xt,ht),B.setTransform(ft,mt,gt,ot,kt,Ft),[xt,ht]}return B.drawImage(j,z,G,N,W,it,at,lt,dt),[Math.hypot(ft,mt)*lt,Math.hypot(gt,ot)*dt]}class J{constructor(j,z){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=g.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=g.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=g.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,j,z])}clone(){const j=Object.create(this);return j.clipBox=this.clipBox.slice(),j}setCurrentPoint(j,z){this.x=j,this.y=z}updatePathMinMax(j,z,G){[z,G]=g.Util.applyTransform([z,G],j),this.minX=Math.min(this.minX,z),this.minY=Math.min(this.minY,G),this.maxX=Math.max(this.maxX,z),this.maxY=Math.max(this.maxY,G)}updateRectMinMax(j,z){const G=g.Util.applyTransform(z,j),N=g.Util.applyTransform(z.slice(2),j);this.minX=Math.min(this.minX,G[0],N[0]),this.minY=Math.min(this.minY,G[1],N[1]),this.maxX=Math.max(this.maxX,G[0],N[0]),this.maxY=Math.max(this.maxY,G[1],N[1])}updateScalingPathMinMax(j,z){g.Util.scaleMinMax(j,z),this.minX=Math.min(this.minX,z[0]),this.maxX=Math.max(this.maxX,z[1]),this.minY=Math.min(this.minY,z[2]),this.maxY=Math.max(this.maxY,z[3])}updateCurvePathMinMax(j,z,G,N,W,it,at,lt,dt,ft){const mt=g.Util.bezierBoundingBox(z,G,N,W,it,at,lt,dt);ft?(ft[0]=Math.min(ft[0],mt[0],mt[2]),ft[1]=Math.max(ft[1],mt[0],mt[2]),ft[2]=Math.min(ft[2],mt[1],mt[3]),ft[3]=Math.max(ft[3],mt[1],mt[3])):this.updateRectMinMax(j,mt)}getPathBoundingBox(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D.PathType.FILL,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const G=[this.minX,this.minY,this.maxX,this.maxY];if(j===D.PathType.STROKE){z||(0,g.unreachable)("Stroke bounding box must include transform.");const N=g.Util.singularValueDecompose2dScale(z),W=N[0]*this.lineWidth/2,it=N[1]*this.lineWidth/2;G[0]-=W,G[1]-=it,G[2]+=W,G[3]+=it}return G}updateClipFromPath(){const j=g.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(j||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(j){this.clipBox=j,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D.PathType.FILL,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return g.Util.intersect(this.clipBox,this.getPathBoundingBox(j,z))}}function H(B,j){if(typeof ImageData<"u"&&j instanceof ImageData){B.putImageData(j,0,0);return}const z=j.height,G=j.width,N=z%R,W=(z-N)/R,it=N===0?W:W+1,at=B.createImageData(G,R);let lt,dt=0;const ft=j.data,mt=at.data;let gt,ot,kt,Ft;if(j.kind===g.ImageKind.GRAYSCALE_1BPP){const At=ft.byteLength,O=new Uint32Array(mt.buffer,0,mt.byteLength>>2),K=O.length,tt=G+7>>3,st=4294967295,ht=g.FeatureTest.isLittleEndian?4278190080:255;for(gt=0;gt<it;gt++){for(kt=gt<W?R:N,lt=0,ot=0;ot<kt;ot++){const _t=At-dt;let xt=0;const wt=_t>tt?G:8*_t-7,Lt=-8&wt;let Pt=0,Rt=0;for(;xt<Lt;xt+=8)Rt=ft[dt++],O[lt++]=128&Rt?st:ht,O[lt++]=64&Rt?st:ht,O[lt++]=32&Rt?st:ht,O[lt++]=16&Rt?st:ht,O[lt++]=8&Rt?st:ht,O[lt++]=4&Rt?st:ht,O[lt++]=2&Rt?st:ht,O[lt++]=1&Rt?st:ht;for(;xt<wt;xt++)Pt===0&&(Rt=ft[dt++],Pt=128),O[lt++]=Rt&Pt?st:ht,Pt>>=1}for(;lt<K;)O[lt++]=0;B.putImageData(at,0,gt*R)}}else if(j.kind===g.ImageKind.RGBA_32BPP){for(ot=0,Ft=G*R*4,gt=0;gt<W;gt++)mt.set(ft.subarray(dt,dt+Ft)),dt+=Ft,B.putImageData(at,0,ot),ot+=R;gt<it&&(Ft=G*N*4,mt.set(ft.subarray(dt,dt+Ft)),B.putImageData(at,0,ot))}else{if(j.kind!==g.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${j.kind}`);for(kt=R,Ft=G*kt,gt=0;gt<it;gt++){for(gt>=W&&(kt=N,Ft=G*kt),lt=0,ot=Ft;ot--;)mt[lt++]=ft[dt++],mt[lt++]=ft[dt++],mt[lt++]=ft[dt++],mt[lt++]=255;B.putImageData(at,0,gt*R)}}}function M(B,j){if(j.bitmap){B.drawImage(j.bitmap,0,0);return}const z=j.height,G=j.width,N=z%R,W=(z-N)/R,it=N===0?W:W+1,at=B.createImageData(G,R);let lt=0;const dt=j.data,ft=at.data;for(let mt=0;mt<it;mt++){const gt=mt<W?R:N;({srcPos:lt}=(0,f.convertBlackAndWhiteToRGBA)({src:dt,srcPos:lt,dest:ft,width:G,height:gt,nonBlackColor:0})),B.putImageData(at,0,mt*R)}}function P(B,j){const z=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const G of z)B[G]!==void 0&&(j[G]=B[G]);B.setLineDash!==void 0&&(j.setLineDash(B.getLineDash()),j.lineDashOffset=B.lineDashOffset)}function U(B){B.strokeStyle=B.fillStyle="#000000",B.fillRule="nonzero",B.globalAlpha=1,B.lineWidth=1,B.lineCap="butt",B.lineJoin="miter",B.miterLimit=10,B.globalCompositeOperation="source-over",B.font="10px sans-serif",B.setLineDash!==void 0&&(B.setLineDash([]),B.lineDashOffset=0),C.isNodeJS||(B.filter="none")}function _(B,j,z,G){const N=B.length;for(let W=3;W<N;W+=4){const it=B[W];if(it===0)B[W-3]=j,B[W-2]=z,B[W-1]=G;else if(it<255){const at=255-it;B[W-3]=B[W-3]*it+j*at>>8,B[W-2]=B[W-2]*it+z*at>>8,B[W-1]=B[W-1]*it+G*at>>8}}}function E(B,j,z){const G=B.length;for(let N=3;N<G;N+=4){const W=z?z[B[N]]:B[N];j[N]=j[N]*W*.00392156862745098|0}}function Y(B,j,z){const G=B.length;for(let N=3;N<G;N+=4){const W=77*B[N-3]+152*B[N-2]+28*B[N-1];j[N]=z?j[N]*z[W>>8]>>8:j[N]*W>>16}}function rt(B,j,z,G){const N=G[0],W=G[1],it=G[2]-N,at=G[3]-W;it!==0&&at!==0&&(function(lt,dt,ft,mt,gt,ot,kt,Ft,At,O,K){const tt=!!ot,st=tt?ot[0]:0,ht=tt?ot[1]:0,_t=tt?ot[2]:0;let xt;xt=gt==="Luminosity"?Y:E;const wt=Math.min(mt,Math.ceil(1048576/ft));for(let Lt=0;Lt<mt;Lt+=wt){const Pt=Math.min(wt,mt-Lt),Rt=lt.getImageData(Ft-O,Lt+(At-K),ft,Pt),Et=dt.getImageData(Ft,Lt+At,ft,Pt);tt&&_(Rt.data,st,ht,_t),xt(Rt.data,Et.data,kt),dt.putImageData(Et,Ft,Lt+At)}}(j.context,z,it,at,j.subtype,j.backdrop,j.transferMap,N,W,j.offsetX,j.offsetY),B.save(),B.globalAlpha=1,B.globalCompositeOperation="source-over",B.setTransform(1,0,0,1,0,0),B.drawImage(z.canvas,0,0),B.restore())}function Z(B,j){const z=g.Util.singularValueDecompose2dScale(B);z[0]=Math.fround(z[0]),z[1]=Math.fround(z[1]);const G=Math.fround((globalThis.devicePixelRatio||1)*y.PixelsPerInch.PDF_TO_CSS_UNITS);return j!==void 0?j:z[0]<=G||z[1]<=G}const V=["butt","round","square"],Q=["miter","round","bevel"],ct={},vt={},pt=class{constructor(B,j,z,G,N,W,it,at){et(this,u),et(this,v);let{optionalContentConfig:lt,markedContentStack:dt=null}=W;this.ctx=B,this.current=new J(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=j,this.objs=z,this.canvasFactory=G,this.filterFactory=N,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=dt||[],this.optionalContentConfig=lt,this.cachedCanvases=new $(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=it,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=at,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(B){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof B=="string"?B.startsWith("g_")?this.commonObjs.get(B):this.objs.get(B):j}beginDrawing(B){let{transform:j,viewport:z,transparency:G=!1,background:N=null}=B;const W=this.ctx.canvas.width,it=this.ctx.canvas.height,at=this.ctx.fillStyle;if(this.ctx.fillStyle=N||"#ffffff",this.ctx.fillRect(0,0,W,it),this.ctx.fillStyle=at,G){const lt=this.cachedCanvases.getCanvas("transparent",W,it);this.compositeCtx=this.ctx,this.transparentCanvas=lt.canvas,this.ctx=lt.context,this.ctx.save(),this.ctx.transform(...(0,y.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),U(this.ctx),j&&(this.ctx.transform(...j),this.outputScaleX=j[0],this.outputScaleY=j[0]),this.ctx.transform(...z.transform),this.viewportScale=z.scale,this.baseTransform=(0,y.getCurrentTransform)(this.ctx)}executeOperatorList(B,j,z,G){const N=B.argsArray,W=B.fnArray;let it=j||0;const at=N.length;if(at===it)return it;const lt=at-it>10&&typeof z=="function",dt=lt?Date.now()+15:0;let ft=0;const mt=this.commonObjs,gt=this.objs;let ot;for(;;){if(G!==void 0&&it===G.nextBreakPoint)return G.breakIt(it,z),it;if(ot=W[it],ot!==g.OPS.dependency)this[ot].apply(this,N[it]);else for(const kt of N[it]){const Ft=kt.startsWith("g_")?mt:gt;if(!Ft.has(kt))return Ft.get(kt,z),it}if(it++,it===at)return it;if(lt&&++ft>10){if(Date.now()>dt)return z(),it;ft=0}}}endDrawing(){nt(this,u,o).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const B of this._cachedBitmapsMap.values()){for(const j of B.values())typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement&&(j.width=j.height=0);B.clear()}this._cachedBitmapsMap.clear(),nt(this,v,F).call(this)}_scaleImage(B,j){const z=B.width,G=B.height;let N,W,it=Math.max(Math.hypot(j[0],j[1]),1),at=Math.max(Math.hypot(j[2],j[3]),1),lt=z,dt=G,ft="prescale1";for(;it>2&&lt>1||at>2&&dt>1;){let mt=lt,gt=dt;it>2&&lt>1&&(mt=lt>=16384?Math.floor(lt/2)-1||1:Math.ceil(lt/2),it/=lt/mt),at>2&&dt>1&&(gt=dt>=16384?Math.floor(dt/2)-1||1:Math.ceil(dt)/2,at/=dt/gt),N=this.cachedCanvases.getCanvas(ft,mt,gt),W=N.context,W.clearRect(0,0,mt,gt),W.drawImage(B,0,0,lt,dt,0,0,mt,gt),B=N.canvas,lt=mt,dt=gt,ft=ft==="prescale1"?"prescale2":"prescale1"}return{img:B,paintWidth:lt,paintHeight:dt}}_createMaskCanvas(B){const j=this.ctx,{width:z,height:G}=B,N=this.current.fillColor,W=this.current.patternFill,it=(0,y.getCurrentTransform)(j);let at,lt,dt,ft;if((B.bitmap||B.data)&&B.count>1){const _t=B.bitmap||B.data.buffer;lt=JSON.stringify(W?it:[it.slice(0,4),N]),at=this._cachedBitmapsMap.get(_t),at||(at=new Map,this._cachedBitmapsMap.set(_t,at));const xt=at.get(lt);if(xt&&!W)return{canvas:xt,offsetX:Math.round(Math.min(it[0],it[2])+it[4]),offsetY:Math.round(Math.min(it[1],it[3])+it[5])};dt=xt}dt||(ft=this.cachedCanvases.getCanvas("maskCanvas",z,G),M(ft.context,B));let mt=g.Util.transform(it,[1/z,0,0,-1/G,0,0]);mt=g.Util.transform(mt,[1,0,0,1,0,-G]);const gt=g.Util.applyTransform([0,0],mt),ot=g.Util.applyTransform([z,G],mt),kt=g.Util.normalizeRect([gt[0],gt[1],ot[0],ot[1]]),Ft=Math.round(kt[2]-kt[0])||1,At=Math.round(kt[3]-kt[1])||1,O=this.cachedCanvases.getCanvas("fillCanvas",Ft,At),K=O.context,tt=Math.min(gt[0],ot[0]),st=Math.min(gt[1],ot[1]);K.translate(-tt,-st),K.transform(...mt),dt||(dt=this._scaleImage(ft.canvas,(0,y.getCurrentTransformInverse)(K)),dt=dt.img,at&&W&&at.set(lt,dt)),K.imageSmoothingEnabled=Z((0,y.getCurrentTransform)(K),B.interpolate),X(K,dt,0,0,dt.width,dt.height,0,0,z,G),K.globalCompositeOperation="source-in";const ht=g.Util.transform((0,y.getCurrentTransformInverse)(K),[1,0,0,1,-tt,-st]);return K.fillStyle=W?N.getPattern(j,this,ht,D.PathType.FILL):N,K.fillRect(0,0,z,G),at&&!W&&(this.cachedCanvases.delete("fillCanvas"),at.set(lt,O.canvas)),{canvas:O.canvas,offsetX:Math.round(tt),offsetY:Math.round(st)}}setLineWidth(B){B!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=B,this.ctx.lineWidth=B}setLineCap(B){this.ctx.lineCap=V[B]}setLineJoin(B){this.ctx.lineJoin=Q[B]}setMiterLimit(B){this.ctx.miterLimit=B}setDash(B,j){const z=this.ctx;z.setLineDash!==void 0&&(z.setLineDash(B),z.lineDashOffset=j)}setRenderingIntent(B){}setFlatness(B){}setGState(B){for(const[j,z]of B)switch(j){case"LW":this.setLineWidth(z);break;case"LC":this.setLineCap(z);break;case"LJ":this.setLineJoin(z);break;case"ML":this.setMiterLimit(z);break;case"D":this.setDash(z[0],z[1]);break;case"RI":this.setRenderingIntent(z);break;case"FL":this.setFlatness(z);break;case"Font":this.setFont(z[0],z[1]);break;case"CA":this.current.strokeAlpha=z;break;case"ca":this.current.fillAlpha=z,this.ctx.globalAlpha=z;break;case"BM":this.ctx.globalCompositeOperation=z;break;case"SMask":this.current.activeSMask=z?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(z)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const B=this.inSMaskMode;this.current.activeSMask&&!B?this.beginSMaskMode():!this.current.activeSMask&&B&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const B=this.ctx.canvas.width,j=this.ctx.canvas.height,z="smaskGroupAt"+this.groupLevel,G=this.cachedCanvases.getCanvas(z,B,j);this.suspendedCtx=this.ctx,this.ctx=G.context;const N=this.ctx;N.setTransform(...(0,y.getCurrentTransform)(this.suspendedCtx)),P(this.suspendedCtx,N),function(W,it){if(W._removeMirroring)throw new Error("Context is already forwarding operations.");W.__originalSave=W.save,W.__originalRestore=W.restore,W.__originalRotate=W.rotate,W.__originalScale=W.scale,W.__originalTranslate=W.translate,W.__originalTransform=W.transform,W.__originalSetTransform=W.setTransform,W.__originalResetTransform=W.resetTransform,W.__originalClip=W.clip,W.__originalMoveTo=W.moveTo,W.__originalLineTo=W.lineTo,W.__originalBezierCurveTo=W.bezierCurveTo,W.__originalRect=W.rect,W.__originalClosePath=W.closePath,W.__originalBeginPath=W.beginPath,W._removeMirroring=()=>{W.save=W.__originalSave,W.restore=W.__originalRestore,W.rotate=W.__originalRotate,W.scale=W.__originalScale,W.translate=W.__originalTranslate,W.transform=W.__originalTransform,W.setTransform=W.__originalSetTransform,W.resetTransform=W.__originalResetTransform,W.clip=W.__originalClip,W.moveTo=W.__originalMoveTo,W.lineTo=W.__originalLineTo,W.bezierCurveTo=W.__originalBezierCurveTo,W.rect=W.__originalRect,W.closePath=W.__originalClosePath,W.beginPath=W.__originalBeginPath,delete W._removeMirroring},W.save=function(){it.save(),this.__originalSave()},W.restore=function(){it.restore(),this.__originalRestore()},W.translate=function(at,lt){it.translate(at,lt),this.__originalTranslate(at,lt)},W.scale=function(at,lt){it.scale(at,lt),this.__originalScale(at,lt)},W.transform=function(at,lt,dt,ft,mt,gt){it.transform(at,lt,dt,ft,mt,gt),this.__originalTransform(at,lt,dt,ft,mt,gt)},W.setTransform=function(at,lt,dt,ft,mt,gt){it.setTransform(at,lt,dt,ft,mt,gt),this.__originalSetTransform(at,lt,dt,ft,mt,gt)},W.resetTransform=function(){it.resetTransform(),this.__originalResetTransform()},W.rotate=function(at){it.rotate(at),this.__originalRotate(at)},W.clip=function(at){it.clip(at),this.__originalClip(at)},W.moveTo=function(at,lt){it.moveTo(at,lt),this.__originalMoveTo(at,lt)},W.lineTo=function(at,lt){it.lineTo(at,lt),this.__originalLineTo(at,lt)},W.bezierCurveTo=function(at,lt,dt,ft,mt,gt){it.bezierCurveTo(at,lt,dt,ft,mt,gt),this.__originalBezierCurveTo(at,lt,dt,ft,mt,gt)},W.rect=function(at,lt,dt,ft){it.rect(at,lt,dt,ft),this.__originalRect(at,lt,dt,ft)},W.closePath=function(){it.closePath(),this.__originalClosePath()},W.beginPath=function(){it.beginPath(),this.__originalBeginPath()}}(N,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),P(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(B){if(!this.current.activeSMask)return;B?(B[0]=Math.floor(B[0]),B[1]=Math.floor(B[1]),B[2]=Math.ceil(B[2]),B[3]=Math.ceil(B[3])):B=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const j=this.current.activeSMask;rt(this.suspendedCtx,j,this.ctx,B),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(P(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const B=this.current;this.stateStack.push(B),this.current=B.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),P(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(B,j,z,G,N,W){this.ctx.transform(B,j,z,G,N,W),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(B,j,z){const G=this.ctx,N=this.current;let W,it,at=N.x,lt=N.y;const dt=(0,y.getCurrentTransform)(G),ft=dt[0]===0&&dt[3]===0||dt[1]===0&&dt[2]===0,mt=ft?z.slice(0):null;for(let gt=0,ot=0,kt=B.length;gt<kt;gt++)switch(0|B[gt]){case g.OPS.rectangle:at=j[ot++],lt=j[ot++];const Ft=j[ot++],At=j[ot++],O=at+Ft,K=lt+At;G.moveTo(at,lt),Ft===0||At===0?G.lineTo(O,K):(G.lineTo(O,lt),G.lineTo(O,K),G.lineTo(at,K)),ft||N.updateRectMinMax(dt,[at,lt,O,K]),G.closePath();break;case g.OPS.moveTo:at=j[ot++],lt=j[ot++],G.moveTo(at,lt),ft||N.updatePathMinMax(dt,at,lt);break;case g.OPS.lineTo:at=j[ot++],lt=j[ot++],G.lineTo(at,lt),ft||N.updatePathMinMax(dt,at,lt);break;case g.OPS.curveTo:W=at,it=lt,at=j[ot+4],lt=j[ot+5],G.bezierCurveTo(j[ot],j[ot+1],j[ot+2],j[ot+3],at,lt),N.updateCurvePathMinMax(dt,W,it,j[ot],j[ot+1],j[ot+2],j[ot+3],at,lt,mt),ot+=6;break;case g.OPS.curveTo2:W=at,it=lt,G.bezierCurveTo(at,lt,j[ot],j[ot+1],j[ot+2],j[ot+3]),N.updateCurvePathMinMax(dt,W,it,at,lt,j[ot],j[ot+1],j[ot+2],j[ot+3],mt),at=j[ot+2],lt=j[ot+3],ot+=4;break;case g.OPS.curveTo3:W=at,it=lt,at=j[ot+2],lt=j[ot+3],G.bezierCurveTo(j[ot],j[ot+1],at,lt,at,lt),N.updateCurvePathMinMax(dt,W,it,j[ot],j[ot+1],at,lt,at,lt,mt),ot+=4;break;case g.OPS.closePath:G.closePath()}ft&&N.updateScalingPathMinMax(dt,mt),N.setCurrentPoint(at,lt)}closePath(){this.ctx.closePath()}stroke(){let B=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];const j=this.ctx,z=this.current.strokeColor;j.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof z=="object"&&z!=null&&z.getPattern?(j.save(),j.strokeStyle=z.getPattern(j,this,(0,y.getCurrentTransformInverse)(j),D.PathType.STROKE),this.rescaleAndStroke(!1),j.restore()):this.rescaleAndStroke(!0)),B&&this.consumePath(this.current.getClippedPathBoundingBox()),j.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let B=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];const j=this.ctx,z=this.current.fillColor;let G=!1;this.current.patternFill&&(j.save(),j.fillStyle=z.getPattern(j,this,(0,y.getCurrentTransformInverse)(j),D.PathType.FILL),G=!0);const N=this.current.getClippedPathBoundingBox();this.contentVisible&&N!==null&&(this.pendingEOFill?(j.fill("evenodd"),this.pendingEOFill=!1):j.fill()),G&&j.restore(),B&&this.consumePath(N)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ct}eoClip(){this.pendingClip=vt}beginText(){this.current.textMatrix=g.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const B=this.pendingTextPaths,j=this.ctx;if(B!==void 0){j.save(),j.beginPath();for(const z of B)j.setTransform(...z.transform),j.translate(z.x,z.y),z.addToPath(j,z.fontSize);j.restore(),j.clip(),j.beginPath(),delete this.pendingTextPaths}else j.beginPath()}setCharSpacing(B){this.current.charSpacing=B}setWordSpacing(B){this.current.wordSpacing=B}setHScale(B){this.current.textHScale=B/100}setLeading(B){this.current.leading=-B}setFont(B,j){var z;const G=this.commonObjs.get(B),N=this.current;if(!G)throw new Error(`Can't find font for ${B}`);if(N.fontMatrix=G.fontMatrix||g.FONT_IDENTITY_MATRIX,N.fontMatrix[0]!==0&&N.fontMatrix[3]!==0||(0,g.warn)("Invalid font matrix for font "+B),j<0?(j=-j,N.fontDirection=-1):N.fontDirection=1,this.current.font=G,this.current.fontSize=j,G.isType3Font)return;const W=G.loadedName||"sans-serif",it=((z=G.systemFontInfo)===null||z===void 0?void 0:z.css)||`"${W}", ${G.fallbackName}`;let at="normal";G.black?at="900":G.bold&&(at="bold");const lt=G.italic?"italic":"normal";let dt=j;j<16?dt=16:j>100&&(dt=100),this.current.fontSizeScale=j/dt,this.ctx.font=`${lt} ${at} ${dt}px ${it}`}setTextRenderingMode(B){this.current.textRenderingMode=B}setTextRise(B){this.current.textRise=B}moveText(B,j){this.current.x=this.current.lineX+=B,this.current.y=this.current.lineY+=j}setLeadingMoveText(B,j){this.setLeading(-j),this.moveText(B,j)}setTextMatrix(B,j,z,G,N,W){this.current.textMatrix=[B,j,z,G,N,W],this.current.textMatrixScale=Math.hypot(B,j),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(B,j,z,G){const N=this.ctx,W=this.current,it=W.font,at=W.textRenderingMode,lt=W.fontSize/W.fontSizeScale,dt=at&g.TextRenderingMode.FILL_STROKE_MASK,ft=!!(at&g.TextRenderingMode.ADD_TO_PATH_FLAG),mt=W.patternFill&&!it.missingFile;let gt;(it.disableFontFace||ft||mt)&&(gt=it.getPathGenerator(this.commonObjs,B)),it.disableFontFace||mt?(N.save(),N.translate(j,z),N.beginPath(),gt(N,lt),G&&N.setTransform(...G),dt!==g.TextRenderingMode.FILL&&dt!==g.TextRenderingMode.FILL_STROKE||N.fill(),dt!==g.TextRenderingMode.STROKE&&dt!==g.TextRenderingMode.FILL_STROKE||N.stroke(),N.restore()):(dt!==g.TextRenderingMode.FILL&&dt!==g.TextRenderingMode.FILL_STROKE||N.fillText(B,j,z),dt!==g.TextRenderingMode.STROKE&&dt!==g.TextRenderingMode.FILL_STROKE||N.strokeText(B,j,z)),ft&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,y.getCurrentTransform)(N),x:j,y:z,fontSize:lt,addToPath:gt})}get isFontSubpixelAAEnabled(){const{context:B}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);B.scale(1.5,1),B.fillText("I",0,10);const j=B.getImageData(0,0,10,10).data;let z=!1;for(let G=3;G<j.length;G+=4)if(j[G]>0&&j[G]<255){z=!0;break}return(0,g.shadow)(this,"isFontSubpixelAAEnabled",z)}showText(B){const j=this.current,z=j.font;if(z.isType3Font)return this.showType3Text(B);const G=j.fontSize;if(G===0)return;const N=this.ctx,W=j.fontSizeScale,it=j.charSpacing,at=j.wordSpacing,lt=j.fontDirection,dt=j.textHScale*lt,ft=B.length,mt=z.vertical,gt=mt?1:-1,ot=z.defaultVMetrics,kt=G*j.fontMatrix[0],Ft=j.textRenderingMode===g.TextRenderingMode.FILL&&!z.disableFontFace&&!j.patternFill;N.save(),N.transform(...j.textMatrix),N.translate(j.x,j.y+j.textRise),lt>0?N.scale(dt,-1):N.scale(dt,1);let At;if(j.patternFill){N.save();const ht=j.fillColor.getPattern(N,this,(0,y.getCurrentTransformInverse)(N),D.PathType.FILL);At=(0,y.getCurrentTransform)(N),N.restore(),N.fillStyle=ht}let O=j.lineWidth;const K=j.textMatrixScale;if(K===0||O===0){const ht=j.textRenderingMode&g.TextRenderingMode.FILL_STROKE_MASK;ht!==g.TextRenderingMode.STROKE&&ht!==g.TextRenderingMode.FILL_STROKE||(O=this.getSinglePixelWidth())}else O/=K;if(W!==1&&(N.scale(W,W),O/=W),N.lineWidth=O,z.isInvalidPDFjsFont){const ht=[];let _t=0;for(const xt of B)ht.push(xt.unicode),_t+=xt.width;N.fillText(ht.join(""),0,0),j.x+=_t*kt*dt,N.restore(),this.compose();return}let tt,st=0;for(tt=0;tt<ft;++tt){const ht=B[tt];if(typeof ht=="number"){st+=gt*ht*G/1e3;continue}let _t=!1;const xt=(ht.isSpace?at:0)+it,wt=ht.fontChar,Lt=ht.accent;let Pt,Rt,Et,Ot=ht.width;if(mt){const Nt=ht.vmetric||ot,zt=-(ht.vmetric?Nt[1]:.5*Ot)*kt,bt=Nt[2]*kt;Ot=Nt?-Nt[0]:Ot,Pt=zt/W,Rt=(st+bt)/W}else Pt=st/W,Rt=0;if(z.remeasure&&Ot>0){const Nt=1e3*N.measureText(wt).width/G*W;if(Ot<Nt&&this.isFontSubpixelAAEnabled){const zt=Ot/Nt;_t=!0,N.save(),N.scale(zt,1),Pt/=zt}else Ot!==Nt&&(Pt+=(Ot-Nt)/2e3*G/W)}if(this.contentVisible&&(ht.isInFont||z.missingFile)){if(Ft&&!Lt)N.fillText(wt,Pt,Rt);else if(this.paintChar(wt,Pt,Rt,At),Lt){const Nt=Pt+G*Lt.offset.x/W,zt=Rt-G*Lt.offset.y/W;this.paintChar(Lt.fontChar,Nt,zt,At)}}Et=mt?Ot*kt-xt*lt:Ot*kt+xt*lt,st+=Et,_t&&N.restore()}mt?j.y-=st:j.x+=st*dt,N.restore(),this.compose()}showType3Text(B){const j=this.ctx,z=this.current,G=z.font,N=z.fontSize,W=z.fontDirection,it=G.vertical?1:-1,at=z.charSpacing,lt=z.wordSpacing,dt=z.textHScale*W,ft=z.fontMatrix||g.FONT_IDENTITY_MATRIX,mt=B.length;let gt,ot,kt,Ft;if(z.textRenderingMode!==g.TextRenderingMode.INVISIBLE&&N!==0){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,j.save(),j.transform(...z.textMatrix),j.translate(z.x,z.y),j.scale(dt,W),gt=0;gt<mt;++gt){if(ot=B[gt],typeof ot=="number"){Ft=it*ot*N/1e3,this.ctx.translate(Ft,0),z.x+=Ft*dt;continue}const At=(ot.isSpace?lt:0)+at,O=G.charProcOperatorList[ot.operatorListId];if(!O){(0,g.warn)(`Type3 character "${ot.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ot,this.save(),j.scale(N,N),j.transform(...ft),this.executeOperatorList(O),this.restore()),kt=g.Util.applyTransform([ot.width,0],ft)[0]*N+At,j.translate(kt,0),z.x+=kt*dt}j.restore(),this.processingType3=null}}setCharWidth(B,j){}setCharWidthAndBounds(B,j,z,G,N,W){this.ctx.rect(z,G,N-z,W-G),this.ctx.clip(),this.endPath()}getColorN_Pattern(B){let j;if(B[0]==="TilingPattern"){const z=B[1],G=this.baseTransform||(0,y.getCurrentTransform)(this.ctx),N={createCanvasGraphics:W=>new pt(W,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};j=new D.TilingPattern(B,z,this.ctx,N,G)}else j=this._getPattern(B[1],B[2]);return j}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(B,j,z){const G=g.Util.makeHexColor(B,j,z);this.ctx.strokeStyle=G,this.current.strokeColor=G}setFillRGBColor(B,j,z){const G=g.Util.makeHexColor(B,j,z);this.ctx.fillStyle=G,this.current.fillColor=G,this.current.patternFill=!1}_getPattern(B){let j,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return this.cachedPatterns.has(B)?j=this.cachedPatterns.get(B):(j=(0,D.getShadingPattern)(this.getObject(B)),this.cachedPatterns.set(B,j)),z&&(j.matrix=z),j}shadingFill(B){if(!this.contentVisible)return;const j=this.ctx;this.save();const z=this._getPattern(B);j.fillStyle=z.getPattern(j,this,(0,y.getCurrentTransformInverse)(j),D.PathType.SHADING);const G=(0,y.getCurrentTransformInverse)(j);if(G){const N=j.canvas,W=N.width,it=N.height,at=g.Util.applyTransform([0,0],G),lt=g.Util.applyTransform([0,it],G),dt=g.Util.applyTransform([W,0],G),ft=g.Util.applyTransform([W,it],G),mt=Math.min(at[0],lt[0],dt[0],ft[0]),gt=Math.min(at[1],lt[1],dt[1],ft[1]),ot=Math.max(at[0],lt[0],dt[0],ft[0]),kt=Math.max(at[1],lt[1],dt[1],ft[1]);this.ctx.fillRect(mt,gt,ot-mt,kt-gt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,g.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,g.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(B,j){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(B)&&B.length===6&&this.transform(...B),this.baseTransform=(0,y.getCurrentTransform)(this.ctx),j)){const z=j[2]-j[0],G=j[3]-j[1];this.ctx.rect(j[0],j[1],z,G),this.current.updateRectMinMax((0,y.getCurrentTransform)(this.ctx),j),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(B){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const j=this.ctx;B.isolated||(0,g.info)("TODO: Support non-isolated groups."),B.knockout&&(0,g.warn)("Knockout groups not supported.");const z=(0,y.getCurrentTransform)(j);if(B.matrix&&j.transform(...B.matrix),!B.bbox)throw new Error("Bounding box is required.");let G=g.Util.getAxialAlignedBoundingBox(B.bbox,(0,y.getCurrentTransform)(j));const N=[0,0,j.canvas.width,j.canvas.height];G=g.Util.intersect(G,N)||[0,0,0,0];const W=Math.floor(G[0]),it=Math.floor(G[1]);let at=Math.max(Math.ceil(G[2])-W,1),lt=Math.max(Math.ceil(G[3])-it,1),dt=1,ft=1;at>q&&(dt=at/q,at=q),lt>q&&(ft=lt/q,lt=q),this.current.startNewPathAndClipBox([0,0,at,lt]);let mt="groupAt"+this.groupLevel;B.smask&&(mt+="_smask_"+this.smaskCounter++%2);const gt=this.cachedCanvases.getCanvas(mt,at,lt),ot=gt.context;ot.scale(1/dt,1/ft),ot.translate(-W,-it),ot.transform(...z),B.smask?this.smaskStack.push({canvas:gt.canvas,context:ot,offsetX:W,offsetY:it,scaleX:dt,scaleY:ft,subtype:B.smask.subtype,backdrop:B.smask.backdrop,transferMap:B.smask.transferMap||null,startTransformInverse:null}):(j.setTransform(1,0,0,1,0,0),j.translate(W,it),j.scale(dt,ft),j.save()),P(j,ot),this.ctx=ot,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(j),this.groupLevel++}endGroup(B){if(!this.contentVisible)return;this.groupLevel--;const j=this.ctx,z=this.groupStack.pop();if(this.ctx=z,this.ctx.imageSmoothingEnabled=!1,B.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const G=(0,y.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...G);const N=g.Util.getAxialAlignedBoundingBox([0,0,j.canvas.width,j.canvas.height],G);this.ctx.drawImage(j.canvas,0,0),this.ctx.restore(),this.compose(N)}}beginAnnotation(B,j,z,G,N){if(nt(this,u,o).call(this),U(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(j)&&j.length===4){const W=j[2]-j[0],it=j[3]-j[1];if(N&&this.annotationCanvasMap){(z=z.slice())[4]-=j[0],z[5]-=j[1],(j=j.slice())[0]=j[1]=0,j[2]=W,j[3]=it;const[at,lt]=g.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(this.ctx)),{viewportScale:dt}=this,ft=Math.ceil(W*this.outputScaleX*dt),mt=Math.ceil(it*this.outputScaleY*dt);this.annotationCanvas=this.canvasFactory.create(ft,mt);const{canvas:gt,context:ot}=this.annotationCanvas;this.annotationCanvasMap.set(B,gt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ot,this.ctx.save(),this.ctx.setTransform(at,0,0,-lt,0,it*lt),U(this.ctx)}else U(this.ctx),this.ctx.rect(j[0],j[1],W,it),this.ctx.clip(),this.endPath()}this.current=new J(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...z),this.transform(...G)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),nt(this,v,F).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(B){if(!this.contentVisible)return;const j=B.count;(B=this.getObject(B.data,B)).count=j;const z=this.ctx,G=this.processingType3;if(G&&(G.compiled===void 0&&(G.compiled=function(it){const{width:at,height:lt}=it;if(at>1e3||lt>1e3)return null;const dt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),ft=at+1;let mt,gt,ot,kt=new Uint8Array(ft*(lt+1));const Ft=at+7&-8;let At=new Uint8Array(Ft*lt),O=0;for(const ht of it.data){let _t=128;for(;_t>0;)At[O++]=ht&_t?0:255,_t>>=1}let K=0;for(O=0,At[O]!==0&&(kt[0]=1,++K),gt=1;gt<at;gt++)At[O]!==At[O+1]&&(kt[gt]=At[O]?2:1,++K),O++;for(At[O]!==0&&(kt[gt]=2,++K),mt=1;mt<lt;mt++){O=mt*Ft,ot=mt*ft,At[O-Ft]!==At[O]&&(kt[ot]=At[O]?1:8,++K);let ht=(At[O]?4:0)+(At[O-Ft]?8:0);for(gt=1;gt<at;gt++)ht=(ht>>2)+(At[O+1]?4:0)+(At[O-Ft+1]?8:0),dt[ht]&&(kt[ot+gt]=dt[ht],++K),O++;if(At[O-Ft]!==At[O]&&(kt[ot+gt]=At[O]?2:4,++K),K>1e3)return null}for(O=Ft*(lt-1),ot=mt*ft,At[O]!==0&&(kt[ot]=8,++K),gt=1;gt<at;gt++)At[O]!==At[O+1]&&(kt[ot+gt]=At[O]?4:8,++K),O++;if(At[O]!==0&&(kt[ot+gt]=4,++K),K>1e3)return null;const tt=new Int32Array([0,ft,-1,0,-ft,0,0,0,1]),st=new Path2D;for(mt=0;K&&mt<=lt;mt++){let ht=mt*ft;const _t=ht+at;for(;ht<_t&&!kt[ht];)ht++;if(ht===_t)continue;st.moveTo(ht%ft,mt);const xt=ht;let wt=kt[ht];do{const Lt=tt[wt];do ht+=Lt;while(!kt[ht]);const Pt=kt[ht];Pt!==5&&Pt!==10?(wt=Pt,kt[ht]=0):(wt=Pt&51*wt>>4,kt[ht]&=wt>>2|wt<<2),st.lineTo(ht%ft,ht/ft|0),kt[ht]||--K}while(xt!==ht);--mt}return At=null,kt=null,function(ht){ht.save(),ht.scale(1/at,-1/lt),ht.translate(0,-lt),ht.fill(st),ht.beginPath(),ht.restore()}}(B)),G.compiled)){G.compiled(z);return}const N=this._createMaskCanvas(B),W=N.canvas;z.save(),z.setTransform(1,0,0,1,0,0),z.drawImage(W,N.offsetX,N.offsetY),z.restore(),this.compose()}paintImageMaskXObjectRepeat(B,j){let z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,N=arguments.length>4?arguments[4]:void 0,W=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;B=this.getObject(B.data,B);const it=this.ctx;it.save();const at=(0,y.getCurrentTransform)(it);it.transform(j,z,G,N,0,0);const lt=this._createMaskCanvas(B);it.setTransform(1,0,0,1,lt.offsetX-at[4],lt.offsetY-at[5]);for(let dt=0,ft=W.length;dt<ft;dt+=2){const mt=g.Util.transform(at,[j,z,G,N,W[dt],W[dt+1]]),[gt,ot]=g.Util.applyTransform([0,0],mt);it.drawImage(lt.canvas,gt,ot)}it.restore(),this.compose()}paintImageMaskXObjectGroup(B){if(!this.contentVisible)return;const j=this.ctx,z=this.current.fillColor,G=this.current.patternFill;for(const N of B){const{data:W,width:it,height:at,transform:lt}=N,dt=this.cachedCanvases.getCanvas("maskCanvas",it,at),ft=dt.context;ft.save(),M(ft,this.getObject(W,N)),ft.globalCompositeOperation="source-in",ft.fillStyle=G?z.getPattern(ft,this,(0,y.getCurrentTransformInverse)(j),D.PathType.FILL):z,ft.fillRect(0,0,it,at),ft.restore(),j.save(),j.transform(...lt),j.scale(1,-1),X(j,dt.canvas,0,0,it,at,0,-1,1,1),j.restore()}this.compose()}paintImageXObject(B){if(!this.contentVisible)return;const j=this.getObject(B);j?this.paintInlineImageXObject(j):(0,g.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(B,j,z,G){if(!this.contentVisible)return;const N=this.getObject(B);if(!N){(0,g.warn)("Dependent image isn't ready yet");return}const W=N.width,it=N.height,at=[];for(let lt=0,dt=G.length;lt<dt;lt+=2)at.push({transform:[j,0,0,z,G[lt],G[lt+1]],x:0,y:0,w:W,h:it});this.paintInlineImageXObjectGroup(N,at)}applyTransferMapsToCanvas(B){return this.current.transferMaps!=="none"&&(B.filter=this.current.transferMaps,B.drawImage(B.canvas,0,0),B.filter="none"),B.canvas}applyTransferMapsToBitmap(B){if(this.current.transferMaps==="none")return B.bitmap;const{bitmap:j,width:z,height:G}=B,N=this.cachedCanvases.getCanvas("inlineImage",z,G),W=N.context;return W.filter=this.current.transferMaps,W.drawImage(j,0,0),W.filter="none",N.canvas}paintInlineImageXObject(B){if(!this.contentVisible)return;const j=B.width,z=B.height,G=this.ctx;this.save(),C.isNodeJS||(G.filter="none"),G.scale(1/j,-1/z);let N;if(B.bitmap)N=this.applyTransferMapsToBitmap(B);else if(typeof HTMLElement=="function"&&B instanceof HTMLElement||!B.data)N=B;else{const it=this.cachedCanvases.getCanvas("inlineImage",j,z).context;H(it,B),N=this.applyTransferMapsToCanvas(it)}const W=this._scaleImage(N,(0,y.getCurrentTransformInverse)(G));G.imageSmoothingEnabled=Z((0,y.getCurrentTransform)(G),B.interpolate),X(G,W.img,0,0,W.paintWidth,W.paintHeight,0,-z,j,z),this.compose(),this.restore()}paintInlineImageXObjectGroup(B,j){if(!this.contentVisible)return;const z=this.ctx;let G;if(B.bitmap)G=B.bitmap;else{const N=B.width,W=B.height,it=this.cachedCanvases.getCanvas("inlineImage",N,W).context;H(it,B),G=this.applyTransferMapsToCanvas(it)}for(const N of j)z.save(),z.transform(...N.transform),z.scale(1,-1),X(z,G,N.x,N.y,N.w,N.h,0,-1,1,1),z.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(B){}markPointProps(B,j){}beginMarkedContent(B){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(B,j){B==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(j)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(B){const j=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(B);const z=this.ctx;this.pendingClip&&(j||(this.pendingClip===vt?z.clip("evenodd"):z.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),z.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const B=(0,y.getCurrentTransform)(this.ctx);if(B[1]===0&&B[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(B[0]),Math.abs(B[3]));else{const j=Math.abs(B[0]*B[3]-B[2]*B[1]),z=Math.hypot(B[0],B[2]),G=Math.hypot(B[1],B[3]);this._cachedGetSinglePixelWidth=Math.max(z,G)/j}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:B}=this.current,{a:j,b:z,c:G,d:N}=this.ctx.getTransform();let W,it;if(z===0&&G===0){const at=Math.abs(j),lt=Math.abs(N);if(at===lt)if(B===0)W=it=1/at;else{const dt=at*B;W=it=dt<1?1/dt:1}else if(B===0)W=1/at,it=1/lt;else{const dt=at*B,ft=lt*B;W=dt<1?1/dt:1,it=ft<1?1/ft:1}}else{const at=Math.abs(j*N-z*G),lt=Math.hypot(j,z),dt=Math.hypot(G,N);if(B===0)W=dt/at,it=lt/at;else{const ft=B*at;W=dt>ft?dt/ft:1,it=lt>ft?lt/ft:1}}this._cachedScaleForStroking[0]=W,this._cachedScaleForStroking[1]=it}return this._cachedScaleForStroking}rescaleAndStroke(B){const{ctx:j}=this,{lineWidth:z}=this.current,[G,N]=this.getScaleForStroking();if(j.lineWidth=z||1,G===1&&N===1){j.stroke();return}const W=j.getLineDash();if(B&&j.save(),j.scale(G,N),W.length>0){const it=Math.max(G,N);j.setLineDash(W.map(at=>at/it)),j.lineDashOffset/=it}j.stroke(),B&&j.restore()}isContentVisible(){for(let B=this.markedContentStack.length-1;B>=0;B--)if(!this.markedContentStack[B].visible)return!1;return!0}};let Tt=pt;u=new WeakSet,o=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},v=new WeakSet,F=function(){if(this.pageColors){const B=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(B!=="none"){const j=this.ctx.filter;this.ctx.filter=B,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=j}}},s.CanvasGraphics=Tt;for(const B in g.OPS)Tt.prototype[B]!==void 0&&(Tt.prototype[g.OPS[B]]=Tt.prototype[B])},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=function(H){switch(H[0]){case"RadialAxial":return new y(H);case"Mesh":return new C(H);case"Dummy":return new q}throw new Error(`Unknown IR type: ${H[0]}`)};var u=r(1),o=r(142);const v={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=v;function F(H,M){if(!M)return;const P=M[2]-M[0],U=M[3]-M[1],_=new Path2D;_.rect(M[0],M[1],P,U),H.clip(_)}class g{constructor(){this.constructor===g&&(0,u.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,u.unreachable)("Abstract method `getPattern` called.")}}class y extends g{constructor(M){super(),this._type=M[1],this._bbox=M[2],this._colorStops=M[3],this._p0=M[4],this._p1=M[5],this._r0=M[6],this._r1=M[7],this.matrix=null}_createGradient(M){let P;this._type==="axial"?P=M.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(P=M.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const U of this._colorStops)P.addColorStop(U[0],U[1]);return P}getPattern(M,P,U,_){let E;if(_===v.STROKE||_===v.FILL){const Y=P.current.getClippedPathBoundingBox(_,(0,o.getCurrentTransform)(M))||[0,0,0,0],rt=Math.ceil(Y[2]-Y[0])||1,Z=Math.ceil(Y[3]-Y[1])||1,V=P.cachedCanvases.getCanvas("pattern",rt,Z,!0),Q=V.context;Q.clearRect(0,0,Q.canvas.width,Q.canvas.height),Q.beginPath(),Q.rect(0,0,Q.canvas.width,Q.canvas.height),Q.translate(-Y[0],-Y[1]),U=u.Util.transform(U,[1,0,0,1,Y[0],Y[1]]),Q.transform(...P.baseTransform),this.matrix&&Q.transform(...this.matrix),F(Q,this._bbox),Q.fillStyle=this._createGradient(Q),Q.fill(),E=M.createPattern(V.canvas,"no-repeat");const ct=new DOMMatrix(U);E.setTransform(ct)}else F(M,this._bbox),E=this._createGradient(M);return E}}function D(H,M,P,U,_,E,Y,rt){const Z=M.coords,V=M.colors,Q=H.data,ct=4*H.width;let vt;Z[P+1]>Z[U+1]&&(vt=P,P=U,U=vt,vt=E,E=Y,Y=vt),Z[U+1]>Z[_+1]&&(vt=U,U=_,_=vt,vt=Y,Y=rt,rt=vt),Z[P+1]>Z[U+1]&&(vt=P,P=U,U=vt,vt=E,E=Y,Y=vt);const pt=(Z[P]+M.offsetX)*M.scaleX,Tt=(Z[P+1]+M.offsetY)*M.scaleY,B=(Z[U]+M.offsetX)*M.scaleX,j=(Z[U+1]+M.offsetY)*M.scaleY,z=(Z[_]+M.offsetX)*M.scaleX,G=(Z[_+1]+M.offsetY)*M.scaleY;if(Tt>=G)return;const N=V[E],W=V[E+1],it=V[E+2],at=V[Y],lt=V[Y+1],dt=V[Y+2],ft=V[rt],mt=V[rt+1],gt=V[rt+2],ot=Math.round(Tt),kt=Math.round(G);let Ft,At,O,K,tt,st,ht,_t;for(let xt=ot;xt<=kt;xt++){if(xt<j){let Et;Et=xt<Tt?0:(Tt-xt)/(Tt-j),Ft=pt-(pt-B)*Et,At=N-(N-at)*Et,O=W-(W-lt)*Et,K=it-(it-dt)*Et}else{let Et;Et=xt>G?1:j===G?0:(j-xt)/(j-G),Ft=B-(B-z)*Et,At=at-(at-ft)*Et,O=lt-(lt-mt)*Et,K=dt-(dt-gt)*Et}let wt;wt=xt<Tt?0:xt>G?1:(Tt-xt)/(Tt-G),tt=pt-(pt-z)*wt,st=N-(N-ft)*wt,ht=W-(W-mt)*wt,_t=it-(it-gt)*wt;const Lt=Math.round(Math.min(Ft,tt)),Pt=Math.round(Math.max(Ft,tt));let Rt=ct*xt+4*Lt;for(let Et=Lt;Et<=Pt;Et++)wt=(Ft-Et)/(Ft-tt),wt<0?wt=0:wt>1&&(wt=1),Q[Rt++]=At-(At-st)*wt|0,Q[Rt++]=O-(O-ht)*wt|0,Q[Rt++]=K-(K-_t)*wt|0,Q[Rt++]=255}}function f(H,M,P){const U=M.coords,_=M.colors;let E,Y;switch(M.type){case"lattice":const rt=M.verticesPerRow,Z=Math.floor(U.length/rt)-1,V=rt-1;for(E=0;E<Z;E++){let Q=E*rt;for(let ct=0;ct<V;ct++,Q++)D(H,P,U[Q],U[Q+1],U[Q+rt],_[Q],_[Q+1],_[Q+rt]),D(H,P,U[Q+rt+1],U[Q+1],U[Q+rt],_[Q+rt+1],_[Q+1],_[Q+rt])}break;case"triangles":for(E=0,Y=U.length;E<Y;E+=3)D(H,P,U[E],U[E+1],U[E+2],_[E],_[E+1],_[E+2]);break;default:throw new Error("illegal figure")}}class C extends g{constructor(M){super(),this._coords=M[2],this._colors=M[3],this._figures=M[4],this._bounds=M[5],this._bbox=M[7],this._background=M[8],this.matrix=null}_createMeshCanvas(M,P,U){const _=Math.floor(this._bounds[0]),E=Math.floor(this._bounds[1]),Y=Math.ceil(this._bounds[2])-_,rt=Math.ceil(this._bounds[3])-E,Z=Math.min(Math.ceil(Math.abs(Y*M[0]*1.1)),3e3),V=Math.min(Math.ceil(Math.abs(rt*M[1]*1.1)),3e3),Q=Y/Z,ct=rt/V,vt={coords:this._coords,colors:this._colors,offsetX:-_,offsetY:-E,scaleX:1/Q,scaleY:1/ct},pt=Z+4,Tt=V+4,B=U.getCanvas("mesh",pt,Tt,!1),j=B.context,z=j.createImageData(Z,V);if(P){const G=z.data;for(let N=0,W=G.length;N<W;N+=4)G[N]=P[0],G[N+1]=P[1],G[N+2]=P[2],G[N+3]=255}for(const G of this._figures)f(z,G,vt);return j.putImageData(z,2,2),{canvas:B.canvas,offsetX:_-2*Q,offsetY:E-2*ct,scaleX:Q,scaleY:ct}}getPattern(M,P,U,_){F(M,this._bbox);let E;if(_===v.SHADING)E=u.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(M));else if(E=u.Util.singularValueDecompose2dScale(P.baseTransform),this.matrix){const rt=u.Util.singularValueDecompose2dScale(this.matrix);E=[E[0]*rt[0],E[1]*rt[1]]}const Y=this._createMeshCanvas(E,_===v.SHADING?null:this._background,P.cachedCanvases);return _!==v.SHADING&&(M.setTransform(...P.baseTransform),this.matrix&&M.transform(...this.matrix)),M.translate(Y.offsetX,Y.offsetY),M.scale(Y.scaleX,Y.scaleY),M.createPattern(Y.canvas,"no-repeat")}}class q extends g{getPattern(){return"hotpink"}}const R=1,$=2,X=class{constructor(H,M,P,U,_){this.operatorList=H[2],this.matrix=H[3]||[1,0,0,1,0,0],this.bbox=H[4],this.xstep=H[5],this.ystep=H[6],this.paintType=H[7],this.tilingType=H[8],this.color=M,this.ctx=P,this.canvasGraphicsFactory=U,this.baseTransform=_}createPatternCanvas(H){const M=this.operatorList,P=this.bbox,U=this.xstep,_=this.ystep,E=this.paintType,Y=this.tilingType,rt=this.color,Z=this.canvasGraphicsFactory;(0,u.info)("TilingType: "+Y);const V=P[0],Q=P[1],ct=P[2],vt=P[3],pt=u.Util.singularValueDecompose2dScale(this.matrix),Tt=u.Util.singularValueDecompose2dScale(this.baseTransform),B=[pt[0]*Tt[0],pt[1]*Tt[1]],j=this.getSizeAndScale(U,this.ctx.canvas.width,B[0]),z=this.getSizeAndScale(_,this.ctx.canvas.height,B[1]),G=H.cachedCanvases.getCanvas("pattern",j.size,z.size,!0),N=G.context,W=Z.createCanvasGraphics(N);W.groupLevel=H.groupLevel,this.setFillAndStrokeStyleToContext(W,E,rt);let it=V,at=Q,lt=ct,dt=vt;return V<0&&(it=0,lt+=Math.abs(V)),Q<0&&(at=0,dt+=Math.abs(Q)),N.translate(-j.scale*it,-z.scale*at),W.transform(j.scale,0,0,z.scale,0,0),N.save(),this.clipBbox(W,it,at,lt,dt),W.baseTransform=(0,o.getCurrentTransform)(W.ctx),W.executeOperatorList(M),W.endDrawing(),{canvas:G.canvas,scaleX:j.scale,scaleY:z.scale,offsetX:it,offsetY:at}}getSizeAndScale(H,M,P){H=Math.abs(H);const U=Math.max(X.MAX_PATTERN_SIZE,M);let _=Math.ceil(H*P);return _>=U?_=U:P=_/H,{scale:P,size:_}}clipBbox(H,M,P,U,_){const E=U-M,Y=_-P;H.ctx.rect(M,P,E,Y),H.current.updateRectMinMax((0,o.getCurrentTransform)(H.ctx),[M,P,U,_]),H.clip(),H.endPath()}setFillAndStrokeStyleToContext(H,M,P){const U=H.ctx,_=H.current;switch(M){case R:const E=this.ctx;U.fillStyle=E.fillStyle,U.strokeStyle=E.strokeStyle,_.fillColor=E.fillStyle,_.strokeColor=E.strokeStyle;break;case $:const Y=u.Util.makeHexColor(P[0],P[1],P[2]);U.fillStyle=Y,U.strokeStyle=Y,_.fillColor=Y,_.strokeColor=Y;break;default:throw new u.FormatError(`Unsupported paint type: ${M}`)}}getPattern(H,M,P,U){let _=P;U!==v.SHADING&&(_=u.Util.transform(_,M.baseTransform),this.matrix&&(_=u.Util.transform(_,this.matrix)));const E=this.createPatternCanvas(M);let Y=new DOMMatrix(_);Y=Y.translate(E.offsetX,E.offsetY),Y=Y.scale(1/E.scaleX,1/E.scaleY);const rt=H.createPattern(E.canvas,"repeat");return rt.setTransform(Y),rt}};let J=X;It(J,"MAX_PATTERN_SIZE",3e3),s.TilingPattern=J},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.convertBlackAndWhiteToRGBA=o,s.convertToRGBA=function(v){switch(v.kind){case u.ImageKind.GRAYSCALE_1BPP:return o(v);case u.ImageKind.RGB_24BPP:return function(F){let{src:g,srcPos:y=0,dest:D,destPos:f=0,width:C,height:q}=F,R=0;const $=g.length>>2,X=new Uint32Array(g.buffer,y,$);if(u.FeatureTest.isLittleEndian){for(;R<$-2;R+=3,f+=4){const J=X[R],H=X[R+1],M=X[R+2];D[f]=4278190080|J,D[f+1]=J>>>24|H<<8|4278190080,D[f+2]=H>>>16|M<<16|4278190080,D[f+3]=M>>>8|4278190080}for(let J=4*R,H=g.length;J<H;J+=3)D[f++]=g[J]|g[J+1]<<8|g[J+2]<<16|4278190080}else{for(;R<$-2;R+=3,f+=4){const J=X[R],H=X[R+1],M=X[R+2];D[f]=255|J,D[f+1]=J<<24|H>>>8|255,D[f+2]=H<<16|M>>>16|255,D[f+3]=M<<8|255}for(let J=4*R,H=g.length;J<H;J+=3)D[f++]=g[J]<<24|g[J+1]<<16|g[J+2]<<8|255}return{srcPos:y,destPos:f}}(v)}return null},s.grayToRGBA=function(v,F){if(u.FeatureTest.isLittleEndian)for(let g=0,y=v.length;g<y;g++)F[g]=65793*v[g]|4278190080;else for(let g=0,y=v.length;g<y;g++)F[g]=16843008*v[g]|255};var u=r(1);function o(v){let{src:F,srcPos:g=0,dest:y,width:D,height:f,nonBlackColor:C=4294967295,inverseDecode:q=!1}=v;const R=u.FeatureTest.isLittleEndian?4278190080:255,[$,X]=q?[C,R]:[R,C],J=D>>3,H=7&D,M=F.length;y=new Uint32Array(y.buffer);let P=0;for(let U=0;U<f;U++){for(const E=g+J;g<E;g++){const Y=g<M?F[g]:255;y[P++]=128&Y?X:$,y[P++]=64&Y?X:$,y[P++]=32&Y?X:$,y[P++]=16&Y?X:$,y[P++]=8&Y?X:$,y[P++]=4&Y?X:$,y[P++]=2&Y?X:$,y[P++]=1&Y?X:$}if(H===0)continue;const _=g<M?F[g++]:255;for(let E=0;E<H;E++)y[P++]=_&1<<7-E?X:$}return{srcPos:g,destPos:P}}},(S,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const r=Object.create(null);s.GlobalWorkerOptions=r,r.workerPort=null,r.workerSrc=""},(S,s,r)=>{var u,o,v,F,g,y,D;Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var f=r(1);const C=1,q=2,R=1,$=2,X=3,J=4,H=5,M=6,P=7,U=8;function _(E){switch(E instanceof Error||typeof E=="object"&&E!==null||(0,f.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),E.name){case"AbortException":return new f.AbortException(E.message);case"MissingPDFException":return new f.MissingPDFException(E.message);case"PasswordException":return new f.PasswordException(E.message,E.code);case"UnexpectedResponseException":return new f.UnexpectedResponseException(E.message,E.status);case"UnknownErrorException":return new f.UnknownErrorException(E.message,E.details);default:return new f.UnknownErrorException(E.message,E.toString())}}s.MessageHandler=(D=class{constructor(E,Y,rt){et(this,u),et(this,v),et(this,g),this.sourceName=E,this.targetName=Y,this.comObj=rt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Z=>{const V=Z.data;if(V.targetName!==this.sourceName)return;if(V.stream){nt(this,v,F).call(this,V);return}if(V.callback){const ct=V.callbackId,vt=this.callbackCapabilities[ct];if(!vt)throw new Error(`Cannot resolve callback ${ct}`);if(delete this.callbackCapabilities[ct],V.callback===C)vt.resolve(V.data);else{if(V.callback!==q)throw new Error("Unexpected callback case");vt.reject(_(V.reason))}return}const Q=this.actionHandler[V.action];if(!Q)throw new Error(`Unknown action from worker: ${V.action}`);if(V.callbackId){const ct=this.sourceName,vt=V.sourceName;new Promise(function(pt){pt(Q(V.data))}).then(function(pt){rt.postMessage({sourceName:ct,targetName:vt,callback:C,callbackId:V.callbackId,data:pt})},function(pt){rt.postMessage({sourceName:ct,targetName:vt,callback:q,callbackId:V.callbackId,reason:_(pt)})})}else V.streamId?nt(this,u,o).call(this,V):Q(V.data)},rt.addEventListener("message",this._onComObjOnMessage)}on(E,Y){const rt=this.actionHandler;if(rt[E])throw new Error(`There is already an actionName called "${E}"`);rt[E]=Y}send(E,Y,rt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:E,data:Y},rt)}sendWithPromise(E,Y,rt){const Z=this.callbackId++,V=new f.PromiseCapability;this.callbackCapabilities[Z]=V;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:E,callbackId:Z,data:Y},rt)}catch(Q){V.reject(Q)}return V.promise}sendWithStream(E,Y,rt,Z){const V=this.streamId++,Q=this.sourceName,ct=this.targetName,vt=this.comObj;return new ReadableStream({start:pt=>{const Tt=new f.PromiseCapability;return this.streamControllers[V]={controller:pt,startCall:Tt,pullCall:null,cancelCall:null,isClosed:!1},vt.postMessage({sourceName:Q,targetName:ct,action:E,streamId:V,data:Y,desiredSize:pt.desiredSize},Z),Tt.promise},pull:pt=>{const Tt=new f.PromiseCapability;return this.streamControllers[V].pullCall=Tt,vt.postMessage({sourceName:Q,targetName:ct,stream:M,streamId:V,desiredSize:pt.desiredSize}),Tt.promise},cancel:pt=>{(0,f.assert)(pt instanceof Error,"cancel must have a valid reason");const Tt=new f.PromiseCapability;return this.streamControllers[V].cancelCall=Tt,this.streamControllers[V].isClosed=!0,vt.postMessage({sourceName:Q,targetName:ct,stream:R,streamId:V,reason:_(pt)}),Tt.promise}},rt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}},u=new WeakSet,o=function(E){const Y=E.streamId,rt=this.sourceName,Z=E.sourceName,V=this.comObj,Q=this,ct=this.actionHandler[E.action],vt={enqueue(pt){let Tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,B=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const j=this.desiredSize;this.desiredSize-=Tt,j>0&&this.desiredSize<=0&&(this.sinkCapability=new f.PromiseCapability,this.ready=this.sinkCapability.promise),V.postMessage({sourceName:rt,targetName:Z,stream:J,streamId:Y,chunk:pt},B)},close(){this.isCancelled||(this.isCancelled=!0,V.postMessage({sourceName:rt,targetName:Z,stream:X,streamId:Y}),delete Q.streamSinks[Y])},error(pt){(0,f.assert)(pt instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,V.postMessage({sourceName:rt,targetName:Z,stream:H,streamId:Y,reason:_(pt)}))},sinkCapability:new f.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:E.desiredSize,ready:null};vt.sinkCapability.resolve(),vt.ready=vt.sinkCapability.promise,this.streamSinks[Y]=vt,new Promise(function(pt){pt(ct(E.data,vt))}).then(function(){V.postMessage({sourceName:rt,targetName:Z,stream:U,streamId:Y,success:!0})},function(pt){V.postMessage({sourceName:rt,targetName:Z,stream:U,streamId:Y,reason:_(pt)})})},v=new WeakSet,F=function(E){const Y=E.streamId,rt=this.sourceName,Z=E.sourceName,V=this.comObj,Q=this.streamControllers[Y],ct=this.streamSinks[Y];switch(E.stream){case U:E.success?Q.startCall.resolve():Q.startCall.reject(_(E.reason));break;case P:E.success?Q.pullCall.resolve():Q.pullCall.reject(_(E.reason));break;case M:if(!ct){V.postMessage({sourceName:rt,targetName:Z,stream:P,streamId:Y,success:!0});break}ct.desiredSize<=0&&E.desiredSize>0&&ct.sinkCapability.resolve(),ct.desiredSize=E.desiredSize,new Promise(function(vt){var pt;vt((pt=ct.onPull)===null||pt===void 0?void 0:pt.call(ct))}).then(function(){V.postMessage({sourceName:rt,targetName:Z,stream:P,streamId:Y,success:!0})},function(vt){V.postMessage({sourceName:rt,targetName:Z,stream:P,streamId:Y,reason:_(vt)})});break;case J:if((0,f.assert)(Q,"enqueue should have stream controller"),Q.isClosed)break;Q.controller.enqueue(E.chunk);break;case X:if((0,f.assert)(Q,"close should have stream controller"),Q.isClosed)break;Q.isClosed=!0,Q.controller.close(),nt(this,g,y).call(this,Q,Y);break;case H:(0,f.assert)(Q,"error should have stream controller"),Q.controller.error(_(E.reason)),nt(this,g,y).call(this,Q,Y);break;case $:E.success?Q.cancelCall.resolve():Q.cancelCall.reject(_(E.reason)),nt(this,g,y).call(this,Q,Y);break;case R:if(!ct)break;new Promise(function(vt){var pt;vt((pt=ct.onCancel)===null||pt===void 0?void 0:pt.call(ct,_(E.reason)))}).then(function(){V.postMessage({sourceName:rt,targetName:Z,stream:$,streamId:Y,success:!0})},function(vt){V.postMessage({sourceName:rt,targetName:Z,stream:$,streamId:Y,reason:_(vt)})}),ct.sinkCapability.reject(_(E.reason)),ct.isCancelled=!0,delete this.streamSinks[Y];break;default:throw new Error("Unexpected stream case")}},g=new WeakSet,y=async function(E,Y){var rt,Z,V;await Promise.allSettled([(rt=E.startCall)===null||rt===void 0?void 0:rt.promise,(Z=E.pullCall)===null||Z===void 0?void 0:Z.promise,(V=E.cancelCall)===null||V===void 0?void 0:V.promise]),delete this.streamControllers[Y]},D)},(S,s,r)=>{var u,o,v;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var F=r(1);s.Metadata=(v=class{constructor(g){et(this,u,void 0),et(this,o,void 0);let{parsedData:y,rawData:D}=g;ut(this,u,y),ut(this,o,D)}getRaw(){return T(this,o)}get(g){return T(this,u).get(g)??null}getAll(){return(0,F.objectFromMap)(T(this,u))}has(g){return T(this,u).has(g)}},u=new WeakMap,o=new WeakMap,v)},(S,s,r)=>{var u,o,v,F,g,y,D,f;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var C=r(1),q=r(144);const R=Symbol("INTERNAL");class ${constructor(J,H){et(this,u,!0),this.name=J,this.intent=H}get visible(){return T(this,u)}_setVisible(J,H){J!==R&&(0,C.unreachable)("Internal method `_setVisible` called."),ut(this,u,H)}}u=new WeakMap,s.OptionalContentConfig=(f=class{constructor(X){if(et(this,y),et(this,o,null),et(this,v,new Map),et(this,F,null),et(this,g,null),this.name=null,this.creator=null,X!==null){this.name=X.name,this.creator=X.creator,ut(this,g,X.order);for(const J of X.groups)T(this,v).set(J.id,new $(J.name,J.intent));if(X.baseState==="OFF")for(const J of T(this,v).values())J._setVisible(R,!1);for(const J of X.on)T(this,v).get(J)._setVisible(R,!0);for(const J of X.off)T(this,v).get(J)._setVisible(R,!1);ut(this,F,this.getHash())}}isVisible(X){if(T(this,v).size===0)return!0;if(!X)return(0,C.warn)("Optional content group not defined."),!0;if(X.type==="OCG")return T(this,v).has(X.id)?T(this,v).get(X.id).visible:((0,C.warn)(`Optional content group not found: ${X.id}`),!0);if(X.type==="OCMD"){if(X.expression)return nt(this,y,D).call(this,X.expression);if(!X.policy||X.policy==="AnyOn"){for(const J of X.ids){if(!T(this,v).has(J))return(0,C.warn)(`Optional content group not found: ${J}`),!0;if(T(this,v).get(J).visible)return!0}return!1}if(X.policy==="AllOn"){for(const J of X.ids){if(!T(this,v).has(J))return(0,C.warn)(`Optional content group not found: ${J}`),!0;if(!T(this,v).get(J).visible)return!1}return!0}if(X.policy==="AnyOff"){for(const J of X.ids){if(!T(this,v).has(J))return(0,C.warn)(`Optional content group not found: ${J}`),!0;if(!T(this,v).get(J).visible)return!0}return!1}if(X.policy==="AllOff"){for(const J of X.ids){if(!T(this,v).has(J))return(0,C.warn)(`Optional content group not found: ${J}`),!0;if(T(this,v).get(J).visible)return!1}return!0}return(0,C.warn)(`Unknown optional content policy ${X.policy}.`),!0}return(0,C.warn)(`Unknown group type ${X.type}.`),!0}setVisibility(X){let J=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];T(this,v).has(X)?(T(this,v).get(X)._setVisible(R,!!J),ut(this,o,null)):(0,C.warn)(`Optional content group not found: ${X}`)}get hasInitialVisibility(){return this.getHash()===T(this,F)}getOrder(){return T(this,v).size?T(this,g)?T(this,g).slice():[...T(this,v).keys()]:null}getGroups(){return T(this,v).size>0?(0,C.objectFromMap)(T(this,v)):null}getGroup(X){return T(this,v).get(X)||null}getHash(){if(T(this,o)!==null)return T(this,o);const X=new q.MurmurHash3_64;for(const[J,H]of T(this,v))X.update(`${J}:${H.visible}`);return ut(this,o,X.hexdigest())}},o=new WeakMap,v=new WeakMap,F=new WeakMap,g=new WeakMap,y=new WeakSet,D=function(X){const J=X.length;if(J<2)return!0;const H=X[0];for(let M=1;M<J;M++){const P=X[M];let U;if(Array.isArray(P))U=nt(this,y,D).call(this,P);else{if(!T(this,v).has(P))return(0,C.warn)(`Optional content group not found: ${P}`),!0;U=T(this,v).get(P).visible}switch(H){case"And":if(!U)return!1;break;case"Or":if(U)return!0;break;case"Not":return!U;default:return!0}}return H==="And"},f)},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var u=r(1),o=r(142);s.PDFDataTransportStream=class{constructor(g,y){let{length:D,initialData:f,progressiveDone:C=!1,contentDispositionFilename:q=null,disableRange:R=!1,disableStream:$=!1}=g;if((0,u.assert)(y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=C,this._contentDispositionFilename=q,(f==null?void 0:f.length)>0){const X=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;this._queuedChunks.push(X)}this._pdfDataRangeTransport=y,this._isStreamingSupported=!$,this._isRangeSupported=!R,this._contentLength=D,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((X,J)=>{this._onReceiveData({begin:X,chunk:J})}),this._pdfDataRangeTransport.addProgressListener((X,J)=>{this._onProgress({loaded:X,total:J})}),this._pdfDataRangeTransport.addProgressiveReadListener(X=>{this._onReceiveData({chunk:X})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(g){let{begin:y,chunk:D}=g;const f=D instanceof Uint8Array&&D.byteLength===D.buffer.byteLength?D.buffer:new Uint8Array(D).buffer;if(y===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(f):this._queuedChunks.push(f);else{const C=this._rangeReaders.some(function(q){return q._begin!==y?!1:(q._enqueue(f),!0)});(0,u.assert)(C,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)===null||g===void 0?void 0:g._loaded)??0}_onProgress(g){if(g.total===void 0){var y,D;(y=this._rangeReaders[0])===null||y===void 0||(D=y.onProgress)===null||D===void 0||D.call(y,{loaded:g.loaded})}else{var f,C;(f=this._fullRequestReader)===null||f===void 0||(C=f.onProgress)===null||C===void 0||C.call(f,{loaded:g.loaded,total:g.total})}}_onProgressiveDone(){var g;(g=this._fullRequestReader)===null||g===void 0||g.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const y=this._rangeReaders.indexOf(g);y>=0&&this._rangeReaders.splice(y,1)}getFullReader(){(0,u.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new v(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,y){if(y<=this._progressiveDataLength)return null;const D=new F(this,g,y);return this._pdfDataRangeTransport.requestDataRange(g,y),this._rangeReaders.push(D),D}cancelAllRequests(g){var y;(y=this._fullRequestReader)===null||y===void 0||y.cancel(g);for(const D of this._rangeReaders.slice(0))D.cancel(g);this._pdfDataRangeTransport.abort()}};class v{constructor(y,D){let f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=y,this._done=f||!1,this._filename=(0,o.isPdfFile)(C)?C:null,this._queuedChunks=D||[],this._loaded=0;for(const q of this._queuedChunks)this._loaded+=q.byteLength;this._requests=[],this._headersReady=Promise.resolve(),y._fullRequestReader=this,this.onProgress=null}_enqueue(y){this._done||(this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunks.push(y),this._loaded+=y.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=new u.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class F{constructor(y,D,f){this._stream=y,this._begin=D,this._end=f,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(y){if(!this._done){if(this._requests.length===0)this._queuedChunk=y;else{this._requests.shift().resolve({value:y,done:!1});for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const D=this._queuedChunk;return this._queuedChunk=null,{value:D,done:!1}}if(this._done)return{value:void 0,done:!0};const y=new u.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const D of this._requests)D.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(S,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class r{static textContent(o){const v=[],F={items:v,styles:Object.create(null)};return function g(y){var D;if(!y)return;let f=null;const C=y.name;if(C==="#text")f=y.value;else{if(!r.shouldBuildText(C))return;y!=null&&(D=y.attributes)!==null&&D!==void 0&&D.textContent?f=y.attributes.textContent:y.value&&(f=y.value)}if(f!==null&&v.push({str:f}),y.children)for(const q of y.children)g(q)}(o),F}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}s.XfaText=r},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeFilterFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var u=r(143);const o=function(D){return new Promise((f,C)=>{require$$6.readFile(D,(q,R)=>{!q&&R?f(new Uint8Array(R)):C(new Error(q))})})};class v extends u.BaseFilterFactory{}s.NodeFilterFactory=v;class F extends u.BaseCanvasFactory{_createCanvas(f,C){return require$$6.createCanvas(f,C)}}s.NodeCanvasFactory=F;class g extends u.BaseCMapReaderFactory{_fetchData(f,C){return o(f).then(q=>({cMapData:q,compressionType:C}))}}s.NodeCMapReaderFactory=g;class y extends u.BaseStandardFontDataFactory{_fetchData(f){return o(f)}}s.NodeStandardFontDataFactory=y},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var u=r(1),o=r(157);const v=require$$6,F=require$$6,g=require$$6,y=require$$6,D=/^file:\/\/\/[a-zA-Z]:\//;s.PDFNodeStream=class{constructor(H){this.source=H,this.url=function(M){const P=y.parse(M);return P.protocol==="file:"||P.host?P:/^[a-z]:[/\\]/i.test(M)?y.parse(`file:///${M}`):(P.host||(P.protocol="file:"),P)}(H.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&H.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var H;return((H=this._fullRequestReader)===null||H===void 0?void 0:H._loaded)??0}getFullReader(){return(0,u.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new X(this):new R(this),this._fullRequestReader}getRangeReader(H,M){if(M<=this._progressiveDataLength)return null;const P=this.isFsUrl?new J(this,H,M):new $(this,H,M);return this._rangeRequestReaders.push(P),P}cancelAllRequests(H){var M;(M=this._fullRequestReader)===null||M===void 0||M.cancel(H);for(const P of this._rangeRequestReaders.slice(0))P.cancel(H)}};class f{constructor(M){this._url=M.url,this._done=!1,this._storedError=null,this.onProgress=null;const P=M.source;this._contentLength=P.length,this._loaded=0,this._filename=null,this._disableRange=P.disableRange||!1,this._rangeChunkSize=P.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!P.disableStream,this._isRangeSupported=!P.disableRange,this._readableStream=null,this._readCapability=new u.PromiseCapability,this._headersCapability=new u.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var M;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const P=this._readableStream.read();return P===null?(this._readCapability=new u.PromiseCapability,this.read()):(this._loaded+=P.length,(M=this.onProgress)===null||M===void 0||M.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(P).buffer,done:!1})}cancel(M){this._readableStream?this._readableStream.destroy(M):this._error(M)}_error(M){this._storedError=M,this._readCapability.resolve()}_setReadableStream(M){this._readableStream=M,M.on("readable",()=>{this._readCapability.resolve()}),M.on("end",()=>{M.destroy(),this._done=!0,this._readCapability.resolve()}),M.on("error",P=>{this._error(P)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new u.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class C{constructor(M){this._url=M.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new u.PromiseCapability;const P=M.source;this._isStreamingSupported=!P.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var M;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const P=this._readableStream.read();return P===null?(this._readCapability=new u.PromiseCapability,this.read()):(this._loaded+=P.length,(M=this.onProgress)===null||M===void 0||M.call(this,{loaded:this._loaded}),{value:new Uint8Array(P).buffer,done:!1})}cancel(M){this._readableStream?this._readableStream.destroy(M):this._error(M)}_error(M){this._storedError=M,this._readCapability.resolve()}_setReadableStream(M){this._readableStream=M,M.on("readable",()=>{this._readCapability.resolve()}),M.on("end",()=>{M.destroy(),this._done=!0,this._readCapability.resolve()}),M.on("error",P=>{this._error(P)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function q(H,M){return{protocol:H.protocol,auth:H.auth,host:H.hostname,port:H.port,path:H.path,method:"GET",headers:M}}class R extends f{constructor(M){super(M);const P=U=>{if(U.statusCode===404){const rt=new u.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=rt,this._headersCapability.reject(rt);return}this._headersCapability.resolve(),this._setReadableStream(U);const _=rt=>this._readableStream.headers[rt.toLowerCase()],{allowRangeRequests:E,suggestedLength:Y}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:M.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=E,this._contentLength=Y||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(_)};this._request=null,this._url.protocol==="http:"?this._request=F.request(q(this._url,M.httpHeaders),P):this._request=g.request(q(this._url,M.httpHeaders),P),this._request.on("error",U=>{this._storedError=U,this._headersCapability.reject(U)}),this._request.end()}}class $ extends C{constructor(M,P,U){super(M),this._httpHeaders={};for(const E in M.httpHeaders){const Y=M.httpHeaders[E];Y!==void 0&&(this._httpHeaders[E]=Y)}this._httpHeaders.Range=`bytes=${P}-${U-1}`;const _=E=>{if(E.statusCode!==404)this._setReadableStream(E);else{const Y=new u.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Y}};this._request=null,this._url.protocol==="http:"?this._request=F.request(q(this._url,this._httpHeaders),_):this._request=g.request(q(this._url,this._httpHeaders),_),this._request.on("error",E=>{this._storedError=E}),this._request.end()}}class X extends f{constructor(M){super(M);let P=decodeURIComponent(this._url.path);D.test(this._url.href)&&(P=P.replace(/^\//,"")),v.lstat(P,(U,_)=>{U?(U.code==="ENOENT"&&(U=new u.MissingPDFException(`Missing PDF "${P}".`)),this._storedError=U,this._headersCapability.reject(U)):(this._contentLength=_.size,this._setReadableStream(v.createReadStream(P)),this._headersCapability.resolve())})}}class J extends C{constructor(M,P,U){super(M);let _=decodeURIComponent(this._url.path);D.test(this._url.href)&&(_=_.replace(/^\//,"")),this._setReadableStream(v.createReadStream(_,{start:P,end:U-1}))}}},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=function(F,g){return F===404||F===0&&g.startsWith("file:")?new u.MissingPDFException('Missing PDF "'+g+'".'):new u.UnexpectedResponseException(`Unexpected server response (${F}) while retrieving PDF "${g}".`,F)},s.extractFilenameFromHeader=function(F){const g=F("Content-Disposition");if(g){let y=(0,o.getFilenameFromContentDispositionHeader)(g);if(y.includes("%"))try{y=decodeURIComponent(y)}catch{}if((0,v.isPdfFile)(y))return y}return null},s.validateRangeRequestCapabilities=function(F){let{getResponseHeader:g,isHttp:y,rangeChunkSize:D,disableRange:f}=F;const C={allowRangeRequests:!1,suggestedLength:void 0},q=parseInt(g("Content-Length"),10);return!Number.isInteger(q)||(C.suggestedLength=q,q<=2*D)||f||!y||g("Accept-Ranges")!=="bytes"||(g("Content-Encoding")||"identity")!=="identity"||(C.allowRangeRequests=!0),C},s.validateResponseStatus=function(F){return F===200||F===206};var u=r(1),o=r(158),v=r(142)},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=function(o){let v=!0,F=g("filename\\*","i").exec(o);if(F){F=F[1];let R=f(F);return R=unescape(R),R=C(R),R=q(R),D(R)}if(F=function(R){const $=[];let X;const J=g("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(X=J.exec(R))!==null;){let[,M,P,U]=X;if(M=parseInt(M,10),M in $){if(M===0)break}else $[M]=[P,U]}const H=[];for(let M=0;M<$.length&&M in $;++M){let[P,U]=$[M];U=f(U),P&&(U=unescape(U),M===0&&(U=C(U))),H.push(U)}return H.join("")}(o),F)return D(q(F));if(F=g("filename","i").exec(o),F){F=F[1];let R=f(F);return R=q(R),D(R)}function g(R,$){return new RegExp("(?:^|;)\\s*"+R+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',$)}function y(R,$){if(R){if(!/^[\x00-\xFF]+$/.test($))return $;try{const X=new TextDecoder(R,{fatal:!0}),J=(0,u.stringToBytes)($);$=X.decode(J),v=!1}catch{}}return $}function D(R){return v&&/[\x80-\xff]/.test(R)&&(R=y("utf-8",R),v&&(R=y("iso-8859-1",R))),R}function f(R){if(R.startsWith('"')){const $=R.slice(1).split('\\"');for(let X=0;X<$.length;++X){const J=$[X].indexOf('"');J!==-1&&($[X]=$[X].slice(0,J),$.length=X+1),$[X]=$[X].replaceAll(/\\(.)/g,"$1")}R=$.join('"')}return R}function C(R){const $=R.indexOf("'");return $===-1?R:y(R.slice(0,$),R.slice($+1).replace(/^[^']*'/,""))}function q(R){return!R.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(R)?R:R.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function($,X,J,H){if(J==="q"||J==="Q")return y(X,H=(H=H.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(M,P){return String.fromCharCode(parseInt(P,16))}));try{H=atob(H)}catch{}return y(X,H)})}return""};var u=r(1)},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var u=r(1),o=r(157);class v{constructor(D){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=D,this.isHttp=/^https?:/i.test(D),this.httpHeaders=this.isHttp&&f.httpHeaders||Object.create(null),this.withCredentials=f.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(D,f,C){const q={begin:D,end:f};for(const R in C)q[R]=C[R];return this.request(q)}requestFull(D){return this.request(D)}request(D){const f=new XMLHttpRequest,C=this.currXhrId++,q=this.pendingRequests[C]={xhr:f};f.open("GET",this.url),f.withCredentials=this.withCredentials;for(const R in this.httpHeaders){const $=this.httpHeaders[R];$!==void 0&&f.setRequestHeader(R,$)}return this.isHttp&&"begin"in D&&"end"in D?(f.setRequestHeader("Range",`bytes=${D.begin}-${D.end-1}`),q.expectedStatus=206):q.expectedStatus=200,f.responseType="arraybuffer",D.onError&&(f.onerror=function(R){D.onError(f.status)}),f.onreadystatechange=this.onStateChange.bind(this,C),f.onprogress=this.onProgress.bind(this,C),q.onHeadersReceived=D.onHeadersReceived,q.onDone=D.onDone,q.onError=D.onError,q.onProgress=D.onProgress,f.send(null),C}onProgress(D,f){var C;const q=this.pendingRequests[D];q&&((C=q.onProgress)===null||C===void 0||C.call(q,f))}onStateChange(D,f){const C=this.pendingRequests[D];if(!C)return;const q=C.xhr;if(q.readyState>=2&&C.onHeadersReceived&&(C.onHeadersReceived(),delete C.onHeadersReceived),q.readyState!==4||!(D in this.pendingRequests))return;if(delete this.pendingRequests[D],q.status===0&&this.isHttp){var R;(R=C.onError)===null||R===void 0||R.call(C,q.status);return}const $=q.status||200;if(!($===200&&C.expectedStatus===206)&&$!==C.expectedStatus){var X;(X=C.onError)===null||X===void 0||X.call(C,q.status);return}const J=function(M){const P=M.response;return typeof P!="string"?P:(0,u.stringToBytes)(P).buffer}(q);if($===206){const M=q.getResponseHeader("Content-Range"),P=/bytes (\d+)-(\d+)\/(\d+)/.exec(M);C.onDone({begin:parseInt(P[1],10),chunk:J})}else if(J)C.onDone({begin:0,chunk:J});else{var H;(H=C.onError)===null||H===void 0||H.call(C,q.status)}}getRequestXhr(D){return this.pendingRequests[D].xhr}isPendingRequest(D){return D in this.pendingRequests}abortRequest(D){const f=this.pendingRequests[D].xhr;delete this.pendingRequests[D],f.abort()}}s.PDFNetworkStream=class{constructor(y){this._source=y,this._manager=new v(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const D=this._rangeRequestReaders.indexOf(y);D>=0&&this._rangeRequestReaders.splice(D,1)}getFullReader(){return(0,u.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new F(this._manager,this._source),this._fullRequestReader}getRangeReader(y,D){const f=new g(this._manager,y,D);return f.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(f),f}cancelAllRequests(y){var D;(D=this._fullRequestReader)===null||D===void 0||D.cancel(y);for(const f of this._rangeRequestReaders.slice(0))f.cancel(y)}};class F{constructor(D,f){this._manager=D;const C={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=f.url,this._fullRequestId=D.requestFull(C),this._headersReceivedCapability=new u.PromiseCapability,this._disableRange=f.disableRange||!1,this._contentLength=f.length,this._rangeChunkSize=f.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const D=this._fullRequestId,f=this._manager.getRequestXhr(D),C=$=>f.getResponseHeader($),{allowRangeRequests:q,suggestedLength:R}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});q&&(this._isRangeSupported=!0),this._contentLength=R||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(C),this._isRangeSupported&&this._manager.abortRequest(D),this._headersReceivedCapability.resolve()}_onDone(D){if(D&&(this._requests.length>0?this._requests.shift().resolve({value:D.chunk,done:!1}):this._cachedChunks.push(D.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(D){this._storedError=(0,o.createResponseStatusError)(D,this._url),this._headersReceivedCapability.reject(this._storedError);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(D){var f;(f=this.onProgress)===null||f===void 0||f.call(this,{loaded:D.loaded,total:D.lengthComputable?D.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const D=new u.PromiseCapability;return this._requests.push(D),D.promise}cancel(D){this._done=!0,this._headersReceivedCapability.reject(D);for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class g{constructor(D,f,C){this._manager=D;const q={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=D.url,this._requestId=D.requestRange(f,C,q),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var D;(D=this.onClosed)===null||D===void 0||D.call(this,this)}_onDone(D){const f=D.chunk;this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunk=f,this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(D){this._storedError=(0,o.createResponseStatusError)(D,this._url);for(const f of this._requests)f.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(D){if(!this.isStreamingSupported){var f;(f=this.onProgress)===null||f===void 0||f.call(this,{loaded:D.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const D=new u.PromiseCapability;return this._requests.push(D),D.promise}cancel(D){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var u=r(1),o=r(157);function v(f,C,q){return{method:"GET",headers:f,signal:q.signal,mode:"cors",credentials:C?"include":"same-origin",redirect:"follow"}}function F(f){const C=new Headers;for(const q in f){const R=f[q];R!==void 0&&C.append(q,R)}return C}function g(f){return f instanceof Uint8Array?f.buffer:f instanceof ArrayBuffer?f:((0,u.warn)(`getArrayBuffer - unexpected data format: ${f}`),new Uint8Array(f).buffer)}s.PDFFetchStream=class{constructor(f){this.source=f,this.isHttp=/^https?:/i.test(f.url),this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)===null||f===void 0?void 0:f._loaded)??0}getFullReader(){return(0,u.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new y(this),this._fullRequestReader}getRangeReader(f,C){if(C<=this._progressiveDataLength)return null;const q=new D(this,f,C);return this._rangeRequestReaders.push(q),q}cancelAllRequests(f){var C;(C=this._fullRequestReader)===null||C===void 0||C.cancel(f);for(const q of this._rangeRequestReaders.slice(0))q.cancel(f)}};class y{constructor(C){this._stream=C,this._reader=null,this._loaded=0,this._filename=null;const q=C.source;this._withCredentials=q.withCredentials||!1,this._contentLength=q.length,this._headersCapability=new u.PromiseCapability,this._disableRange=q.disableRange||!1,this._rangeChunkSize=q.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!q.disableStream,this._isRangeSupported=!q.disableRange,this._headers=F(this._stream.httpHeaders);const R=q.url;fetch(R,v(this._headers,this._withCredentials,this._abortController)).then($=>{if(!(0,o.validateResponseStatus)($.status))throw(0,o.createResponseStatusError)($.status,R);this._reader=$.body.getReader(),this._headersCapability.resolve();const X=M=>$.headers.get(M),{allowRangeRequests:J,suggestedLength:H}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:X,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=J,this._contentLength=H||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(X),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new u.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var C;await this._headersCapability.promise;const{value:q,done:R}=await this._reader.read();return R?{value:q,done:R}:(this._loaded+=q.byteLength,(C=this.onProgress)===null||C===void 0||C.call(this,{loaded:this._loaded,total:this._contentLength}),{value:g(q),done:!1})}cancel(C){var q;(q=this._reader)===null||q===void 0||q.cancel(C),this._abortController.abort()}}class D{constructor(C,q,R){this._stream=C,this._reader=null,this._loaded=0;const $=C.source;this._withCredentials=$.withCredentials||!1,this._readCapability=new u.PromiseCapability,this._isStreamingSupported=!$.disableStream,this._abortController=new AbortController,this._headers=F(this._stream.httpHeaders),this._headers.append("Range",`bytes=${q}-${R-1}`);const X=$.url;fetch(X,v(this._headers,this._withCredentials,this._abortController)).then(J=>{if(!(0,o.validateResponseStatus)(J.status))throw(0,o.createResponseStatusError)(J.status,X);this._readCapability.resolve(),this._reader=J.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var C;await this._readCapability.promise;const{value:q,done:R}=await this._reader.read();return R?{value:q,done:R}:(this._loaded+=q.byteLength,(C=this.onProgress)===null||C===void 0||C.call(this,{loaded:this._loaded}),{value:g(q),done:!1})}cancel(C){var q;(q=this._reader)===null||q===void 0||q.cancel(C),this._abortController.abort()}}},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=function(q){!q.textContentSource&&(q.textContent||q.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),q.textContentSource=q.textContent||q.textContentStream);const{container:R,viewport:$}=q,X=getComputedStyle(R),J=X.getPropertyValue("visibility"),H=parseFloat(X.getPropertyValue("--scale-factor"));J==="visible"&&(!H||Math.abs(H-$.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const M=new C(q);return M._render(),M},s.updateTextLayer=function(q){let{container:R,viewport:$,textDivs:X,textDivProperties:J,isOffscreenCanvasSupported:H,mustRotate:M=!0,mustRescale:P=!0}=q;if(M&&(0,o.setLayerDimensions)(R,{rotation:$.rotation}),P){const U=y(0,H),_={prevFontSize:null,prevFontFamily:null,div:null,scale:$.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:U};for(const E of X)_.properties=J.get(E),_.div=E,f(_)}};var u=r(1),o=r(142);const v=30,F=.8,g=new Map;function y(q,R){let $;if(R&&u.FeatureTest.isOffscreenCanvasSupported)$=new OffscreenCanvas(q,q).getContext("2d",{alpha:!1});else{const X=document.createElement("canvas");X.width=X.height=q,$=X.getContext("2d",{alpha:!1})}return $}function D(q,R,$){const X=document.createElement("span"),J={angle:0,canvasWidth:0,hasText:R.str!=="",hasEOL:R.hasEOL,fontSize:0};q._textDivs.push(X);const H=u.Util.transform(q._transform,R.transform);let M=Math.atan2(H[1],H[0]);const P=$[R.fontName];P.vertical&&(M+=Math.PI/2);const U=Math.hypot(H[2],H[3]),_=U*function(Q,ct){const vt=g.get(Q);if(vt)return vt;const pt=y(v,ct);pt.font=`${v}px ${Q}`;const Tt=pt.measureText("");let B=Tt.fontBoundingBoxAscent,j=Math.abs(Tt.fontBoundingBoxDescent);if(B){const G=B/(B+j);return g.set(Q,G),pt.canvas.width=pt.canvas.height=0,G}pt.strokeStyle="red",pt.clearRect(0,0,v,v),pt.strokeText("g",0,0);let z=pt.getImageData(0,0,v,v).data;j=0;for(let G=z.length-1-3;G>=0;G-=4)if(z[G]>0){j=Math.ceil(G/4/v);break}pt.clearRect(0,0,v,v),pt.strokeText("A",0,v),z=pt.getImageData(0,0,v,v).data,B=0;for(let G=0,N=z.length;G<N;G+=4)if(z[G]>0){B=v-Math.floor(G/4/v);break}if(pt.canvas.width=pt.canvas.height=0,B){const G=B/(B+j);return g.set(Q,G),G}return g.set(Q,F),F}(P.fontFamily,q._isOffscreenCanvasSupported);let E,Y;M===0?(E=H[4],Y=H[5]-_):(E=H[4]+_*Math.sin(M),Y=H[5]-_*Math.cos(M));const rt="calc(var(--scale-factor)*",Z=X.style;q._container===q._rootContainer?(Z.left=`${(100*E/q._pageWidth).toFixed(2)}%`,Z.top=`${(100*Y/q._pageHeight).toFixed(2)}%`):(Z.left=`${rt}${E.toFixed(2)}px)`,Z.top=`${rt}${Y.toFixed(2)}px)`),Z.fontSize=`${rt}${U.toFixed(2)}px)`,Z.fontFamily=P.fontFamily,J.fontSize=U,X.setAttribute("role","presentation"),X.textContent=R.str,X.dir=R.dir,q._fontInspectorEnabled&&(X.dataset.fontName=R.fontName),M!==0&&(J.angle=M*(180/Math.PI));let V=!1;if(R.str.length>1)V=!0;else if(R.str!==" "&&R.transform[0]!==R.transform[3]){const Q=Math.abs(R.transform[0]),ct=Math.abs(R.transform[3]);Q!==ct&&Math.max(Q,ct)/Math.min(Q,ct)>1.5&&(V=!0)}V&&(J.canvasWidth=P.vertical?R.height:R.width),q._textDivProperties.set(X,J),q._isReadableStream&&q._layoutText(X)}function f(q){const{div:R,scale:$,properties:X,ctx:J,prevFontSize:H,prevFontFamily:M}=q,{style:P}=R;let U="";if(X.canvasWidth!==0&&X.hasText){const{fontFamily:_}=P,{canvasWidth:E,fontSize:Y}=X;(H!==Y||M!==_)&&(J.font=`${Y*$}px ${_}`,q.prevFontSize=Y,q.prevFontFamily=_);const{width:rt}=J.measureText(R.textContent);rt>0&&(U=`scaleX(${E*$/rt})`)}X.angle!==0&&(U=`rotate(${X.angle}deg) ${U}`),U.length>0&&(P.transform=U)}class C{constructor(R){var $;let{textContentSource:X,container:J,viewport:H,textDivs:M,textDivProperties:P,textContentItemsStr:U,isOffscreenCanvasSupported:_}=R;this._textContentSource=X,this._isReadableStream=X instanceof ReadableStream,this._container=this._rootContainer=J,this._textDivs=M||[],this._textContentItemsStr=U||[],this._isOffscreenCanvasSupported=_,this._fontInspectorEnabled=!(($=globalThis.FontInspector)===null||$===void 0||!$.enabled),this._reader=null,this._textDivProperties=P||new WeakMap,this._canceled=!1,this._capability=new u.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:H.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y(0,_)};const{pageWidth:E,pageHeight:Y,pageX:rt,pageY:Z}=H.rawDims;this._transform=[1,0,0,-1,-rt,Z+Y],this._pageWidth=E,this._pageHeight=Y,(0,o.setLayerDimensions)(J,H),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new u.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new u.AbortException("TextLayer task cancelled."))}_processItems(R,$){for(const X of R)if(X.str!==void 0)this._textContentItemsStr.push(X.str),D(this,X,$);else if(X.type==="beginMarkedContentProps"||X.type==="beginMarkedContent"){const J=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),X.id!==null&&this._container.setAttribute("id",`${X.id}`),J.append(this._container)}else X.type==="endMarkedContent"&&(this._container=this._container.parentNode)}_layoutText(R){const $=this._layoutTextParams.properties=this._textDivProperties.get(R);if(this._layoutTextParams.div=R,f(this._layoutTextParams),$.hasText&&this._container.append(R),$.hasEOL){const X=document.createElement("br");X.setAttribute("role","presentation"),this._container.append(X)}}_render(){const R=new u.PromiseCapability;let $=Object.create(null);if(this._isReadableStream){const X=()=>{this._reader.read().then(J=>{let{value:H,done:M}=J;M?R.resolve():(Object.assign($,H.styles),this._processItems(H.items,$),X())},R.reject)};this._reader=this._textContentSource.getReader(),X()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:X,styles:J}=this._textContentSource;this._processItems(X,J),R.resolve()}}R.promise.then(()=>{$=null,function(X){if(X._canceled)return;const J=X._textDivs,H=X._capability;if(J.length>1e5)H.resolve();else{if(!X._isReadableStream)for(const M of J)X._layoutText(M);H.resolve()}}(this)},this._capability.reject)}}s.TextLayerRenderTask=C},(S,s,r)=>{var u,o,v,F,g,y,D,f,C,q,R,$,X,J,H,M;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var P=r(1),U=r(141),_=r(163),E=r(164),Y=r(142);const rt=class{constructor(V){et(this,C),et(this,R),et(this,X),et(this,H),et(this,u,void 0),et(this,o,!1),et(this,v,this.pointerup.bind(this)),et(this,F,this.pointerdown.bind(this)),et(this,g,new Map),et(this,y,!1),et(this,D,!1),et(this,f,void 0),rt._initialized||(rt._initialized=!0,_.FreeTextEditor.initialize(V.l10n),E.InkEditor.initialize(V.l10n)),V.uiManager.registerEditorTypes([_.FreeTextEditor,E.InkEditor]),ut(this,f,V.uiManager),this.pageIndex=V.pageIndex,this.div=V.div,ut(this,u,V.accessibilityManager),T(this,f).addLayer(this)}get isEmpty(){return T(this,g).size===0}updateToolbar(V){T(this,f).updateToolbar(V)}updateMode(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T(this,f).getMode();nt(this,H,M).call(this),V===P.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),T(this,f).unselectAll(),V!==P.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",V===P.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",V===P.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(V){if(!(!V&&T(this,f).getMode()!==P.AnnotationEditorType.INK)){if(!V){for(const Q of T(this,g).values())if(Q.isEmpty()){Q.setInBackground();return}}nt(this,X,J).call(this,{offsetX:0,offsetY:0}).setInBackground()}}setEditingState(V){T(this,f).setEditingState(V)}addCommands(V){T(this,f).addCommands(V)}enable(){this.div.style.pointerEvents="auto";for(const V of T(this,g).values())V.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const V of T(this,g).values())V.disableEditing();nt(this,H,M).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(V){T(this,f).getActive()!==V&&T(this,f).setActiveEditor(V)}enableClick(){this.div.addEventListener("pointerdown",T(this,F)),this.div.addEventListener("pointerup",T(this,v))}disableClick(){this.div.removeEventListener("pointerdown",T(this,F)),this.div.removeEventListener("pointerup",T(this,v))}attach(V){T(this,g).set(V.id,V)}detach(V){var Q;T(this,g).delete(V.id),(Q=T(this,u))===null||Q===void 0||Q.removePointerInTextLayer(V.contentDiv)}remove(V){T(this,f).removeEditor(V),this.detach(V),V.div.style.display="none",setTimeout(()=>{V.div.style.display="",V.div.remove(),V.isAttachedToDOM=!1,document.activeElement===document.body&&T(this,f).focusMainContainer()},0),T(this,D)||this.addInkEditorIfNeeded(!1)}add(V){if(nt(this,C,q).call(this,V),T(this,f).addEditor(V),this.attach(V),!V.isAttachedToDOM){const Q=V.render();this.div.append(Q),V.isAttachedToDOM=!0}this.moveEditorInDOM(V),V.onceAdded(),T(this,f).addToAnnotationStorage(V)}moveEditorInDOM(V){var Q;(Q=T(this,u))===null||Q===void 0||Q.moveElementInDOM(this.div,V.div,V.contentDiv,!0)}addOrRebuild(V){V.needsToBeRebuilt()?V.rebuild():this.add(V)}addANewEditor(V){this.addCommands({cmd:()=>{this.addOrRebuild(V)},undo:()=>{V.remove()},mustExec:!0})}addUndoableEditor(V){this.addCommands({cmd:()=>{this.addOrRebuild(V)},undo:()=>{V.remove()},mustExec:!1})}getNextId(){return T(this,f).getId()}deserialize(V){switch(V.annotationType){case P.AnnotationEditorType.FREETEXT:return _.FreeTextEditor.deserialize(V,this,T(this,f));case P.AnnotationEditorType.INK:return E.InkEditor.deserialize(V,this,T(this,f))}return null}setSelected(V){T(this,f).setSelected(V)}toggleSelected(V){T(this,f).toggleSelected(V)}isSelected(V){return T(this,f).isSelected(V)}unselect(V){T(this,f).unselect(V)}pointerup(V){const{isMac:Q}=P.FeatureTest.platform;!(V.button!==0||V.ctrlKey&&Q)&&V.target===this.div&&T(this,y)&&(ut(this,y,!1),T(this,o)?nt(this,X,J).call(this,V):ut(this,o,!0))}pointerdown(V){const{isMac:Q}=P.FeatureTest.platform;if(V.button!==0||V.ctrlKey&&Q||V.target!==this.div)return;ut(this,y,!0);const ct=T(this,f).getActive();ut(this,o,!ct||ct.isEmpty())}drop(V){const Q=V.dataTransfer.getData("text/plain"),ct=T(this,f).getEditor(Q);if(!ct)return;V.preventDefault(),V.dataTransfer.dropEffect="move",nt(this,C,q).call(this,ct);const vt=this.div.getBoundingClientRect(),pt=V.clientX-vt.x,Tt=V.clientY-vt.y;ct.translate(pt-ct.startX,Tt-ct.startY),this.moveEditorInDOM(ct),ct.div.focus()}dragover(V){V.preventDefault()}destroy(){var V;((V=T(this,f).getActive())===null||V===void 0?void 0:V.parent)===this&&T(this,f).setActiveEditor(null);for(const ct of T(this,g).values()){var Q;(Q=T(this,u))===null||Q===void 0||Q.removePointerInTextLayer(ct.contentDiv),ct.setParent(null),ct.isAttachedToDOM=!1,ct.div.remove()}this.div=null,T(this,g).clear(),T(this,f).removeLayer(this)}render(V){let{viewport:Q}=V;this.viewport=Q,(0,Y.setLayerDimensions)(this.div,Q),(0,U.bindEvents)(this,this.div,["dragover","drop"]);for(const ct of T(this,f).getEditors(this.pageIndex))this.add(ct);this.updateMode()}update(V){let{viewport:Q}=V;T(this,f).commitOrRemove(),this.viewport=Q,(0,Y.setLayerDimensions)(this.div,{rotation:Q.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:V,pageHeight:Q}=this.viewport.rawDims;return[V,Q]}};let Z=rt;u=new WeakMap,o=new WeakMap,v=new WeakMap,F=new WeakMap,g=new WeakMap,y=new WeakMap,D=new WeakMap,f=new WeakMap,C=new WeakSet,q=function(V){var Q;V.parent!==this&&(this.attach(V),(Q=V.parent)===null||Q===void 0||Q.detach(V),V.setParent(this),V.div&&V.isAttachedToDOM&&(V.div.remove(),this.div.append(V.div)))},R=new WeakSet,$=function(V){switch(T(this,f).getMode()){case P.AnnotationEditorType.FREETEXT:return new _.FreeTextEditor(V);case P.AnnotationEditorType.INK:return new E.InkEditor(V)}return null},X=new WeakSet,J=function(V){const Q=this.getNextId(),ct=nt(this,R,$).call(this,{parent:this,id:Q,x:V.offsetX,y:V.offsetY,uiManager:T(this,f)});return ct&&this.add(ct),ct},H=new WeakSet,M=function(){ut(this,D,!0);for(const V of T(this,g).values())V.isEmpty()&&V.remove();ut(this,D,!1)},It(Z,"_initialized",!1),s.AnnotationEditorLayer=Z},(S,s,r)=>{var u,o,v,F,g,y,D,f,C,q,R,$,X,J,H,M,P;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var U=r(1),_=r(141),E=r(140);const Y=class extends E.AnnotationEditor{constructor(Z){super({...Z,name:"freeTextEditor"}),et(this,q),et(this,$),et(this,J),et(this,M),et(this,u,this.editorDivBlur.bind(this)),et(this,o,this.editorDivFocus.bind(this)),et(this,v,this.editorDivInput.bind(this)),et(this,F,this.editorDivKeydown.bind(this)),et(this,g,void 0),et(this,y,""),et(this,D,`${this.id}-editor`),et(this,f,!1),et(this,C,void 0),ut(this,g,Z.color||Y._defaultColor||E.AnnotationEditor._defaultLineColor),ut(this,C,Z.fontSize||Y._defaultFontSize)}static initialize(Z){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(Q=>[Q,Z.get(Q)]));const V=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(V.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Z,V){switch(Z){case U.AnnotationEditorParamsType.FREETEXT_SIZE:Y._defaultFontSize=V;break;case U.AnnotationEditorParamsType.FREETEXT_COLOR:Y._defaultColor=V}}updateParams(Z,V){switch(Z){case U.AnnotationEditorParamsType.FREETEXT_SIZE:nt(this,q,R).call(this,V);break;case U.AnnotationEditorParamsType.FREETEXT_COLOR:nt(this,$,X).call(this,V)}}static get defaultPropertiesToUpdate(){return[[U.AnnotationEditorParamsType.FREETEXT_SIZE,Y._defaultFontSize],[U.AnnotationEditorParamsType.FREETEXT_COLOR,Y._defaultColor||E.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[U.AnnotationEditorParamsType.FREETEXT_SIZE,T(this,C)],[U.AnnotationEditorParamsType.FREETEXT_COLOR,T(this,g)]]}getInitialTranslation(){const Z=this.parentScale;return[-Y._internalPadding*Z,-(Y._internalPadding+T(this,C))*Z]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(U.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",T(this,F)),this.editorDiv.addEventListener("focus",T(this,o)),this.editorDiv.addEventListener("blur",T(this,u)),this.editorDiv.addEventListener("input",T(this,v)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",T(this,D)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",T(this,F)),this.editorDiv.removeEventListener("focus",T(this,o)),this.editorDiv.removeEventListener("blur",T(this,u)),this.editorDiv.removeEventListener("input",T(this,v)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Z){super.focusin(Z),Z.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),T(this,f)||(ut(this,f,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),ut(this,y,nt(this,J,H).call(this).trimEnd()),nt(this,M,P).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(Z){this.enableEditMode(),this.editorDiv.focus()}keydown(Z){Z.target===this.div&&Z.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(Z){Y._keyboardManager.exec(this,Z)}editorDivFocus(Z){this.isEditing=!0}editorDivBlur(Z){this.isEditing=!1}editorDivInput(Z){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Z,V;this.width&&(Z=this.x,V=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",T(this,D)),this.enableEditing(),Y._l10nPromise.get("editor_free_text2_aria_label").then(ct=>{var vt;return(vt=this.editorDiv)===null||vt===void 0?void 0:vt.setAttribute("aria-label",ct)}),Y._l10nPromise.get("free_text2_default_content").then(ct=>{var vt;return(vt=this.editorDiv)===null||vt===void 0?void 0:vt.setAttribute("default-content",ct)}),this.editorDiv.contentEditable=!0;const{style:Q}=this.editorDiv;if(Q.fontSize=`calc(${T(this,C)}px * var(--scale-factor))`,Q.color=T(this,g),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ct,vt]=this.parentDimensions;this.setAt(Z*ct,V*vt,this.width*ct,this.height*vt);for(const pt of T(this,y).split(`
`)){const Tt=document.createElement("div");Tt.append(pt?document.createTextNode(pt):document.createElement("br")),this.editorDiv.append(Tt)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Z,V,Q){const ct=super.deserialize(Z,V,Q);return ut(ct,C,Z.fontSize),ut(ct,g,U.Util.makeHexColor(...Z.color)),ut(ct,y,Z.value),ct}serialize(){if(this.isEmpty())return null;const Z=Y._internalPadding*this.parentScale,V=this.getRect(Z,Z),Q=E.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:T(this,g));return{annotationType:U.AnnotationEditorType.FREETEXT,color:Q,fontSize:T(this,C),value:T(this,y),pageIndex:this.pageIndex,rect:V,rotation:this.rotation}}};let rt=Y;u=new WeakMap,o=new WeakMap,v=new WeakMap,F=new WeakMap,g=new WeakMap,y=new WeakMap,D=new WeakMap,f=new WeakMap,C=new WeakMap,q=new WeakSet,R=function(Z){const V=ct=>{this.editorDiv.style.fontSize=`calc(${ct}px * var(--scale-factor))`,this.translate(0,-(ct-T(this,C))*this.parentScale),ut(this,C,ct),nt(this,M,P).call(this)},Q=T(this,C);this.addCommands({cmd:()=>{V(Z)},undo:()=>{V(Q)},mustExec:!0,type:U.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},$=new WeakSet,X=function(Z){const V=T(this,g);this.addCommands({cmd:()=>{ut(this,g,this.editorDiv.style.color=Z)},undo:()=>{ut(this,g,this.editorDiv.style.color=V)},mustExec:!0,type:U.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},J=new WeakSet,H=function(){const Z=this.editorDiv.getElementsByTagName("div");if(Z.length===0)return this.editorDiv.innerText;const V=[];for(const Q of Z)V.push(Q.innerText.replace(/\r\n?|\n/,""));return V.join(`
`)},M=new WeakSet,P=function(){const[Z,V]=this.parentDimensions;let Q;if(this.isAttachedToDOM)Q=this.div.getBoundingClientRect();else{const{currentLayer:ct,div:vt}=this,pt=vt.style.display;vt.style.display="hidden",ct.div.append(this.div),Q=vt.getBoundingClientRect(),vt.remove(),vt.style.display=pt}this.width=Q.width/Z,this.height=Q.height/V},It(rt,"_freeTextDefaultContent",""),It(rt,"_l10nPromise"),It(rt,"_internalPadding",0),It(rt,"_defaultColor",null),It(rt,"_defaultFontSize",10),It(rt,"_keyboardManager",new _.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Y.prototype.commitOrRemove]])),It(rt,"_type","freetext"),s.FreeTextEditor=rt},(S,s,r)=>{var u,o,v,F,g,y,D,f,C,q,R,$,X,J,H,M,P,U,_,E,Y,rt,Z,V,Q,ct,vt,pt,Tt,B,j,z,G,N,W,it,at,lt,dt,ft,mt,gt,ot,kt,Ft,At,O,K,tt,st,ht,_t,xt,wt,Lt,Pt,Rt,Et,Ot,Nt,zt,bt,Mt,Gt,qt,ie,$t,St,Xt,Kt;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0;var Yt=r(1),Ut=r(140),fe=r(141);const te=16,Jt=class extends Ut.AnnotationEditor{constructor(yt){super({...yt,name:"inkEditor"}),et(this,P),et(this,_),et(this,Y),et(this,Z),et(this,Q),et(this,vt),et(this,Tt),et(this,j),et(this,G),et(this,W),et(this,at),et(this,dt),et(this,mt),et(this,ot),et(this,Ft),et(this,O),et(this,tt),et(this,ht),et(this,xt),et(this,Rt),et(this,Ot),et(this,zt),et(this,Mt),et(this,qt),et(this,$t),et(this,Xt),et(this,u,0),et(this,o,0),et(this,v,0),et(this,F,this.canvasContextMenu.bind(this)),et(this,g,this.canvasPointermove.bind(this)),et(this,y,this.canvasPointerleave.bind(this)),et(this,D,this.canvasPointerup.bind(this)),et(this,f,this.canvasPointerdown.bind(this)),et(this,C,new Path2D),et(this,q,!1),et(this,R,!1),et(this,$,!1),et(this,X,null),et(this,J,0),et(this,H,0),et(this,M,null),this.color=yt.color||null,this.thickness=yt.thickness||null,this.opacity=yt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(yt){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(Ct=>[Ct,yt.get(Ct)]))}static updateDefaultParams(yt,Ct){switch(yt){case Yt.AnnotationEditorParamsType.INK_THICKNESS:Jt._defaultThickness=Ct;break;case Yt.AnnotationEditorParamsType.INK_COLOR:Jt._defaultColor=Ct;break;case Yt.AnnotationEditorParamsType.INK_OPACITY:Jt._defaultOpacity=Ct/100}}updateParams(yt,Ct){switch(yt){case Yt.AnnotationEditorParamsType.INK_THICKNESS:nt(this,P,U).call(this,Ct);break;case Yt.AnnotationEditorParamsType.INK_COLOR:nt(this,_,E).call(this,Ct);break;case Yt.AnnotationEditorParamsType.INK_OPACITY:nt(this,Y,rt).call(this,Ct)}}static get defaultPropertiesToUpdate(){return[[Yt.AnnotationEditorParamsType.INK_THICKNESS,Jt._defaultThickness],[Yt.AnnotationEditorParamsType.INK_COLOR,Jt._defaultColor||Ut.AnnotationEditor._defaultLineColor],[Yt.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*Jt._defaultOpacity)]]}get propertiesToUpdate(){return[[Yt.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Jt._defaultThickness],[Yt.AnnotationEditorParamsType.INK_COLOR,this.color||Jt._defaultColor||Ut.AnnotationEditor._defaultLineColor],[Yt.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Jt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(nt(this,Ft,At).call(this),nt(this,O,K).call(this)),this.isAttachedToDOM||(this.parent.add(this),nt(this,tt,st).call(this)),nt(this,$t,St).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,T(this,X).disconnect(),ut(this,X,null),super.remove())}setParent(yt){!this.parent&&yt?this._uiManager.removeShouldRescale(this):this.parent&&yt===null&&this._uiManager.addShouldRescale(this),super.setParent(yt)}onScaleChanging(){const[yt,Ct]=this.parentDimensions,jt=this.width*yt,Bt=this.height*Ct;this.setDimensions(jt,Bt)}enableEditMode(){!T(this,q)&&this.canvas!==null&&(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",T(this,f)))}disableEditMode(){this.isInEditMode()&&this.canvas!==null&&(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",T(this,f)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){T(this,q)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ut(this,q,!0),this.div.classList.add("disabled"),nt(this,$t,St).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(yt){super.focusin(yt),this.enableEditMode()}canvasPointerdown(yt){yt.button===0&&this.isInEditMode()&&!T(this,q)&&(this.setInForeground(),yt.preventDefault(),yt.type!=="mouse"&&this.div.focus(),nt(this,vt,pt).call(this,yt.offsetX,yt.offsetY))}canvasContextMenu(yt){yt.preventDefault()}canvasPointermove(yt){yt.preventDefault(),nt(this,Tt,B).call(this,yt.offsetX,yt.offsetY)}canvasPointerup(yt){yt.preventDefault(),nt(this,ot,kt).call(this,yt)}canvasPointerleave(yt){nt(this,ot,kt).call(this,yt)}render(){if(this.div)return this.div;let yt,Ct;this.width&&(yt=this.x,Ct=this.y),super.render(),Jt._l10nPromise.get("editor_ink2_aria_label").then(Vt=>{var Ht;return(Ht=this.div)===null||Ht===void 0?void 0:Ht.setAttribute("aria-label",Vt)});const[jt,Bt,Dt,Wt]=nt(this,Z,V).call(this);if(this.setAt(jt,Bt,0,0),this.setDims(Dt,Wt),nt(this,Ft,At).call(this),this.width){const[Vt,Ht]=this.parentDimensions;this.setAt(yt*Vt,Ct*Ht,this.width*Vt,this.height*Ht),ut(this,$,!0),nt(this,tt,st).call(this),this.setDims(this.width*Vt,this.height*Ht),nt(this,mt,gt).call(this),nt(this,Xt,Kt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return nt(this,O,K).call(this),this.div}setDimensions(yt,Ct){const jt=Math.round(yt),Bt=Math.round(Ct);if(T(this,J)===jt&&T(this,H)===Bt)return;ut(this,J,jt),ut(this,H,Bt),this.canvas.style.visibility="hidden",T(this,u)&&Math.abs(T(this,u)-yt/Ct)>.01&&(Ct=Math.ceil(yt/T(this,u)),this.setDims(yt,Ct));const[Dt,Wt]=this.parentDimensions;this.width=yt/Dt,this.height=Ct/Wt,T(this,q)&&nt(this,ht,_t).call(this,yt,Ct),nt(this,tt,st).call(this),nt(this,mt,gt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(yt,Ct,jt){var Bt,Dt;const Wt=super.deserialize(yt,Ct,jt);Wt.thickness=yt.thickness,Wt.color=Yt.Util.makeHexColor(...yt.color),Wt.opacity=yt.opacity;const[Vt,Ht]=Wt.pageDimensions,ne=Wt.width*Vt,Qt=Wt.height*Ht,se=Wt.parentScale,Zt=yt.thickness/2;ut(Wt,u,ne/Qt),ut(Wt,q,!0),ut(Wt,J,Math.round(ne)),ut(Wt,H,Math.round(Qt));for(const{bezier:ae}of yt.paths){const he=[];Wt.paths.push(he);let le=se*(ae[0]-Zt),ce=se*(Qt-ae[1]-Zt);for(let de=2,me=ae.length;de<me;de+=6){const ve=se*(ae[de]-Zt),be=se*(Qt-ae[de+1]-Zt),Te=se*(ae[de+2]-Zt),we=se*(Qt-ae[de+3]-Zt),xe=se*(ae[de+4]-Zt),Se=se*(Qt-ae[de+5]-Zt);he.push([[le,ce],[ve,be],[Te,we],[xe,Se]]),le=xe,ce=Se}const ge=nt(this,Lt,Pt).call(this,he);Wt.bezierPath2D.push(ge)}const ee=nt(Bt=Wt,Mt,Gt).call(Bt);return ut(Wt,v,Math.max(te,ee[2]-ee[0])),ut(Wt,o,Math.max(te,ee[3]-ee[1])),nt(Dt=Wt,ht,_t).call(Dt,ne,Qt),Wt}serialize(){if(this.isEmpty())return null;const yt=this.getRect(0,0),Ct=this.rotation%180==0?yt[3]-yt[1]:yt[2]-yt[0],jt=Ut.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Yt.AnnotationEditorType.INK,color:jt,thickness:this.thickness,opacity:this.opacity,paths:nt(this,Rt,Et).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Ct),pageIndex:this.pageIndex,rect:yt,rotation:this.rotation}}};let oe=Jt;u=new WeakMap,o=new WeakMap,v=new WeakMap,F=new WeakMap,g=new WeakMap,y=new WeakMap,D=new WeakMap,f=new WeakMap,C=new WeakMap,q=new WeakMap,R=new WeakMap,$=new WeakMap,X=new WeakMap,J=new WeakMap,H=new WeakMap,M=new WeakMap,P=new WeakSet,U=function(yt){const Ct=this.thickness;this.addCommands({cmd:()=>{this.thickness=yt,nt(this,$t,St).call(this)},undo:()=>{this.thickness=Ct,nt(this,$t,St).call(this)},mustExec:!0,type:Yt.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},_=new WeakSet,E=function(yt){const Ct=this.color;this.addCommands({cmd:()=>{this.color=yt,nt(this,mt,gt).call(this)},undo:()=>{this.color=Ct,nt(this,mt,gt).call(this)},mustExec:!0,type:Yt.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Y=new WeakSet,rt=function(yt){yt/=100;const Ct=this.opacity;this.addCommands({cmd:()=>{this.opacity=yt,nt(this,mt,gt).call(this)},undo:()=>{this.opacity=Ct,nt(this,mt,gt).call(this)},mustExec:!0,type:Yt.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Z=new WeakSet,V=function(){const{parentRotation:yt,parentDimensions:[Ct,jt]}=this;switch(yt){case 90:return[0,jt,jt,Ct];case 180:return[Ct,jt,Ct,jt];case 270:return[Ct,0,jt,Ct];default:return[0,0,Ct,jt]}},Q=new WeakSet,ct=function(){const{ctx:yt,color:Ct,opacity:jt,thickness:Bt,parentScale:Dt,scaleFactor:Wt}=this;yt.lineWidth=Bt*Dt/Wt,yt.lineCap="round",yt.lineJoin="round",yt.miterLimit=10,yt.strokeStyle=`${Ct}${(0,fe.opacityToHex)(jt)}`},vt=new WeakSet,pt=function(yt,Ct){this.canvas.addEventListener("contextmenu",T(this,F)),this.canvas.addEventListener("pointerleave",T(this,y)),this.canvas.addEventListener("pointermove",T(this,g)),this.canvas.addEventListener("pointerup",T(this,D)),this.canvas.removeEventListener("pointerdown",T(this,f)),this.isEditing=!0,T(this,$)||(ut(this,$,!0),nt(this,tt,st).call(this),this.thickness||(this.thickness=Jt._defaultThickness),this.color||(this.color=Jt._defaultColor||Ut.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Jt._defaultOpacity)),this.currentPath.push([yt,Ct]),ut(this,R,!1),nt(this,Q,ct).call(this),ut(this,M,()=>{nt(this,W,it).call(this),T(this,M)&&window.requestAnimationFrame(T(this,M))}),window.requestAnimationFrame(T(this,M))},Tt=new WeakSet,B=function(yt,Ct){const[jt,Bt]=this.currentPath.at(-1);if(this.currentPath.length>1&&yt===jt&&Ct===Bt)return;const Dt=this.currentPath;let Wt=T(this,C);Dt.push([yt,Ct]),ut(this,R,!0),Dt.length<=2?(Wt.moveTo(...Dt[0]),Wt.lineTo(yt,Ct)):(Dt.length===3&&(ut(this,C,Wt=new Path2D),Wt.moveTo(...Dt[0])),nt(this,at,lt).call(this,Wt,...Dt.at(-3),...Dt.at(-2),yt,Ct))},j=new WeakSet,z=function(){if(this.currentPath.length===0)return;const yt=this.currentPath.at(-1);T(this,C).lineTo(...yt)},G=new WeakSet,N=function(yt,Ct){ut(this,M,null),yt=Math.min(Math.max(yt,0),this.canvas.width),Ct=Math.min(Math.max(Ct,0),this.canvas.height),nt(this,Tt,B).call(this,yt,Ct),nt(this,j,z).call(this);let jt;if(this.currentPath.length!==1)jt=nt(this,dt,ft).call(this);else{const Wt=[yt,Ct];jt=[[Wt,Wt.slice(),Wt.slice(),Wt]]}const Bt=T(this,C),Dt=this.currentPath;this.currentPath=[],ut(this,C,new Path2D),this.addCommands({cmd:()=>{this.allRawPaths.push(Dt),this.paths.push(jt),this.bezierPath2D.push(Bt),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(nt(this,Ft,At).call(this),nt(this,O,K).call(this)),nt(this,$t,St).call(this))},mustExec:!0})},W=new WeakSet,it=function(){if(!T(this,R))return;ut(this,R,!1),Math.ceil(this.thickness*this.parentScale);const yt=this.currentPath.slice(-3),Ct=yt.map(Dt=>Dt[0]),jt=yt.map(Dt=>Dt[1]),{ctx:Bt}=(Math.min(...Ct),Math.max(...Ct),Math.min(...jt),Math.max(...jt),this);Bt.save(),Bt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Dt of this.bezierPath2D)Bt.stroke(Dt);Bt.stroke(T(this,C)),Bt.restore()},at=new WeakSet,lt=function(yt,Ct,jt,Bt,Dt,Wt,Vt){const Ht=(Ct+Bt)/2,ne=(jt+Dt)/2,Qt=(Bt+Wt)/2,se=(Dt+Vt)/2;yt.bezierCurveTo(Ht+2*(Bt-Ht)/3,ne+2*(Dt-ne)/3,Qt+2*(Bt-Qt)/3,se+2*(Dt-se)/3,Qt,se)},dt=new WeakSet,ft=function(){const yt=this.currentPath;if(yt.length<=2)return[[yt[0],yt[0],yt.at(-1),yt.at(-1)]];const Ct=[];let jt,[Bt,Dt]=yt[0];for(jt=1;jt<yt.length-2;jt++){const[Zt,ee]=yt[jt],[ae,he]=yt[jt+1],le=(Zt+ae)/2,ce=(ee+he)/2,ge=[Bt+2*(Zt-Bt)/3,Dt+2*(ee-Dt)/3],de=[le+2*(Zt-le)/3,ce+2*(ee-ce)/3];Ct.push([[Bt,Dt],ge,de,[le,ce]]),[Bt,Dt]=[le,ce]}const[Wt,Vt]=yt[jt],[Ht,ne]=yt[jt+1],Qt=[Bt+2*(Wt-Bt)/3,Dt+2*(Vt-Dt)/3],se=[Ht+2*(Wt-Ht)/3,ne+2*(Vt-ne)/3];return Ct.push([[Bt,Dt],Qt,se,[Ht,ne]]),Ct},mt=new WeakSet,gt=function(){if(this.isEmpty()){nt(this,xt,wt).call(this);return}nt(this,Q,ct).call(this);const{canvas:yt,ctx:Ct}=this;Ct.setTransform(1,0,0,1,0,0),Ct.clearRect(0,0,yt.width,yt.height),nt(this,xt,wt).call(this);for(const jt of this.bezierPath2D)Ct.stroke(jt)},ot=new WeakSet,kt=function(yt){this.canvas.removeEventListener("pointerleave",T(this,y)),this.canvas.removeEventListener("pointermove",T(this,g)),this.canvas.removeEventListener("pointerup",T(this,D)),this.canvas.addEventListener("pointerdown",T(this,f)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",T(this,F))},10),nt(this,G,N).call(this,yt.offsetX,yt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Ft=new WeakSet,At=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Jt._l10nPromise.get("editor_ink_canvas_aria_label").then(yt=>{var Ct;return(Ct=this.canvas)===null||Ct===void 0?void 0:Ct.setAttribute("aria-label",yt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},O=new WeakSet,K=function(){ut(this,X,new ResizeObserver(yt=>{const Ct=yt[0].contentRect;Ct.width&&Ct.height&&this.setDimensions(Ct.width,Ct.height)})),T(this,X).observe(this.div)},tt=new WeakSet,st=function(){if(!T(this,$))return;const[yt,Ct]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*yt),this.canvas.height=Math.ceil(this.height*Ct),nt(this,xt,wt).call(this)},ht=new WeakSet,_t=function(yt,Ct){const jt=nt(this,qt,ie).call(this),Bt=(yt-jt)/T(this,v),Dt=(Ct-jt)/T(this,o);this.scaleFactor=Math.min(Bt,Dt)},xt=new WeakSet,wt=function(){const yt=nt(this,qt,ie).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+yt,this.translationY*this.scaleFactor+yt)},Lt=new WeakSet,Pt=function(yt){const Ct=new Path2D;for(let jt=0,Bt=yt.length;jt<Bt;jt++){const[Dt,Wt,Vt,Ht]=yt[jt];jt===0&&Ct.moveTo(...Dt),Ct.bezierCurveTo(Wt[0],Wt[1],Vt[0],Vt[1],Ht[0],Ht[1])}return Ct},Rt=new WeakSet,Et=function(yt,Ct,jt,Bt){const Dt=[],Wt=this.thickness/2;let Vt,Ht;for(const ne of this.paths){Vt=[],Ht=[];for(let Qt=0,se=ne.length;Qt<se;Qt++){const[Zt,ee,ae,he]=ne[Qt],le=yt*(Zt[0]+Ct)+Wt,ce=Bt-yt*(Zt[1]+jt)-Wt,ge=yt*(ee[0]+Ct)+Wt,de=Bt-yt*(ee[1]+jt)-Wt,me=yt*(ae[0]+Ct)+Wt,ve=Bt-yt*(ae[1]+jt)-Wt,be=yt*(he[0]+Ct)+Wt,Te=Bt-yt*(he[1]+jt)-Wt;Qt===0&&(Vt.push(le,ce),Ht.push(le,ce)),Vt.push(ge,de,me,ve,be,Te),nt(this,Ot,Nt).call(this,le,ce,ge,de,me,ve,be,Te,4,Ht)}Dt.push({bezier:Vt,points:Ht})}return Dt},Ot=new WeakSet,Nt=function(yt,Ct,jt,Bt,Dt,Wt,Vt,Ht,ne,Qt){if(nt(this,zt,bt).call(this,yt,Ct,jt,Bt,Dt,Wt,Vt,Ht))Qt.push(Vt,Ht);else{for(let se=1;se<ne-1;se++){const Zt=se/ne,ee=1-Zt;let ae=Zt*yt+ee*jt,he=Zt*Ct+ee*Bt,le=Zt*jt+ee*Dt,ce=Zt*Bt+ee*Wt;ae=Zt*ae+ee*le,he=Zt*he+ee*ce,le=Zt*le+ee*(Zt*Dt+ee*Vt),ce=Zt*ce+ee*(Zt*Wt+ee*Ht),ae=Zt*ae+ee*le,he=Zt*he+ee*ce,Qt.push(ae,he)}Qt.push(Vt,Ht)}},zt=new WeakSet,bt=function(yt,Ct,jt,Bt,Dt,Wt,Vt,Ht){const ne=(3*jt-2*yt-Vt)**2,Qt=(3*Bt-2*Ct-Ht)**2,se=(3*Dt-yt-2*Vt)**2,Zt=(3*Wt-Ct-2*Ht)**2;return Math.max(ne,se)+Math.max(Qt,Zt)<=10},Mt=new WeakSet,Gt=function(){let yt=1/0,Ct=-1/0,jt=1/0,Bt=-1/0;for(const Dt of this.paths)for(const[Wt,Vt,Ht,ne]of Dt){const Qt=Yt.Util.bezierBoundingBox(...Wt,...Vt,...Ht,...ne);yt=Math.min(yt,Qt[0]),jt=Math.min(jt,Qt[1]),Ct=Math.max(Ct,Qt[2]),Bt=Math.max(Bt,Qt[3])}return[yt,jt,Ct,Bt]},qt=new WeakSet,ie=function(){return T(this,q)?Math.ceil(this.thickness*this.parentScale):0},$t=new WeakSet,St=function(){let yt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isEmpty())return;if(!T(this,q)){nt(this,mt,gt).call(this);return}const Ct=nt(this,Mt,Gt).call(this),jt=nt(this,qt,ie).call(this);ut(this,v,Math.max(te,Ct[2]-Ct[0])),ut(this,o,Math.max(te,Ct[3]-Ct[1]));const Bt=Math.ceil(jt+T(this,v)*this.scaleFactor),Dt=Math.ceil(jt+T(this,o)*this.scaleFactor),[Wt,Vt]=this.parentDimensions;this.width=Bt/Wt,this.height=Dt/Vt,ut(this,u,Bt/Dt),nt(this,Xt,Kt).call(this);const Ht=this.translationX,ne=this.translationY;this.translationX=-Ct[0],this.translationY=-Ct[1],nt(this,tt,st).call(this),nt(this,mt,gt).call(this),ut(this,J,Bt),ut(this,H,Dt),this.setDims(Bt,Dt);const Qt=yt?jt/this.scaleFactor/2:0;this.translate(Ht-this.translationX-Qt,ne-this.translationY-Qt)},Xt=new WeakSet,Kt=function(){const{style:yt}=this.div;T(this,u)>=1?(yt.minHeight="16px",yt.minWidth=`${Math.round(T(this,u)*te)}px`):(yt.minWidth="16px",yt.minHeight=`${Math.round(te/T(this,u))}px`)},et(oe,Lt),It(oe,"_defaultColor",null),It(oe,"_defaultOpacity",1),It(oe,"_defaultThickness",1),It(oe,"_l10nPromise"),It(oe,"_type","ink"),s.InkEditor=oe},(S,s,r)=>{var u,o,v,F,g,y,D,f;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationLayer=void 0;var C=r(1),q=r(142),R=r(139),$=r(166),X=r(167);const J=1e3,H=new WeakSet;function M(At){return{width:At[2]-At[0],height:At[3]-At[1]}}class P{static create(O){switch(O.data.annotationType){case C.AnnotationType.LINK:return new _(O);case C.AnnotationType.TEXT:return new E(O);case C.AnnotationType.WIDGET:switch(O.data.fieldType){case"Tx":return new rt(O);case"Btn":return O.data.radioButton?new V(O):O.data.checkBox?new Z(O):new Q(O);case"Ch":return new ct(O)}return new Y(O);case C.AnnotationType.POPUP:return new pt(O);case C.AnnotationType.FREETEXT:return new B(O);case C.AnnotationType.LINE:return new j(O);case C.AnnotationType.SQUARE:return new z(O);case C.AnnotationType.CIRCLE:return new G(O);case C.AnnotationType.POLYLINE:return new N(O);case C.AnnotationType.CARET:return new it(O);case C.AnnotationType.INK:return new at(O);case C.AnnotationType.POLYGON:return new W(O);case C.AnnotationType.HIGHLIGHT:return new lt(O);case C.AnnotationType.UNDERLINE:return new dt(O);case C.AnnotationType.SQUIGGLY:return new ft(O);case C.AnnotationType.STRIKEOUT:return new mt(O);case C.AnnotationType.STAMP:return new gt(O);case C.AnnotationType.FILEATTACHMENT:return new ot(O);default:return new U(O)}}}class U{constructor(O){let{isRenderable:K=!1,ignoreBorder:tt=!1,createQuadrilaterals:st=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=K,this.data=O.data,this.layer=O.layer,this.page=O.page,this.viewport=O.viewport,this.linkService=O.linkService,this.downloadManager=O.downloadManager,this.imageResourcesPath=O.imageResourcesPath,this.renderForms=O.renderForms,this.svgFactory=O.svgFactory,this.annotationStorage=O.annotationStorage,this.enableScripting=O.enableScripting,this.hasJSActions=O.hasJSActions,this._fieldObjects=O.fieldObjects,K&&(this.container=this._createContainer(tt)),st&&(this.quadrilaterals=this._createQuadrilaterals(tt))}_createContainer(){let O=arguments.length>0&&arguments[0]!==void 0&&arguments[0];const{data:K,page:tt,viewport:st}=this,ht=document.createElement("section");ht.setAttribute("data-annotation-id",K.id),K.noRotate&&ht.classList.add("norotate");const{pageWidth:_t,pageHeight:xt,pageX:wt,pageY:Lt}=st.rawDims,{width:Pt,height:Rt}=M(K.rect),Et=C.Util.normalizeRect([K.rect[0],tt.view[3]-K.rect[1]+tt.view[1],K.rect[2],tt.view[3]-K.rect[3]+tt.view[1]]);if(!O&&K.borderStyle.width>0){ht.style.borderWidth=`${K.borderStyle.width}px`;const Nt=K.borderStyle.horizontalCornerRadius,zt=K.borderStyle.verticalCornerRadius;if(Nt>0||zt>0){const Mt=`calc(${Nt}px * var(--scale-factor)) / calc(${zt}px * var(--scale-factor))`;ht.style.borderRadius=Mt}else if(this instanceof V){const Mt=`calc(${Pt}px * var(--scale-factor)) / calc(${Rt}px * var(--scale-factor))`;ht.style.borderRadius=Mt}switch(K.borderStyle.style){case C.AnnotationBorderStyleType.SOLID:ht.style.borderStyle="solid";break;case C.AnnotationBorderStyleType.DASHED:ht.style.borderStyle="dashed";break;case C.AnnotationBorderStyleType.BEVELED:(0,C.warn)("Unimplemented border style: beveled");break;case C.AnnotationBorderStyleType.INSET:(0,C.warn)("Unimplemented border style: inset");break;case C.AnnotationBorderStyleType.UNDERLINE:ht.style.borderBottomStyle="solid"}const bt=K.borderColor||null;bt?ht.style.borderColor=C.Util.makeHexColor(0|bt[0],0|bt[1],0|bt[2]):ht.style.borderWidth=0}ht.style.left=100*(Et[0]-wt)/_t+"%",ht.style.top=100*(Et[1]-Lt)/xt+"%";const{rotation:Ot}=K;return K.hasOwnCanvas||Ot===0?(ht.style.width=100*Pt/_t+"%",ht.style.height=100*Rt/xt+"%"):this.setRotation(Ot,ht),ht}setRotation(O){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;const{pageWidth:tt,pageHeight:st}=this.viewport.rawDims,{width:ht,height:_t}=M(this.data.rect);let xt,wt;O%180==0?(xt=100*ht/tt,wt=100*_t/st):(xt=100*_t/tt,wt=100*ht/st),K.style.width=`${xt}%`,K.style.height=`${wt}%`,K.setAttribute("data-main-rotation",(360-O)%360)}get _commonActions(){const O=(K,tt,st)=>{const ht=st.detail[K];st.target.style[tt]=$.ColorConverters[`${ht[0]}_HTML`](ht.slice(1))};return(0,C.shadow)(this,"_commonActions",{display:K=>{const tt=K.detail.display%2==1;this.container.style.visibility=tt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:tt,print:K.detail.display===0||K.detail.display===3})},print:K=>{this.annotationStorage.setValue(this.data.id,{print:K.detail.print})},hidden:K=>{this.container.style.visibility=K.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:K.detail.hidden})},focus:K=>{setTimeout(()=>K.target.focus({preventScroll:!1}),0)},userName:K=>{K.target.title=K.detail.userName},readonly:K=>{K.detail.readonly?K.target.setAttribute("readonly",""):K.target.removeAttribute("readonly")},required:K=>{this._setRequired(K.target,K.detail.required)},bgColor:K=>{O("bgColor","backgroundColor",K)},fillColor:K=>{O("fillColor","backgroundColor",K)},fgColor:K=>{O("fgColor","color",K)},textColor:K=>{O("textColor","color",K)},borderColor:K=>{O("borderColor","borderColor",K)},strokeColor:K=>{O("strokeColor","borderColor",K)},rotation:K=>{const tt=K.detail.rotation;this.setRotation(tt),this.annotationStorage.setValue(this.data.id,{rotation:tt})}})}_dispatchEventFromSandbox(O,K){const tt=this._commonActions;for(const st of Object.keys(K.detail)){const ht=O[st]||tt[st];ht==null||ht(K)}}_setDefaultPropertiesFromJS(O){if(!this.enableScripting)return;const K=this.annotationStorage.getRawValue(this.data.id);if(!K)return;const tt=this._commonActions;for(const[st,ht]of Object.entries(K)){const _t=tt[st];_t&&(_t({detail:{[st]:ht},target:O}),delete K[st])}}_createQuadrilaterals(){let O=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!this.data.quadPoints)return null;const K=[],tt=this.data.rect;for(const st of this.data.quadPoints)this.data.rect=[st[2].x,st[2].y,st[1].x,st[1].y],K.push(this._createContainer(O));return this.data.rect=tt,K}_createPopup(O,K){let tt=this.container;this.quadrilaterals&&(O||(O=this.quadrilaterals),tt=this.quadrilaterals[0]),O||((O=document.createElement("div")).classList.add("popupTriggerArea"),tt.append(O));const st=new Tt({container:tt,trigger:O,color:K.color,titleObj:K.titleObj,modificationDate:K.modificationDate,contentsObj:K.contentsObj,richText:K.richText,hideWrapper:!0}).render();st.style.left="100%",tt.append(st)}_renderQuadrilaterals(O){for(const K of this.quadrilaterals)K.classList.add(O);return this.quadrilaterals}render(){(0,C.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(O){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const tt=[];if(this._fieldObjects){const st=this._fieldObjects[O];if(st)for(const{page:ht,id:_t,exportValues:xt}of st){if(ht===-1||_t===K)continue;const wt=typeof xt=="string"?xt:null,Lt=document.querySelector(`[data-element-id="${_t}"]`);!Lt||H.has(Lt)?tt.push({id:_t,exportValue:wt,domElement:Lt}):(0,C.warn)(`_getElementsByName - element not allowed: ${_t}`)}return tt}for(const st of document.getElementsByName(O)){const{exportValue:ht}=st,_t=st.getAttribute("data-element-id");_t!==K&&H.has(st)&&tt.push({id:_t,exportValue:ht,domElement:st})}return tt}}class _ extends U{constructor(O){let K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(O,{isRenderable:!0,ignoreBorder:!(K==null||!K.ignoreBorder),createQuadrilaterals:!0}),et(this,u),et(this,v),this.isTooltipOnly=O.data.isTooltipOnly}render(){const{data:O,linkService:K}=this,tt=document.createElement("a");tt.setAttribute("data-element-id",O.id);let st=!1;return O.url?(K.addLinkAttributes(tt,O.url,O.newWindow),st=!0):O.action?(this._bindNamedAction(tt,O.action),st=!0):O.attachment?(this._bindAttachment(tt,O.attachment),st=!0):O.setOCGState?(nt(this,v,F).call(this,tt,O.setOCGState),st=!0):O.dest?(this._bindLink(tt,O.dest),st=!0):(O.actions&&(O.actions.Action||O.actions["Mouse Up"]||O.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(tt,O),st=!0),O.resetForm?(this._bindResetFormAction(tt,O.resetForm),st=!0):this.isTooltipOnly&&!st&&(this._bindLink(tt,""),st=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((ht,_t)=>{const xt=_t===0?tt:tt.cloneNode();return ht.append(xt),ht}):(this.container.classList.add("linkAnnotation"),st&&this.container.append(tt),this.container)}_bindLink(O,K){O.href=this.linkService.getDestinationHash(K),O.onclick=()=>(K&&this.linkService.goToDestination(K),!1),(K||K==="")&&nt(this,u,o).call(this)}_bindNamedAction(O,K){O.href=this.linkService.getAnchorUrl(""),O.onclick=()=>(this.linkService.executeNamedAction(K),!1),nt(this,u,o).call(this)}_bindAttachment(O,K){O.href=this.linkService.getAnchorUrl(""),O.onclick=()=>{var tt;return(tt=this.downloadManager)===null||tt===void 0||tt.openOrDownloadData(this.container,K.content,K.filename),!1},nt(this,u,o).call(this)}_bindJSAction(O,K){O.href=this.linkService.getAnchorUrl("");const tt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const st of Object.keys(K.actions)){const ht=tt.get(st);ht&&(O[ht]=()=>{var _t;return(_t=this.linkService.eventBus)===null||_t===void 0||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K.id,name:st}}),!1})}O.onclick||(O.onclick=()=>!1),nt(this,u,o).call(this)}_bindResetFormAction(O,K){const tt=O.onclick;tt||(O.href=this.linkService.getAnchorUrl("")),nt(this,u,o).call(this),this._fieldObjects?O.onclick=()=>{tt==null||tt();const{fields:st,refs:ht,include:_t}=K,xt=[];if(st.length!==0||ht.length!==0){const Rt=new Set(ht);for(const Et of st){const Ot=this._fieldObjects[Et]||[];for(const{id:Nt}of Ot)Rt.add(Nt)}for(const Et of Object.values(this._fieldObjects))for(const Ot of Et)Rt.has(Ot.id)===_t&&xt.push(Ot)}else for(const Rt of Object.values(this._fieldObjects))xt.push(...Rt);const wt=this.annotationStorage,Lt=[];for(const Rt of xt){const{id:Et}=Rt;switch(Lt.push(Et),Rt.type){case"text":{const Nt=Rt.defaultValue||"";wt.setValue(Et,{value:Nt});break}case"checkbox":case"radiobutton":{const Nt=Rt.defaultValue===Rt.exportValues;wt.setValue(Et,{value:Nt});break}case"combobox":case"listbox":{const Nt=Rt.defaultValue||"";wt.setValue(Et,{value:Nt});break}default:continue}const Ot=document.querySelector(`[data-element-id="${Et}"]`);Ot&&(H.has(Ot)?Ot.dispatchEvent(new Event("resetform")):(0,C.warn)(`_bindResetFormAction - element not allowed: ${Et}`))}if(this.enableScripting){var Pt;(Pt=this.linkService.eventBus)===null||Pt===void 0||Pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Lt,name:"ResetForm"}})}return!1}:((0,C.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),tt||(O.onclick=()=>!1))}}u=new WeakSet,o=function(){this.container.setAttribute("data-internal-link","")},v=new WeakSet,F=function(At,O){At.href=this.linkService.getAnchorUrl(""),At.onclick=()=>(this.linkService.executeSetOCGState(O),!1),nt(this,u,o).call(this)};class E extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str)})}render(){this.container.classList.add("textAnnotation");const O=document.createElement("img");return O.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",O.alt="[{{type}} Annotation]",O.dataset.l10nId="text_annotation_type",O.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(O,this.data),this.container.append(O),this.container}}class Y extends U{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(O){if(this.data.hasOwnCanvas){var K;((K=O.previousSibling)===null||K===void 0?void 0:K.nodeName)==="CANVAS"&&(O.previousSibling.hidden=!0),O.hidden=!1}}_getKeyModifier(O){const{isWin:K,isMac:tt}=C.FeatureTest.platform;return K&&O.ctrlKey||tt&&O.metaKey}_setEventListener(O,K,tt,st){K.includes("mouse")?O.addEventListener(K,ht=>{var _t;(_t=this.linkService.eventBus)===null||_t===void 0||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:tt,value:st(ht),shift:ht.shiftKey,modifier:this._getKeyModifier(ht)}})}):O.addEventListener(K,ht=>{var _t;(_t=this.linkService.eventBus)===null||_t===void 0||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:tt,value:st(ht)}})})}_setEventListeners(O,K,tt){for(const[ht,_t]of K){var st;(_t==="Action"||(st=this.data.actions)!==null&&st!==void 0&&st[_t])&&this._setEventListener(O,ht,_t,tt)}}_setBackgroundColor(O){const K=this.data.backgroundColor||null;O.style.backgroundColor=K===null?"transparent":C.Util.makeHexColor(K[0],K[1],K[2])}_setTextStyle(O){const K=["left","center","right"],{fontColor:tt}=this.data.defaultAppearanceData,st=this.data.defaultAppearanceData.fontSize||9,ht=O.style;let _t;const xt=wt=>Math.round(10*wt)/10;if(this.data.multiLine){const wt=Math.abs(this.data.rect[3]-this.data.rect[1]-2),Lt=wt/(Math.round(wt/(C.LINE_FACTOR*st))||1);_t=Math.min(st,xt(Lt/C.LINE_FACTOR))}else{const wt=Math.abs(this.data.rect[3]-this.data.rect[1]-2);_t=Math.min(st,xt(wt/C.LINE_FACTOR))}ht.fontSize=`calc(${_t}px * var(--scale-factor))`,ht.color=C.Util.makeHexColor(tt[0],tt[1],tt[2]),this.data.textAlignment!==null&&(ht.textAlign=K[this.data.textAlignment])}_setRequired(O,K){K?O.setAttribute("required",!0):O.removeAttribute("required"),O.setAttribute("aria-required",K)}}class rt extends Y{constructor(O){super(O,{isRenderable:O.renderForms||!O.data.hasAppearance&&!!O.data.fieldValue})}setPropertyOnSiblings(O,K,tt,st){const ht=this.annotationStorage;for(const _t of this._getElementsByName(O.name,O.id))_t.domElement&&(_t.domElement[K]=tt),ht.setValue(_t.id,{[st]:tt})}render(){const O=this.annotationStorage,K=this.data.id;this.container.classList.add("textWidgetAnnotation");let tt=null;if(this.renderForms){var st;const _t=O.getValue(K,{value:this.data.fieldValue});let xt=_t.value||"";const wt=O.getValue(K,{charLimit:this.data.maxLen}).charLimit;wt&&xt.length>wt&&(xt=xt.slice(0,wt));let Lt=_t.formattedValue||((st=this.data.textContent)===null||st===void 0?void 0:st.join(`
`))||null;Lt&&this.data.comb&&(Lt=Lt.replaceAll(/\s+/g,""));const Pt={userValue:xt,formattedValue:Lt,lastCommittedValue:null,commitKey:1};this.data.multiLine?(tt=document.createElement("textarea"),tt.textContent=Lt??xt,this.data.doNotScroll&&(tt.style.overflowY="hidden")):(tt=document.createElement("input"),tt.type="text",tt.setAttribute("value",Lt??xt),this.data.doNotScroll&&(tt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(tt.hidden=!0),H.add(tt),tt.setAttribute("data-element-id",K),tt.disabled=this.data.readOnly,tt.name=this.data.fieldName,tt.tabIndex=J,this._setRequired(tt,this.data.required),wt&&(tt.maxLength=wt),tt.addEventListener("input",Et=>{O.setValue(K,{value:Et.target.value}),this.setPropertyOnSiblings(tt,"value",Et.target.value,"value"),Pt.formattedValue=null}),tt.addEventListener("resetform",Et=>{const Ot=this.data.defaultFieldValue??"";tt.value=Pt.userValue=Ot,Pt.formattedValue=null});let Rt=Et=>{const{formattedValue:Ot}=Pt;Ot!=null&&(Et.target.value=Ot),Et.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var ht;tt.addEventListener("focus",Ot=>{const{target:Nt}=Ot;Pt.userValue&&(Nt.value=Pt.userValue),Pt.lastCommittedValue=Nt.value,Pt.commitKey=1}),tt.addEventListener("updatefromsandbox",Ot=>{this.showElementAndHideCanvas(Ot.target);const Nt={value(zt){Pt.userValue=zt.detail.value??"",O.setValue(K,{value:Pt.userValue.toString()}),zt.target.value=Pt.userValue},formattedValue(zt){const{formattedValue:bt}=zt.detail;Pt.formattedValue=bt,bt!=null&&zt.target!==document.activeElement&&(zt.target.value=bt),O.setValue(K,{formattedValue:bt})},selRange(zt){zt.target.setSelectionRange(...zt.detail.selRange)},charLimit:zt=>{var bt;const{charLimit:Mt}=zt.detail,{target:Gt}=zt;if(Mt===0){Gt.removeAttribute("maxLength");return}Gt.setAttribute("maxLength",Mt);let qt=Pt.userValue;qt&&!(qt.length<=Mt)&&(qt=qt.slice(0,Mt),Gt.value=Pt.userValue=qt,O.setValue(K,{value:qt}),(bt=this.linkService.eventBus)===null||bt===void 0||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K,name:"Keystroke",value:qt,willCommit:!0,commitKey:1,selStart:Gt.selectionStart,selEnd:Gt.selectionEnd}}))}};this._dispatchEventFromSandbox(Nt,Ot)}),tt.addEventListener("keydown",Ot=>{var Nt;Pt.commitKey=1;let zt=-1;if(Ot.key==="Escape"?zt=0:Ot.key!=="Enter"||this.data.multiLine?Ot.key==="Tab"&&(Pt.commitKey=3):zt=2,zt===-1)return;const{value:bt}=Ot.target;Pt.lastCommittedValue!==bt&&(Pt.lastCommittedValue=bt,Pt.userValue=bt,(Nt=this.linkService.eventBus)===null||Nt===void 0||Nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K,name:"Keystroke",value:bt,willCommit:!0,commitKey:zt,selStart:Ot.target.selectionStart,selEnd:Ot.target.selectionEnd}}))});const Et=Rt;Rt=null,tt.addEventListener("blur",Ot=>{if(!Ot.relatedTarget)return;const{value:Nt}=Ot.target;if(Pt.userValue=Nt,Pt.lastCommittedValue!==Nt){var zt;(zt=this.linkService.eventBus)===null||zt===void 0||zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K,name:"Keystroke",value:Nt,willCommit:!0,commitKey:Pt.commitKey,selStart:Ot.target.selectionStart,selEnd:Ot.target.selectionEnd}})}Et(Ot)}),(ht=this.data.actions)!==null&&ht!==void 0&&ht.Keystroke&&tt.addEventListener("beforeinput",Ot=>{var Nt;Pt.lastCommittedValue=null;const{data:zt,target:bt}=Ot,{value:Mt,selectionStart:Gt,selectionEnd:qt}=bt;let ie=Gt,$t=qt;switch(Ot.inputType){case"deleteWordBackward":{const St=Mt.substring(0,Gt).match(/\w*[^\w]*$/);St&&(ie-=St[0].length);break}case"deleteWordForward":{const St=Mt.substring(Gt).match(/^[^\w]*\w*/);St&&($t+=St[0].length);break}case"deleteContentBackward":Gt===qt&&(ie-=1);break;case"deleteContentForward":Gt===qt&&($t+=1)}Ot.preventDefault(),(Nt=this.linkService.eventBus)===null||Nt===void 0||Nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K,name:"Keystroke",value:Mt,change:zt||"",willCommit:!1,selStart:ie,selEnd:$t}})}),this._setEventListeners(tt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ot=>Ot.target.value)}if(Rt&&tt.addEventListener("blur",Rt),this.data.comb){const Et=(this.data.rect[2]-this.data.rect[0])/wt;tt.classList.add("comb"),tt.style.letterSpacing=`calc(${Et}px * var(--scale-factor) - 1ch)`}}else tt=document.createElement("div"),tt.textContent=this.data.fieldValue,tt.style.verticalAlign="middle",tt.style.display="table-cell";return this._setTextStyle(tt),this._setBackgroundColor(tt),this._setDefaultPropertiesFromJS(tt),this.container.append(tt),this.container}}class Z extends Y{constructor(O){super(O,{isRenderable:O.renderForms})}render(){const O=this.annotationStorage,K=this.data,tt=K.id;let st=O.getValue(tt,{value:K.exportValue===K.fieldValue}).value;typeof st=="string"&&(st=st!=="Off",O.setValue(tt,{value:st})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ht=document.createElement("input");return H.add(ht),ht.setAttribute("data-element-id",tt),ht.disabled=K.readOnly,this._setRequired(ht,this.data.required),ht.type="checkbox",ht.name=K.fieldName,st&&ht.setAttribute("checked",!0),ht.setAttribute("exportValue",K.exportValue),ht.tabIndex=J,ht.addEventListener("change",_t=>{const{name:xt,checked:wt}=_t.target;for(const Lt of this._getElementsByName(xt,tt)){const Pt=wt&&Lt.exportValue===K.exportValue;Lt.domElement&&(Lt.domElement.checked=Pt),O.setValue(Lt.id,{value:Pt})}O.setValue(tt,{value:wt})}),ht.addEventListener("resetform",_t=>{const xt=K.defaultFieldValue||"Off";_t.target.checked=xt===K.exportValue}),this.enableScripting&&this.hasJSActions&&(ht.addEventListener("updatefromsandbox",_t=>{const xt={value(wt){wt.target.checked=wt.detail.value!=="Off",O.setValue(tt,{value:wt.target.checked})}};this._dispatchEventFromSandbox(xt,_t)}),this._setEventListeners(ht,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_t=>_t.target.checked)),this._setBackgroundColor(ht),this._setDefaultPropertiesFromJS(ht),this.container.append(ht),this.container}}class V extends Y{constructor(O){super(O,{isRenderable:O.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const O=this.annotationStorage,K=this.data,tt=K.id;let st=O.getValue(tt,{value:K.fieldValue===K.buttonValue}).value;typeof st=="string"&&(st=st!==K.buttonValue,O.setValue(tt,{value:st}));const ht=document.createElement("input");if(H.add(ht),ht.setAttribute("data-element-id",tt),ht.disabled=K.readOnly,this._setRequired(ht,this.data.required),ht.type="radio",ht.name=K.fieldName,st&&ht.setAttribute("checked",!0),ht.tabIndex=J,ht.addEventListener("change",_t=>{const{name:xt,checked:wt}=_t.target;for(const Lt of this._getElementsByName(xt,tt))O.setValue(Lt.id,{value:!1});O.setValue(tt,{value:wt})}),ht.addEventListener("resetform",_t=>{const xt=K.defaultFieldValue;_t.target.checked=xt!=null&&xt===K.buttonValue}),this.enableScripting&&this.hasJSActions){const _t=K.buttonValue;ht.addEventListener("updatefromsandbox",xt=>{const wt={value:Lt=>{const Pt=_t===Lt.detail.value;for(const Rt of this._getElementsByName(Lt.target.name)){const Et=Pt&&Rt.id===tt;Rt.domElement&&(Rt.domElement.checked=Et),O.setValue(Rt.id,{value:Et})}}};this._dispatchEventFromSandbox(wt,xt)}),this._setEventListeners(ht,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],xt=>xt.target.checked)}return this._setBackgroundColor(ht),this._setDefaultPropertiesFromJS(ht),this.container.append(ht),this.container}}class Q extends _{constructor(O){super(O,{ignoreBorder:O.data.hasAppearance})}render(){const O=super.render();O.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(O.title=this.data.alternativeText);const K=O.lastChild;return this.enableScripting&&this.hasJSActions&&K&&(this._setDefaultPropertiesFromJS(K),K.addEventListener("updatefromsandbox",tt=>{this._dispatchEventFromSandbox({},tt)})),O}}class ct extends Y{constructor(O){super(O,{isRenderable:O.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const O=this.annotationStorage,K=this.data.id,tt=O.getValue(K,{value:this.data.fieldValue}),st=document.createElement("select");H.add(st),st.setAttribute("data-element-id",K),st.disabled=this.data.readOnly,this._setRequired(st,this.data.required),st.name=this.data.fieldName,st.tabIndex=J;let ht=this.data.combo&&this.data.options.length>0;this.data.combo||(st.size=this.data.options.length,this.data.multiSelect&&(st.multiple=!0)),st.addEventListener("resetform",Pt=>{const Rt=this.data.defaultFieldValue;for(const Et of st.options)Et.selected=Et.value===Rt});for(const Pt of this.data.options){const Rt=document.createElement("option");Rt.textContent=Pt.displayValue,Rt.value=Pt.exportValue,tt.value.includes(Pt.exportValue)&&(Rt.setAttribute("selected",!0),ht=!1),st.append(Rt)}let _t=null;if(ht){const Pt=document.createElement("option");Pt.value=" ",Pt.setAttribute("hidden",!0),Pt.setAttribute("selected",!0),st.prepend(Pt),_t=()=>{Pt.remove(),st.removeEventListener("input",_t),_t=null},st.addEventListener("input",_t)}const xt=Pt=>{const Rt=Pt?"value":"textContent",{options:Et,multiple:Ot}=st;return Ot?Array.prototype.filter.call(Et,Nt=>Nt.selected).map(Nt=>Nt[Rt]):Et.selectedIndex===-1?null:Et[Et.selectedIndex][Rt]};let wt=xt(!1);const Lt=Pt=>{const Rt=Pt.target.options;return Array.prototype.map.call(Rt,Et=>({displayValue:Et.textContent,exportValue:Et.value}))};return this.enableScripting&&this.hasJSActions?(st.addEventListener("updatefromsandbox",Pt=>{const Rt={value(Et){var Ot;(Ot=_t)===null||Ot===void 0||Ot();const Nt=Et.detail.value,zt=new Set(Array.isArray(Nt)?Nt:[Nt]);for(const bt of st.options)bt.selected=zt.has(bt.value);O.setValue(K,{value:xt(!0)}),wt=xt(!1)},multipleSelection(Et){st.multiple=!0},remove(Et){const Ot=st.options,Nt=Et.detail.remove;Ot[Nt].selected=!1,st.remove(Nt),Ot.length>0&&Array.prototype.findIndex.call(Ot,zt=>zt.selected)===-1&&(Ot[0].selected=!0),O.setValue(K,{value:xt(!0),items:Lt(Et)}),wt=xt(!1)},clear(Et){for(;st.length!==0;)st.remove(0);O.setValue(K,{value:null,items:[]}),wt=xt(!1)},insert(Et){const{index:Ot,displayValue:Nt,exportValue:zt}=Et.detail.insert,bt=st.children[Ot],Mt=document.createElement("option");Mt.textContent=Nt,Mt.value=zt,bt?bt.before(Mt):st.append(Mt),O.setValue(K,{value:xt(!0),items:Lt(Et)}),wt=xt(!1)},items(Et){const{items:Ot}=Et.detail;for(;st.length!==0;)st.remove(0);for(const Nt of Ot){const{displayValue:zt,exportValue:bt}=Nt,Mt=document.createElement("option");Mt.textContent=zt,Mt.value=bt,st.append(Mt)}st.options.length>0&&(st.options[0].selected=!0),O.setValue(K,{value:xt(!0),items:Lt(Et)}),wt=xt(!1)},indices(Et){const Ot=new Set(Et.detail.indices);for(const Nt of Et.target.options)Nt.selected=Ot.has(Nt.index);O.setValue(K,{value:xt(!0)}),wt=xt(!1)},editable(Et){Et.target.disabled=!Et.detail.editable}};this._dispatchEventFromSandbox(Rt,Pt)}),st.addEventListener("input",Pt=>{var Rt;const Et=xt(!0);O.setValue(K,{value:Et}),Pt.preventDefault(),(Rt=this.linkService.eventBus)===null||Rt===void 0||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K,name:"Keystroke",value:wt,changeEx:Et,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(st,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Pt=>Pt.target.value)):st.addEventListener("input",function(Pt){O.setValue(K,{value:xt(!0)})}),this.data.combo&&this._setTextStyle(st),this._setBackgroundColor(st),this._setDefaultPropertiesFromJS(st),this.container.append(st),this.container}}const vt=class extends U{constructor(At){var O,K,tt;const{data:st}=At;super(At,{isRenderable:!vt.IGNORE_TYPES.has(st.parentType)&&!!((O=st.titleObj)!==null&&O!==void 0&&O.str||(K=st.contentsObj)!==null&&K!==void 0&&K.str||(tt=st.richText)!==null&&tt!==void 0&&tt.str)})}render(){this.container.classList.add("popupAnnotation");const At=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(At.length===0)return this.container;const O=new Tt({container:this.container,trigger:Array.from(At),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),K=this.page,tt=C.Util.normalizeRect([this.data.parentRect[0],K.view[3]-this.data.parentRect[1]+K.view[1],this.data.parentRect[2],K.view[3]-this.data.parentRect[3]+K.view[1]]),st=tt[0]+this.data.parentRect[2]-this.data.parentRect[0],ht=tt[1],{pageWidth:_t,pageHeight:xt,pageX:wt,pageY:Lt}=this.viewport.rawDims;return this.container.style.left=100*(st-wt)/_t+"%",this.container.style.top=100*(ht-Lt)/xt+"%",this.container.append(O.render()),this.container}};let pt=vt;It(pt,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class Tt{constructor(O){this.container=O.container,this.trigger=O.trigger,this.color=O.color,this.titleObj=O.titleObj,this.modificationDate=O.modificationDate,this.contentsObj=O.contentsObj,this.richText=O.richText,this.hideWrapper=O.hideWrapper||!1,this.pinned=!1}render(){var O,K;const tt=document.createElement("div");tt.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?tt:this.container,this.hideElement.hidden=!0;const st=document.createElement("div");st.classList.add("popup");const ht=this.color;if(ht){const wt=.7*(255-ht[0])+ht[0],Lt=.7*(255-ht[1])+ht[1],Pt=.7*(255-ht[2])+ht[2];st.style.backgroundColor=C.Util.makeHexColor(0|wt,0|Lt,0|Pt)}const _t=document.createElement("h1");_t.dir=this.titleObj.dir,_t.textContent=this.titleObj.str,st.append(_t);const xt=q.PDFDateString.toDateObject(this.modificationDate);if(xt){const wt=document.createElement("span");wt.classList.add("popupDate"),wt.textContent="{{date}}, {{time}}",wt.dataset.l10nId="annotation_date_string",wt.dataset.l10nArgs=JSON.stringify({date:xt.toLocaleDateString(),time:xt.toLocaleTimeString()}),st.append(wt)}if((O=this.richText)===null||O===void 0||!O.str||(K=this.contentsObj)!==null&&K!==void 0&&K.str&&this.contentsObj.str!==this.richText.str){const wt=this._formatContents(this.contentsObj);st.append(wt)}else X.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:st}),st.lastChild.classList.add("richText","popupContent");Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const wt of this.trigger)wt.addEventListener("click",this._toggle.bind(this)),wt.addEventListener("mouseover",this._show.bind(this,!1)),wt.addEventListener("mouseout",this._hide.bind(this,!1));return st.addEventListener("click",this._hide.bind(this,!0)),tt.append(st),tt}_formatContents(O){let{str:K,dir:tt}=O;const st=document.createElement("p");st.classList.add("popupContent"),st.dir=tt;const ht=K.split(/(?:\r\n?|\n)/);for(let _t=0,xt=ht.length;_t<xt;++_t){const wt=ht[_t];st.append(document.createTextNode(wt)),_t<xt-1&&st.append(document.createElement("br"))}return st}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(){(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class B extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0}),this.textContent=O.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const O=document.createElement("div");O.classList.add("annotationTextContent"),O.setAttribute("role","comment");for(const K of this.textContent){const tt=document.createElement("span");tt.textContent=K,O.append(tt)}this.container.append(O)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class j extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const O=this.data,{width:K,height:tt}=M(O.rect),st=this.svgFactory.create(K,tt,!0),ht=this.svgFactory.createElement("svg:line");return ht.setAttribute("x1",O.rect[2]-O.lineCoordinates[0]),ht.setAttribute("y1",O.rect[3]-O.lineCoordinates[1]),ht.setAttribute("x2",O.rect[2]-O.lineCoordinates[2]),ht.setAttribute("y2",O.rect[3]-O.lineCoordinates[3]),ht.setAttribute("stroke-width",O.borderStyle.width||1),ht.setAttribute("stroke","transparent"),ht.setAttribute("fill","transparent"),st.append(ht),this.container.append(st),this._createPopup(ht,O),this.container}}class z extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const O=this.data,{width:K,height:tt}=M(O.rect),st=this.svgFactory.create(K,tt,!0),ht=O.borderStyle.width,_t=this.svgFactory.createElement("svg:rect");return _t.setAttribute("x",ht/2),_t.setAttribute("y",ht/2),_t.setAttribute("width",K-ht),_t.setAttribute("height",tt-ht),_t.setAttribute("stroke-width",ht||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),st.append(_t),this.container.append(st),this._createPopup(_t,O),this.container}}class G extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const O=this.data,{width:K,height:tt}=M(O.rect),st=this.svgFactory.create(K,tt,!0),ht=O.borderStyle.width,_t=this.svgFactory.createElement("svg:ellipse");return _t.setAttribute("cx",K/2),_t.setAttribute("cy",tt/2),_t.setAttribute("rx",K/2-ht/2),_t.setAttribute("ry",tt/2-ht/2),_t.setAttribute("stroke-width",ht||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),st.append(_t),this.container.append(st),this._createPopup(_t,O),this.container}}class N extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const O=this.data,{width:K,height:tt}=M(O.rect),st=this.svgFactory.create(K,tt,!0);let ht=[];for(const xt of O.vertices){const wt=xt.x-O.rect[0],Lt=O.rect[3]-xt.y;ht.push(wt+","+Lt)}ht=ht.join(" ");const _t=this.svgFactory.createElement(this.svgElementName);return _t.setAttribute("points",ht),_t.setAttribute("stroke-width",O.borderStyle.width||1),_t.setAttribute("stroke","transparent"),_t.setAttribute("fill","transparent"),st.append(_t),this.container.append(st),this._createPopup(_t,O),this.container}}class W extends N{constructor(O){super(O),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class it extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class at extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const O=this.data,{width:K,height:tt}=M(O.rect),st=this.svgFactory.create(K,tt,!0);for(const ht of O.inkLists){let _t=[];for(const wt of ht){const Lt=wt.x-O.rect[0],Pt=O.rect[3]-wt.y;_t.push(`${Lt},${Pt}`)}_t=_t.join(" ");const xt=this.svgFactory.createElement(this.svgElementName);xt.setAttribute("points",_t),xt.setAttribute("stroke-width",O.borderStyle.width||1),xt.setAttribute("stroke","transparent"),xt.setAttribute("fill","transparent"),this._createPopup(xt,O),st.append(xt)}return this.container.append(st),this.container}}class lt extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class dt extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class ft extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class mt extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class gt extends U{constructor(O){var K,tt,st;super(O,{isRenderable:!!(O.data.hasPopup||(K=O.data.titleObj)!==null&&K!==void 0&&K.str||(tt=O.data.contentsObj)!==null&&tt!==void 0&&tt.str||(st=O.data.richText)!==null&&st!==void 0&&st.str),ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ot extends U{constructor(O){var K;super(O,{isRenderable:!0});const{filename:tt,content:st}=this.data.file;this.filename=(0,q.getFilenameFromUrl)(tt,!0),this.content=st,(K=this.linkService.eventBus)===null||K===void 0||K.dispatch("fileattachmentannotation",{source:this,filename:tt,content:st})}render(){var O,K;this.container.classList.add("fileAttachmentAnnotation");let tt;return this.data.hasAppearance?tt=document.createElement("div"):(tt=document.createElement("img"),tt.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),tt.classList.add("popupTriggerArea"),tt.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((O=this.data.titleObj)!==null&&O!==void 0&&O.str||(K=this.data.contentsObj)!==null&&K!==void 0&&K.str||this.data.richText)&&this._createPopup(tt,this.data),this.container.append(tt),this.container}_download(){var O;(O=this.downloadManager)===null||O===void 0||O.openOrDownloadData(this.container,this.content,this.filename)}}const kt=class{static render(At){var O,K;const{annotations:tt,div:st,viewport:ht,accessibilityManager:_t}=At;(0,q.setLayerDimensions)(st,ht);const xt={data:null,layer:st,page:At.page,viewport:ht,linkService:At.linkService,downloadManager:At.downloadManager,imageResourcesPath:At.imageResourcesPath||"",renderForms:At.renderForms!==!1,svgFactory:new q.DOMSVGFactory,annotationStorage:At.annotationStorage||new R.AnnotationStorage,enableScripting:At.enableScripting===!0,hasJSActions:At.hasJSActions,fieldObjects:At.fieldObjects};let wt=0;for(const Lt of tt){if(Lt.noHTML)continue;if(Lt.annotationType!==C.AnnotationType.POPUP){const{width:Et,height:Ot}=M(Lt.rect);if(Et<=0||Ot<=0)continue}xt.data=Lt;const Pt=P.create(xt);if(!Pt.isRenderable)continue;const Rt=Pt.render();if(Lt.hidden&&(Rt.style.visibility="hidden"),Array.isArray(Rt))for(const Et of Rt)Et.style.zIndex=wt++,nt(O=kt,g,y).call(O,Et,Lt.id,st,_t);else Rt.style.zIndex=wt++,Pt instanceof pt?st.prepend(Rt):nt(K=kt,g,y).call(K,Rt,Lt.id,st,_t)}nt(this,D,f).call(this,st,At.annotationCanvasMap)}static update(At){const{annotationCanvasMap:O,div:K,viewport:tt}=At;(0,q.setLayerDimensions)(K,{rotation:tt.rotation}),nt(this,D,f).call(this,K,O),K.hidden=!1}};let Ft=kt;g=new WeakSet,y=function(At,O,K,tt){const st=At.firstChild||At;st.id=`${q.AnnotationPrefix}${O}`,K.append(At),tt==null||tt.moveElementInDOM(K,At,st,!1)},D=new WeakSet,f=function(At,O){if(O){for(const[K,tt]of O){const st=At.querySelector(`[data-annotation-id="${K}"]`);if(!st)continue;const{firstChild:ht}=st;ht?ht.nodeName==="CANVAS"?ht.replaceWith(tt):ht.before(tt):st.append(tt)}O.clear()}},et(Ft,g),et(Ft,D),s.AnnotationLayer=Ft},(S,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function r(u){return Math.floor(255*Math.max(0,Math.min(1,u))).toString(16).padStart(2,"0")}s.ColorConverters=class{static CMYK_G(u){let[o,v,F,g]=u;return["G",1-Math.min(1,.3*o+.59*F+.11*v+g)]}static G_CMYK(u){let[o]=u;return["CMYK",0,0,0,1-o]}static G_RGB(u){let[o]=u;return["RGB",o,o,o]}static G_HTML(u){let[o]=u;const v=r(o);return`#${v}${v}${v}`}static RGB_G(u){let[o,v,F]=u;return["G",.3*o+.59*v+.11*F]}static RGB_HTML(u){let[o,v,F]=u;return`#${r(o)}${r(v)}${r(F)}`}static T_HTML(){return"#00000000"}static CMYK_RGB(u){let[o,v,F,g]=u;return["RGB",1-Math.min(1,o+g),1-Math.min(1,F+g),1-Math.min(1,v+g)]}static CMYK_HTML(u){const o=this.CMYK_RGB(u).slice(1);return this.RGB_HTML(o)}static RGB_CMYK(u){let[o,v,F]=u;const g=1-o,y=1-v,D=1-F;return["CMYK",g,y,D,Math.min(g,y,D)]}}},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var u=r(154);s.XfaLayer=class{static setupStorage(o,v,F,g,y){const D=g.getValue(v,{value:null});switch(F.name){case"textarea":if(D.value!==null&&(o.textContent=D.value),y==="print")break;o.addEventListener("input",f=>{g.setValue(v,{value:f.target.value})});break;case"input":if(F.attributes.type==="radio"||F.attributes.type==="checkbox"){if(D.value===F.attributes.xfaOn?o.setAttribute("checked",!0):D.value===F.attributes.xfaOff&&o.removeAttribute("checked"),y==="print")break;o.addEventListener("change",f=>{g.setValue(v,{value:f.target.checked?f.target.getAttribute("xfaOn"):f.target.getAttribute("xfaOff")})})}else{if(D.value!==null&&o.setAttribute("value",D.value),y==="print")break;o.addEventListener("input",f=>{g.setValue(v,{value:f.target.value})})}break;case"select":if(D.value!==null)for(const f of F.children)f.attributes.value===D.value&&(f.attributes.selected=!0);o.addEventListener("input",f=>{const C=f.target.options,q=C.selectedIndex===-1?"":C[C.selectedIndex].value;g.setValue(v,{value:q})})}}static setAttributes(o){let{html:v,element:F,storage:g=null,intent:y,linkService:D}=o;const{attributes:f}=F,C=v instanceof HTMLAnchorElement;f.type==="radio"&&(f.name=`${f.name}-${y}`);for(const[q,R]of Object.entries(f))if(R!=null)switch(q){case"class":R.length&&v.setAttribute(q,R.join(" "));break;case"dataId":break;case"id":v.setAttribute("data-element-id",R);break;case"style":Object.assign(v.style,R);break;case"textContent":v.textContent=R;break;default:(!C||q!=="href"&&q!=="newWindow")&&v.setAttribute(q,R)}C&&D.addLinkAttributes(v,f.href,f.newWindow),g&&f.dataId&&this.setupStorage(v,f.dataId,F,g)}static render(o){const v=o.annotationStorage,F=o.linkService,g=o.xfaHtml,y=o.intent||"display",D=document.createElement(g.name);g.attributes&&this.setAttributes({html:D,element:g,intent:y,linkService:F});const f=[[g,-1,D]],C=o.div;if(C.append(D),o.viewport){const $=`matrix(${o.viewport.transform.join(",")})`;C.style.transform=$}y!=="richText"&&C.setAttribute("class","xfaLayer xfaFont");const q=[];for(;f.length>0;){var R;const[$,X,J]=f.at(-1);if(X+1===$.children.length){f.pop();continue}const H=$.children[++f.at(-1)[1]];if(H===null)continue;const{name:M}=H;if(M==="#text"){const U=document.createTextNode(H.value);q.push(U),J.append(U);continue}let P;if(P=H!=null&&(R=H.attributes)!==null&&R!==void 0&&R.xmlns?document.createElementNS(H.attributes.xmlns,M):document.createElement(M),J.append(P),H.attributes&&this.setAttributes({html:P,element:H,storage:v,intent:y,linkService:F}),H.children&&H.children.length>0)f.push([H,-1,P]);else if(H.value){const U=document.createTextNode(H.value);u.XfaText.shouldBuildText(M)&&q.push(U),P.append(U)}}for(const $ of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))$.setAttribute("readOnly",!0);return{textDivs:q}}static update(o){const v=`matrix(${o.viewport.transform.join(",")})`;o.div.style.transform=v,o.div.hidden=!1}}},(S,s,r)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var u=r(142),o=r(1),v=r(3);let F=class{constructor(){(0,o.unreachable)("Not implemented: SVGGraphics")}};s.SVGGraphics=F;{let g=function(_){let E=[];const Y=[];for(const rt of _)rt.fn!=="save"?rt.fn==="restore"?E=Y.pop():E.push(rt):(E.push({fnId:92,fn:"group",items:[]}),Y.push(E),E=E.at(-1).items);return E},y=function(_){if(Number.isInteger(_))return _.toString();const E=_.toFixed(10);let Y=E.length-1;if(E[Y]!=="0")return E;do Y--;while(E[Y]==="0");return E.substring(0,E[Y]==="."?Y:Y+1)},D=function(_){if(_[4]===0&&_[5]===0){if(_[1]===0&&_[2]===0)return _[0]===1&&_[3]===1?"":`scale(${y(_[0])} ${y(_[3])})`;if(_[0]===_[3]&&_[1]===-_[2])return`rotate(${y(180*Math.acos(_[0])/Math.PI)})`}else if(_[0]===1&&_[1]===0&&_[2]===0&&_[3]===1)return`translate(${y(_[4])} ${y(_[5])})`;return`matrix(${y(_[0])} ${y(_[1])} ${y(_[2])} ${y(_[3])} ${y(_[4])} ${y(_[5])})`};const f={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},C="http://www.w3.org/XML/1998/namespace",q="http://www.w3.org/1999/xlink",R=["butt","round","square"],$=["miter","round","bevel"],X=function(_){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(URL.createObjectURL&&typeof Blob<"u"&&!Y)return URL.createObjectURL(new Blob([_],{type:E}));const rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Z=`data:${E};base64,`;for(let V=0,Q=_.length;V<Q;V+=3){const ct=255&_[V],vt=255&_[V+1],pt=255&_[V+2];Z+=rt[ct>>2]+rt[(3&ct)<<4|vt>>4]+rt[V+1<Q?(15&vt)<<2|pt>>6:64]+rt[V+2<Q?63&pt:64]}return Z},J=function(){const _=new Uint8Array([137,80,78,71,13,10,26,10]),E=new Int32Array(256);for(let V=0;V<256;V++){let Q=V;for(let ct=0;ct<8;ct++)Q=1&Q?3988292384^Q>>1&2147483647:Q>>1&2147483647;E[V]=Q}function Y(V,Q,ct,vt){let pt=vt;const Tt=Q.length;ct[pt]=Tt>>24&255,ct[pt+1]=Tt>>16&255,ct[pt+2]=Tt>>8&255,ct[pt+3]=255&Tt,pt+=4,ct[pt]=255&V.charCodeAt(0),ct[pt+1]=255&V.charCodeAt(1),ct[pt+2]=255&V.charCodeAt(2),ct[pt+3]=255&V.charCodeAt(3),pt+=4,ct.set(Q,pt),pt+=Q.length;const B=function(j,z,G){let N=-1;for(let W=z;W<G;W++){const it=255&(N^j[W]);N=N>>>8^E[it]}return-1^N}(ct,vt+4,pt);ct[pt]=B>>24&255,ct[pt+1]=B>>16&255,ct[pt+2]=B>>8&255,ct[pt+3]=255&B}function rt(V){let Q=V.length;const ct=65535,vt=Math.ceil(Q/ct),pt=new Uint8Array(2+Q+5*vt+4);let Tt=0;pt[Tt++]=120,pt[Tt++]=156;let B=0;for(;Q>ct;)pt[Tt++]=0,pt[Tt++]=255,pt[Tt++]=255,pt[Tt++]=0,pt[Tt++]=0,pt.set(V.subarray(B,B+ct),Tt),Tt+=ct,B+=ct,Q-=ct;pt[Tt++]=1,pt[Tt++]=255&Q,pt[Tt++]=Q>>8&255,pt[Tt++]=255&~Q,pt[Tt++]=(65535&~Q)>>8&255,pt.set(V.subarray(B),Tt),Tt+=V.length-B;const j=function(z,G,N){let W=1,it=0;for(let at=G;at<N;++at)W=(W+(255&z[at]))%65521,it=(it+W)%65521;return it<<16|W}(V,0,V.length);return pt[Tt++]=j>>24&255,pt[Tt++]=j>>16&255,pt[Tt++]=j>>8&255,pt[Tt++]=255&j,pt}function Z(V,Q,ct,vt){const pt=V.width,Tt=V.height;let B,j,z;const G=V.data;switch(Q){case o.ImageKind.GRAYSCALE_1BPP:j=0,B=1,z=pt+7>>3;break;case o.ImageKind.RGB_24BPP:j=2,B=8,z=3*pt;break;case o.ImageKind.RGBA_32BPP:j=6,B=8,z=4*pt;break;default:throw new Error("invalid format")}const N=new Uint8Array((1+z)*Tt);let W=0,it=0;for(let gt=0;gt<Tt;++gt)N[W++]=0,N.set(G.subarray(it,it+z),W),it+=z,W+=z;if(Q===o.ImageKind.GRAYSCALE_1BPP&&vt){W=0;for(let gt=0;gt<Tt;gt++){W++;for(let ot=0;ot<z;ot++)N[W++]^=255}}const at=new Uint8Array([pt>>24&255,pt>>16&255,pt>>8&255,255&pt,Tt>>24&255,Tt>>16&255,Tt>>8&255,255&Tt,B,j,0,0,0]),lt=function(gt){if(!v.isNodeJS)return rt(gt);try{let ot;ot=parseInt(process.versions.node)>=8?gt:Buffer.from(gt);const kt=require$$6.deflateSync(ot,{level:9});return kt instanceof Uint8Array?kt:new Uint8Array(kt)}catch(ot){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ot)}return rt(gt)}(N),dt=_.length+36+at.length+lt.length,ft=new Uint8Array(dt);let mt=0;return ft.set(_,mt),mt+=_.length,Y("IHDR",at,ft,mt),mt+=12+at.length,Y("IDATA",lt,ft,mt),mt+=12+lt.length,Y("IEND",new Uint8Array(0),ft,mt),X(ft,"image/png",ct)}return function(V,Q,ct){return Z(V,V.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:V.kind,Q,ct)}}();class H{constructor(){this.fontSizeScale=1,this.fontWeight=f.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=f.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(E,Y){this.x=E,this.y=Y}}let M=0,P=0,U=0;s.SVGGraphics=F=class{constructor(_,E){let Y=arguments.length>2&&arguments[2]!==void 0&&arguments[2];(0,u.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new u.DOMSVGFactory,this.current=new H,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=_,this.objs=E,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Y,this._operatorIdMapping=[];for(const rt in o.OPS)this._operatorIdMapping[o.OPS[rt]]=rt}getObject(_){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof _=="string"?_.startsWith("g_")?this.commonObjs.get(_):this.objs.get(_):E}save(){this.transformStack.push(this.transformMatrix);const _=this.current;this.extraStack.push(_),this.current=_.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(_){this.save(),this.executeOpTree(_),this.restore()}loadDependencies(_){const E=_.fnArray,Y=_.argsArray;for(let rt=0,Z=E.length;rt<Z;rt++)if(E[rt]===o.OPS.dependency)for(const V of Y[rt]){const Q=V.startsWith("g_")?this.commonObjs:this.objs,ct=new Promise(vt=>{Q.get(V,vt)});this.current.dependencies.push(ct)}return Promise.all(this.current.dependencies)}transform(_,E,Y,rt,Z,V){const Q=[_,E,Y,rt,Z,V];this.transformMatrix=o.Util.transform(this.transformMatrix,Q),this.tgrp=null}getSVG(_,E){this.viewport=E;const Y=this._initialize(E);return this.loadDependencies(_).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(_)),Y))}convertOpList(_){const E=this._operatorIdMapping,Y=_.argsArray,rt=_.fnArray,Z=[];for(let V=0,Q=rt.length;V<Q;V++){const ct=rt[V];Z.push({fnId:ct,fn:E[ct],args:Y[V]})}return g(Z)}executeOpTree(_){for(const E of _){const Y=E.fn,rt=E.fnId,Z=E.args;switch(0|rt){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(Z);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(Z[0],Z[1]);break;case o.OPS.setFont:this.setFont(Z);break;case o.OPS.showText:case o.OPS.showSpacedText:this.showText(Z[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(Z[0],Z[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(Z[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(Z[0]);break;case o.OPS.setHScale:this.setHScale(Z[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]);break;case o.OPS.setTextRise:this.setTextRise(Z[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(Z[0]);break;case o.OPS.setLineWidth:this.setLineWidth(Z[0]);break;case o.OPS.setLineJoin:this.setLineJoin(Z[0]);break;case o.OPS.setLineCap:this.setLineCap(Z[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(Z[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(Z[0],Z[1],Z[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Z[0],Z[1],Z[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(Z);break;case o.OPS.setFillColorN:this.setFillColorN(Z);break;case o.OPS.shadingFill:this.shadingFill(Z[0]);break;case o.OPS.setDash:this.setDash(Z[0],Z[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(Z[0]);break;case o.OPS.setFlatness:this.setFlatness(Z[0]);break;case o.OPS.setGState:this.setGState(Z[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(Z[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Z[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Z[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Z[0],Z[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]);break;case o.OPS.constructPath:this.constructPath(Z[0],Z[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(E.items);break;default:(0,o.warn)(`Unimplemented operator ${Y}`)}}}setWordSpacing(_){this.current.wordSpacing=_}setCharSpacing(_){this.current.charSpacing=_}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(_,E,Y,rt,Z,V){const Q=this.current;Q.textMatrix=Q.lineMatrix=[_,E,Y,rt,Z,V],Q.textMatrixScale=Math.hypot(_,E),Q.x=Q.lineX=0,Q.y=Q.lineY=0,Q.xcoords=[],Q.ycoords=[],Q.tspan=this.svgFactory.createElement("svg:tspan"),Q.tspan.setAttributeNS(null,"font-family",Q.fontFamily),Q.tspan.setAttributeNS(null,"font-size",`${y(Q.fontSize)}px`),Q.tspan.setAttributeNS(null,"y",y(-Q.y)),Q.txtElement=this.svgFactory.createElement("svg:text"),Q.txtElement.append(Q.tspan)}beginText(){const _=this.current;_.x=_.lineX=0,_.y=_.lineY=0,_.textMatrix=o.IDENTITY_MATRIX,_.lineMatrix=o.IDENTITY_MATRIX,_.textMatrixScale=1,_.tspan=this.svgFactory.createElement("svg:tspan"),_.txtElement=this.svgFactory.createElement("svg:text"),_.txtgrp=this.svgFactory.createElement("svg:g"),_.xcoords=[],_.ycoords=[]}moveText(_,E){const Y=this.current;Y.x=Y.lineX+=_,Y.y=Y.lineY+=E,Y.xcoords=[],Y.ycoords=[],Y.tspan=this.svgFactory.createElement("svg:tspan"),Y.tspan.setAttributeNS(null,"font-family",Y.fontFamily),Y.tspan.setAttributeNS(null,"font-size",`${y(Y.fontSize)}px`),Y.tspan.setAttributeNS(null,"y",y(-Y.y))}showText(_){const E=this.current,Y=E.font,rt=E.fontSize;if(rt===0)return;const Z=E.fontSizeScale,V=E.charSpacing,Q=E.wordSpacing,ct=E.fontDirection,vt=E.textHScale*ct,pt=Y.vertical,Tt=pt?1:-1,B=Y.defaultVMetrics,j=rt*E.fontMatrix[0];let z=0;for(const W of _){if(W===null){z+=ct*Q;continue}if(typeof W=="number"){z+=Tt*W*rt/1e3;continue}const it=(W.isSpace?Q:0)+V,at=W.fontChar;let lt,dt,ft,mt=W.width;if(pt){let gt;const ot=W.vmetric||B;gt=W.vmetric?ot[1]:.5*mt,gt=-gt*j;const kt=ot[2]*j;mt=ot?-ot[0]:mt,lt=gt/Z,dt=(z+kt)/Z}else lt=z/Z,dt=0;(W.isInFont||Y.missingFile)&&(E.xcoords.push(E.x+lt),pt&&E.ycoords.push(-E.y+dt),E.tspan.textContent+=at),ft=pt?mt*j-it*ct:mt*j+it*ct,z+=ft}E.tspan.setAttributeNS(null,"x",E.xcoords.map(y).join(" ")),pt?E.tspan.setAttributeNS(null,"y",E.ycoords.map(y).join(" ")):E.tspan.setAttributeNS(null,"y",y(-E.y)),pt?E.y-=z:E.x+=z*vt,E.tspan.setAttributeNS(null,"font-family",E.fontFamily),E.tspan.setAttributeNS(null,"font-size",`${y(E.fontSize)}px`),E.fontStyle!==f.fontStyle&&E.tspan.setAttributeNS(null,"font-style",E.fontStyle),E.fontWeight!==f.fontWeight&&E.tspan.setAttributeNS(null,"font-weight",E.fontWeight);const G=E.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(G===o.TextRenderingMode.FILL||G===o.TextRenderingMode.FILL_STROKE?(E.fillColor!==f.fillColor&&E.tspan.setAttributeNS(null,"fill",E.fillColor),E.fillAlpha<1&&E.tspan.setAttributeNS(null,"fill-opacity",E.fillAlpha)):E.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?E.tspan.setAttributeNS(null,"fill","transparent"):E.tspan.setAttributeNS(null,"fill","none"),G===o.TextRenderingMode.STROKE||G===o.TextRenderingMode.FILL_STROKE){const W=1/(E.textMatrixScale||1);this._setStrokeAttributes(E.tspan,W)}let N=E.textMatrix;E.textRise!==0&&(N=N.slice(),N[5]+=E.textRise),E.txtElement.setAttributeNS(null,"transform",`${D(N)} scale(${y(vt)}, -1)`),E.txtElement.setAttributeNS(C,"xml:space","preserve"),E.txtElement.append(E.tspan),E.txtgrp.append(E.txtElement),this._ensureTransformGroup().append(E.txtElement)}setLeadingMoveText(_,E){this.setLeading(-E),this.moveText(_,E)}addFontStyle(_){if(!_.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const E=X(_.data,_.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${_.loadedName}"; src: url(${E}); }
`}setFont(_){const E=this.current,Y=this.commonObjs.get(_[0]);let rt=_[1];E.font=Y,this.embedFonts&&!Y.missingFile&&!this.embeddedFonts[Y.loadedName]&&(this.addFontStyle(Y),this.embeddedFonts[Y.loadedName]=Y),E.fontMatrix=Y.fontMatrix||o.FONT_IDENTITY_MATRIX;let Z="normal";Y.black?Z="900":Y.bold&&(Z="bold");const V=Y.italic?"italic":"normal";rt<0?(rt=-rt,E.fontDirection=-1):E.fontDirection=1,E.fontSize=rt,E.fontFamily=Y.loadedName,E.fontWeight=Z,E.fontStyle=V,E.tspan=this.svgFactory.createElement("svg:tspan"),E.tspan.setAttributeNS(null,"y",y(-E.y)),E.xcoords=[],E.ycoords=[]}endText(){var _;const E=this.current;E.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&(_=E.txtElement)!==null&&_!==void 0&&_.hasChildNodes()&&(E.element=E.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(_){_>0&&(this.current.lineWidth=_)}setLineCap(_){this.current.lineCap=R[_]}setLineJoin(_){this.current.lineJoin=$[_]}setMiterLimit(_){this.current.miterLimit=_}setStrokeAlpha(_){this.current.strokeAlpha=_}setStrokeRGBColor(_,E,Y){this.current.strokeColor=o.Util.makeHexColor(_,E,Y)}setFillAlpha(_){this.current.fillAlpha=_}setFillRGBColor(_,E,Y){this.current.fillColor=o.Util.makeHexColor(_,E,Y),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(_){this.current.strokeColor=this._makeColorN_Pattern(_)}setFillColorN(_){this.current.fillColor=this._makeColorN_Pattern(_)}shadingFill(_){const E=this.viewport.width,Y=this.viewport.height,rt=o.Util.inverseTransform(this.transformMatrix),Z=o.Util.applyTransform([0,0],rt),V=o.Util.applyTransform([0,Y],rt),Q=o.Util.applyTransform([E,0],rt),ct=o.Util.applyTransform([E,Y],rt),vt=Math.min(Z[0],V[0],Q[0],ct[0]),pt=Math.min(Z[1],V[1],Q[1],ct[1]),Tt=Math.max(Z[0],V[0],Q[0],ct[0]),B=Math.max(Z[1],V[1],Q[1],ct[1]),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x",vt),j.setAttributeNS(null,"y",pt),j.setAttributeNS(null,"width",Tt-vt),j.setAttributeNS(null,"height",B-pt),j.setAttributeNS(null,"fill",this._makeShadingPattern(_)),this.current.fillAlpha<1&&j.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(j)}_makeColorN_Pattern(_){return _[0]==="TilingPattern"?this._makeTilingPattern(_):this._makeShadingPattern(_)}_makeTilingPattern(_){const E=_[1],Y=_[2],rt=_[3]||o.IDENTITY_MATRIX,[Z,V,Q,ct]=_[4],vt=_[5],pt=_[6],Tt=_[7],B="shading"+U++,[j,z,G,N]=o.Util.normalizeRect([...o.Util.applyTransform([Z,V],rt),...o.Util.applyTransform([Q,ct],rt)]),[W,it]=o.Util.singularValueDecompose2dScale(rt),at=vt*W,lt=pt*it,dt=this.svgFactory.createElement("svg:pattern");dt.setAttributeNS(null,"id",B),dt.setAttributeNS(null,"patternUnits","userSpaceOnUse"),dt.setAttributeNS(null,"width",at),dt.setAttributeNS(null,"height",lt),dt.setAttributeNS(null,"x",`${j}`),dt.setAttributeNS(null,"y",`${z}`);const ft=this.svg,mt=this.transformMatrix,gt=this.current.fillColor,ot=this.current.strokeColor,kt=this.svgFactory.create(G-j,N-z);if(this.svg=kt,this.transformMatrix=rt,Tt===2){const Ft=o.Util.makeHexColor(...E);this.current.fillColor=Ft,this.current.strokeColor=Ft}return this.executeOpTree(this.convertOpList(Y)),this.svg=ft,this.transformMatrix=mt,this.current.fillColor=gt,this.current.strokeColor=ot,dt.append(kt.childNodes[0]),this.defs.append(dt),`url(#${B})`}_makeShadingPattern(_){switch(typeof _=="string"&&(_=this.objs.get(_)),_[0]){case"RadialAxial":const E="shading"+U++,Y=_[3];let rt;switch(_[1]){case"axial":const Z=_[4],V=_[5];rt=this.svgFactory.createElement("svg:linearGradient"),rt.setAttributeNS(null,"id",E),rt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),rt.setAttributeNS(null,"x1",Z[0]),rt.setAttributeNS(null,"y1",Z[1]),rt.setAttributeNS(null,"x2",V[0]),rt.setAttributeNS(null,"y2",V[1]);break;case"radial":const Q=_[4],ct=_[5],vt=_[6],pt=_[7];rt=this.svgFactory.createElement("svg:radialGradient"),rt.setAttributeNS(null,"id",E),rt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),rt.setAttributeNS(null,"cx",ct[0]),rt.setAttributeNS(null,"cy",ct[1]),rt.setAttributeNS(null,"r",pt),rt.setAttributeNS(null,"fx",Q[0]),rt.setAttributeNS(null,"fy",Q[1]),rt.setAttributeNS(null,"fr",vt);break;default:throw new Error(`Unknown RadialAxial type: ${_[1]}`)}for(const Z of Y){const V=this.svgFactory.createElement("svg:stop");V.setAttributeNS(null,"offset",Z[0]),V.setAttributeNS(null,"stop-color",Z[1]),rt.append(V)}return this.defs.append(rt),`url(#${E})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${_[0]}`)}}setDash(_,E){this.current.dashArray=_,this.current.dashPhase=E}constructPath(_,E){const Y=this.current;let rt=Y.x,Z=Y.y,V=[],Q=0;for(const ct of _)switch(0|ct){case o.OPS.rectangle:rt=E[Q++],Z=E[Q++];const vt=rt+E[Q++],pt=Z+E[Q++];V.push("M",y(rt),y(Z),"L",y(vt),y(Z),"L",y(vt),y(pt),"L",y(rt),y(pt),"Z");break;case o.OPS.moveTo:rt=E[Q++],Z=E[Q++],V.push("M",y(rt),y(Z));break;case o.OPS.lineTo:rt=E[Q++],Z=E[Q++],V.push("L",y(rt),y(Z));break;case o.OPS.curveTo:rt=E[Q+4],Z=E[Q+5],V.push("C",y(E[Q]),y(E[Q+1]),y(E[Q+2]),y(E[Q+3]),y(rt),y(Z)),Q+=6;break;case o.OPS.curveTo2:V.push("C",y(rt),y(Z),y(E[Q]),y(E[Q+1]),y(E[Q+2]),y(E[Q+3])),rt=E[Q+2],Z=E[Q+3],Q+=4;break;case o.OPS.curveTo3:rt=E[Q+2],Z=E[Q+3],V.push("C",y(E[Q]),y(E[Q+1]),y(rt),y(Z),y(rt),y(Z)),Q+=4;break;case o.OPS.closePath:V.push("Z")}V=V.join(" "),Y.path&&_.length>0&&_[0]!==o.OPS.rectangle&&_[0]!==o.OPS.moveTo?V=Y.path.getAttributeNS(null,"d")+V:(Y.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Y.path)),Y.path.setAttributeNS(null,"d",V),Y.path.setAttributeNS(null,"fill","none"),Y.element=Y.path,Y.setCurrentPoint(rt,Z)}endPath(){const _=this.current;if(_.path=null,!this.pendingClip)return;if(!_.element){this.pendingClip=null;return}const E="clippath"+M++,Y=this.svgFactory.createElement("svg:clipPath");Y.setAttributeNS(null,"id",E),Y.setAttributeNS(null,"transform",D(this.transformMatrix));const rt=_.element.cloneNode(!0);if(this.pendingClip==="evenodd"?rt.setAttributeNS(null,"clip-rule","evenodd"):rt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Y.append(rt),this.defs.append(Y),_.activeClipUrl){_.clipGroup=null;for(const Z of this.extraStack)Z.clipGroup=null;Y.setAttributeNS(null,"clip-path",_.activeClipUrl)}_.activeClipUrl=`url(#${E})`,this.tgrp=null}clip(_){this.pendingClip=_}closePath(){const _=this.current;if(_.path){const E=`${_.path.getAttributeNS(null,"d")}Z`;_.path.setAttributeNS(null,"d",E)}}setLeading(_){this.current.leading=-_}setTextRise(_){this.current.textRise=_}setTextRenderingMode(_){this.current.textRenderingMode=_}setHScale(_){this.current.textHScale=_/100}setRenderingIntent(_){}setFlatness(_){}setGState(_){for(const[E,Y]of _)switch(E){case"LW":this.setLineWidth(Y);break;case"LC":this.setLineCap(Y);break;case"LJ":this.setLineJoin(Y);break;case"ML":this.setMiterLimit(Y);break;case"D":this.setDash(Y[0],Y[1]);break;case"RI":this.setRenderingIntent(Y);break;case"FL":this.setFlatness(Y);break;case"Font":this.setFont(Y);break;case"CA":this.setStrokeAlpha(Y);break;case"ca":this.setFillAlpha(Y);break;default:(0,o.warn)(`Unimplemented graphic state operator ${E}`)}}fill(){const _=this.current;_.element&&(_.element.setAttributeNS(null,"fill",_.fillColor),_.element.setAttributeNS(null,"fill-opacity",_.fillAlpha),this.endPath())}stroke(){const _=this.current;_.element&&(this._setStrokeAttributes(_.element),_.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(_){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const Y=this.current;let rt=Y.dashArray;E!==1&&rt.length>0&&(rt=rt.map(function(Z){return E*Z})),_.setAttributeNS(null,"stroke",Y.strokeColor),_.setAttributeNS(null,"stroke-opacity",Y.strokeAlpha),_.setAttributeNS(null,"stroke-miterlimit",y(Y.miterLimit)),_.setAttributeNS(null,"stroke-linecap",Y.lineCap),_.setAttributeNS(null,"stroke-linejoin",Y.lineJoin),_.setAttributeNS(null,"stroke-width",y(E*Y.lineWidth)+"px"),_.setAttributeNS(null,"stroke-dasharray",rt.map(y).join(" ")),_.setAttributeNS(null,"stroke-dashoffset",y(E*Y.dashPhase)+"px")}eoFill(){var _;(_=this.current.element)===null||_===void 0||_.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var _;(_=this.current.element)===null||_===void 0||_.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const _=this.svgFactory.createElement("svg:rect");_.setAttributeNS(null,"x","0"),_.setAttributeNS(null,"y","0"),_.setAttributeNS(null,"width","1px"),_.setAttributeNS(null,"height","1px"),_.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(_)}paintImageXObject(_){const E=this.getObject(_);E?this.paintInlineImageXObject(E):(0,o.warn)(`Dependent image with object ID ${_} is not ready yet`)}paintInlineImageXObject(_,E){const Y=_.width,rt=_.height,Z=J(_,this.forceDataSchema,!!E),V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width",y(Y)),V.setAttributeNS(null,"height",y(rt)),this.current.element=V,this.clip("nonzero");const Q=this.svgFactory.createElement("svg:image");Q.setAttributeNS(q,"xlink:href",Z),Q.setAttributeNS(null,"x","0"),Q.setAttributeNS(null,"y",y(-rt)),Q.setAttributeNS(null,"width",y(Y)+"px"),Q.setAttributeNS(null,"height",y(rt)+"px"),Q.setAttributeNS(null,"transform",`scale(${y(1/Y)} ${y(-1/rt)})`),E?E.append(Q):this._ensureTransformGroup().append(Q)}paintImageMaskXObject(_){const E=this.getObject(_.data,_);if(E.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Y=this.current,rt=E.width,Z=E.height,V=Y.fillColor;Y.maskId="mask"+P++;const Q=this.svgFactory.createElement("svg:mask");Q.setAttributeNS(null,"id",Y.maskId);const ct=this.svgFactory.createElement("svg:rect");ct.setAttributeNS(null,"x","0"),ct.setAttributeNS(null,"y","0"),ct.setAttributeNS(null,"width",y(rt)),ct.setAttributeNS(null,"height",y(Z)),ct.setAttributeNS(null,"fill",V),ct.setAttributeNS(null,"mask",`url(#${Y.maskId})`),this.defs.append(Q),this._ensureTransformGroup().append(ct),this.paintInlineImageXObject(E,Q)}paintFormXObjectBegin(_,E){if(Array.isArray(_)&&_.length===6&&this.transform(_[0],_[1],_[2],_[3],_[4],_[5]),E){const Y=E[2]-E[0],rt=E[3]-E[1],Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x",E[0]),Z.setAttributeNS(null,"y",E[1]),Z.setAttributeNS(null,"width",y(Y)),Z.setAttributeNS(null,"height",y(rt)),this.current.element=Z,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(_){const E=this.svgFactory.create(_.width,_.height),Y=this.svgFactory.createElement("svg:defs");E.append(Y),this.defs=Y;const rt=this.svgFactory.createElement("svg:g");return rt.setAttributeNS(null,"transform",D(_.transform)),E.append(rt),this.svg=rt,E}_ensureClipGroup(){if(!this.current.clipGroup){const _=this.svgFactory.createElement("svg:g");_.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(_),this.current.clipGroup=_}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",D(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(S){var s=__webpack_module_cache__[S];if(s!==void 0)return s.exports;var r=__webpack_module_cache__[S]={exports:{}};return __webpack_modules__[S].call(r.exports,r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var S=__webpack_exports__;Object.defineProperty(S,"__esModule",{value:!0}),Object.defineProperty(S,"AbortException",{enumerable:!0,get:function(){return s.AbortException}}),Object.defineProperty(S,"AnnotationEditorLayer",{enumerable:!0,get:function(){return v.AnnotationEditorLayer}}),Object.defineProperty(S,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(S,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(S,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return F.AnnotationEditorUIManager}}),Object.defineProperty(S,"AnnotationLayer",{enumerable:!0,get:function(){return g.AnnotationLayer}}),Object.defineProperty(S,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(S,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(S,"FeatureTest",{enumerable:!0,get:function(){return s.FeatureTest}}),Object.defineProperty(S,"GlobalWorkerOptions",{enumerable:!0,get:function(){return y.GlobalWorkerOptions}}),Object.defineProperty(S,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(S,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(S,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(S,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(S,"PDFDateString",{enumerable:!0,get:function(){return u.PDFDateString}}),Object.defineProperty(S,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(S,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(S,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(S,"PixelsPerInch",{enumerable:!0,get:function(){return u.PixelsPerInch}}),Object.defineProperty(S,"PromiseCapability",{enumerable:!0,get:function(){return s.PromiseCapability}}),Object.defineProperty(S,"RenderingCancelledException",{enumerable:!0,get:function(){return u.RenderingCancelledException}}),Object.defineProperty(S,"SVGGraphics",{enumerable:!0,get:function(){return D.SVGGraphics}}),Object.defineProperty(S,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(S,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(S,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(S,"XfaLayer",{enumerable:!0,get:function(){return f.XfaLayer}}),Object.defineProperty(S,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(S,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(S,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(S,"getFilenameFromUrl",{enumerable:!0,get:function(){return u.getFilenameFromUrl}}),Object.defineProperty(S,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return u.getPdfFilenameFromUrl}}),Object.defineProperty(S,"getXfaPageViewport",{enumerable:!0,get:function(){return u.getXfaPageViewport}}),Object.defineProperty(S,"isDataScheme",{enumerable:!0,get:function(){return u.isDataScheme}}),Object.defineProperty(S,"isPdfFile",{enumerable:!0,get:function(){return u.isPdfFile}}),Object.defineProperty(S,"loadScript",{enumerable:!0,get:function(){return u.loadScript}}),Object.defineProperty(S,"normalizeUnicode",{enumerable:!0,get:function(){return s.normalizeUnicode}}),Object.defineProperty(S,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(S,"setLayerDimensions",{enumerable:!0,get:function(){return u.setLayerDimensions}}),Object.defineProperty(S,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(S,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(S,"version",{enumerable:!0,get:function(){return r.version}});var s=__w_pdfjs_require__(1),r=__w_pdfjs_require__(138),u=__w_pdfjs_require__(142),o=__w_pdfjs_require__(161),v=__w_pdfjs_require__(162),F=__w_pdfjs_require__(141),g=__w_pdfjs_require__(165),y=__w_pdfjs_require__(149),D=__w_pdfjs_require__(168),f=__w_pdfjs_require__(167)})(),__webpack_exports__})())})(pdf_min$2);var pdf_minExports=pdf_min$2.exports;const pdf_min=getDefaultExportFromCjs(pdf_minExports),pdf_min$1=Object.freeze(Object.defineProperty({__proto__:null,default:pdf_min},Symbol.toStringTag,{value:"Module"}));export{pdf_min$1 as p};
